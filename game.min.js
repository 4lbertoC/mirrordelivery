for(var a=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],b={},c=0;c<a.length;c++)b[c]=jsfxlib.createWave(["synth",0,0.4,0,0.208,0,0.12,20,a[c],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var e="023123467".split("");function f(){b[e.shift()].play();0<e.length&&setTimeout(f,200)}setTimeout(f,1E3);var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;
window.requestAnimationFrame=requestAnimationFrame;var g=document.getElementById("c"),h=g.getContext("2d"),k=16,l=2,m=[180,350],n=!1,p=!1,q=0,r=null,s=!1,t=[604,20],u=null,v=[],w=null,x=[5,330],y=!1,z=g.getBoundingClientRect(),A={};window.addEventListener("keyup",function(d){A[d.keyCode]=void 0},!1);window.addEventListener("keydown",function(d){A[d.keyCode]=Date.now()},!1);var B=0,C=0,D=640/k,E=400/k;v.length=D*E;for(B=0;B<D;B++)for(C=0;C<E;C++)v[D*C+B]=0;var F=r=new Image;F.width=16;F.height=32;
F.src="man.png";F=w=new Image;F.width=80;F.height=48;F.src="truck.png";F=u=new Image;F.width=16;F.height=16;F.src="crow.png";g.addEventListener("click",function(d){d=[d.clientX-z.left,d.clientY-z.top];!y&&(604<d[0]&&36>d[1])&&(y=!0,g.style.cursor="none",g.addEventListener("mousemove",function(d){d=[d.clientX-z.left,d.clientY-z.top];t[0]=d[0];t[1]=d[1]}))});for(B=920;960>B;B++)v[B]=1;v[900]=1;v[901]=1;v[902]=l;v[862]=l;v[822]=l;v[782]=l;v[742]=l;v[702]=l;v[662]=l;v[622]=l;v[582]=l;v[621]=1;
v[620]=1;v[619]=1;v[618]=l;v[578]=l;v[538]=l;v[783]=1;v[784]=1;v[785]=1;v[786]=1;v[790]=1;v[791]=1;v[792]=1;v[793]=1;function G(d){return Math.round(m[1]/k)===Math.round((k/2+m[1])/k)||v[D*Math.round(m[1]/k)+Math.round(m[0]/k)]!==d&&v[D*Math.round(m[1]/k)+Math.round(m[0]/k+1)]!==d?!1:!0}function H(){var d=l;return v[D*Math.round(m[1]/k-1)+Math.round(m[0]/k)]===d||v[D*Math.round(m[1]/k-1)+Math.round(m[0]/k+1)]===d?!0:!1}
(function K(){if(y){var I=m[0],J=m[1];A[37]&&(m[0]=Math.max(k,I-5));A[38]?H()?m[1]=Math.min(400-k,J-2):n||p||(q=-7,p=n=!0):!A[38]&&n&&(n=!1);A[39]&&(m[0]=Math.min(640-2*k,I+5));A[40]&&(H()&&!G(1))&&(m[1]=Math.min(400,J+2))}z=g.getBoundingClientRect();if(H()||G(1)){if(0<q||G(l))q=0,p=!1}else 0<q&&s&&(q=k/3),q+=1,p=!0;m[1]+=q;s=1===v[D*Math.round(m[1]/k)+Math.round(m[0]/k)]||1===v[D*Math.round(m[1]/k)+Math.round(m[0]/k+1)]?!0:!1;h.setFillColor("black");h.fillRect(0,0,640,400);for(B=0;B<D;B++)for(C=
0;C<E;C++)0===v[D*C+B]?h.setFillColor("00deff"):1===v[D*C+B]?h.setFillColor("green"):v[D*C+B]===l&&h.setFillColor("brown"),h.fillRect(B*k,C*k,k,k);h.drawImage(r,m[0]+8,m[1]-24);h.drawImage(w,x[0],x[1]);y||(h.setFillColor("red"),h.fillText("Click the crow to start!",490,25,100));h.drawImage(u,t[0],t[1]);h.setFillColor("red");h.fillText("("+m[0]+", "+m[1]+")",10,20);h.fillText("Vert speed: "+q,10,10);h.fillText(D*Math.round(m[1]/k)+Math.round(m[0]/k),10,30);h.fillText(v[D*Math.round(m[1]/k)+Math.round(m[0]/
k)],10,40);h.fillText("Crow Position: ("+t[0]+", "+t[1]+")",10,50);window.requestAnimationFrame(K)})();
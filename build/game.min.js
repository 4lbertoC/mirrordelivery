var Z={};
(function(a){function t(a,c){return c?N(a&255)+t(a>>8,c-1):""}var l=this.wa=a||44100,c=2*l,N=String.fromCharCode,g;this.Ma=function(a){var E=Audio,d=btoa,h="",P=a.length;for(u=0;u<P;u++)var z=32767*a[u]|0,z=-32768>z?-32768:32767<z?32767:z,z=z+(0>z?65536:0),h=h+String.fromCharCode(z&255,z>>8);a=h;a=["RIFF",36+(g=a.length),"WAVEfmt ",16,1,1,l,c,2,16,"data",g,a];h="";for(u=0;u<a.length;u++)h+="s"=="s4s4224422s4s"[u]?a[u]:t(a[u],"s4s4224422s4s".charCodeAt(u)-48);return new E("data:audio/wav;base64,"+d(h))};
var h,u,A=Math.sin,d=2*Math.PI;this.filter=function(a,c,g,l,d,t,N,A,F,D){g=g?g:1;l=l?l:a.length;h=a.slice(0);for(u=g;u<l;u++)h[u]=c(a,h,g,l,u,d,t,N,A,F,D);return h};this.filters={Wa:function(a,c,g,l,d,h){return c[d-1]+h*(a[d]-c[d-1])},Xa:function(a,c,g,l,d,h){return c[d-1]+h*(l-d)/(l-g)*(a[d]-c[d-1])},Va:function(a,c,d,l,g,h){return h*(c[g-1]+a[g]-a[g-1])}};this.za=function(a,c,g,h,t,z,N,A,F){c=c*d/l;var D=Array(a|0);for(u=0;u<a;u++)D[u]=g(u*c,h,t,z,N,A,F);return D};var F=0;this.J={Oa:function(a){4>
a%d&&(F=2*Math.random()-1);return F},Ya:Math.random,Sa:Math.sin,Ta:function(a){return A(a)+0.5*A(a/2)+0.3*A(a/4)},Ra:function(a){return 2*(a/d-(a/d+0.5|0))},Aa:function(a,c){return A(a)>c?1:A(a)<c?-1:c}}}).apply(Z);var sa={};
(function(){this.aa=[];this.Y={square:Z.J.Aa,saw:Z.J.Ra,sine:Z.J.Sa,noise:Z.J.Oa,synth:Z.J.Ta};this.Ia=function(){var a=[],t;for(t in this.Y)a.push(t);return a};this.Ja=function(){function a(a,c,h,u,A){void 0===A&&(A=(h-c)/1E3);a={name:a,id:a.replace(/ /g,""),min:c,max:h,step:A,Ha:u,type:"range",group:l};t.push(a)}var t=[],l=0,c=this.Ia();(function(a,c,h){a={name:a,id:a.replace(/ /g,""),options:c,Ha:h,type:"option",group:l};t.push(a)})("Generator",c,c[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);l++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);l++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);l++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);l++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);l++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);l++;a("RepeatSpeed",
0,0.8,0);l++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);l++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return t};this.za=function(a){var t=2*Math.PI,l=Math.sin,c=Math.pow,N=Math.abs,g=Z.wa,h=a.SuperSamplingQuality|0;1>h&&(h=1);for(var g=g*h,u=[{I:0,U:1,time:a.AttackTime},{I:1+a.SustainPunch,U:1,time:a.SustainTime},{I:1,U:0,time:a.DecayTime}],A=u.length,d=0;d<A;d++)u[d].R=1+(u[d].time*g|0);for(var F=
void 0,da=0,E=-1,K=0,la=-1,P=0,d=0;d<A;d++)P+=u[d].R;P<g/2&&(P=g/2);var z=Array(P/h|0),L=0,ea=0,fa=sa.Y[a.Generator];void 0===fa&&(fa=this.Y.Aa);var D=0,D=a.SquareDuty,ma=a.SquareDutySweep/g,$=0,Q=a.StartFrequency*t/g,na=1+64*c(a.Slide,3)/g,T=c(a.DeltaSlide,3)/(1E3*g);void 0!==h&&(T/=h);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var aa=a.MinFrequency*t/g,X=a.MaxFrequency*t/g,ga=0,oa=a.VibratoFrequency*t/
g,Y=a.VibratoDepth,ta=1+3*c(a.VibratoFrequencySlide,3)/g,ha=a.VibratoDepthSlide/g,I=0,q=a.ChangeSpeed*g,U=c(a.ChangeAmount,2),U=0<a.ChangeAmount?1+10*U:1-0.9*U,s=Array(1024),d=0;1024>d;d++)s[d]=0;var r=0,R=1020*c(a.PhaserOffset,2),ia=4E3*c(a.PhaserSweep,3)/g,B=1E-5<N(ia)||1E-5<N(R),S=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,C=0,n=0,G=c(a.LPFilterCutoff,3)/10,pa=1+a.HPFilterCutoffSweep/1E4,v=5/(1+20*c(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<v&&(v=0.8);var v=1-v,ua=0.999>a.LPFilterCutoff,
w=0,V=c(a.HPFilterCutoff,2)/10,qa=1+a.HPFilterCutoffSweep/1E4,ja=0,za=P;0<a.RepeatSpeed&&(za=c(1-a.RepeatSpeed,2)*g+32);for(var Da=a.MasterVolume,va=0,d=0;d<P;d++)L=fa($,D,0),D+=ma,0>D?D=0:0.5<D&&(D=0.5),ja>za&&($=0,Q=a.StartFrequency*t/g,na=1+3*c(a.Slide,3)/g,T=c(a.DeltaSlide,3)/(1E3*g),void 0!==h&&(T/=h),I=0,q=a.ChangeSpeed*g,U=1+(a.ChangeAmount|0)/12,ja=0),ja+=1,$+=Q,na+=T,Q*=na,I>q&&(Q*=U,q=P),I+=1,Q>X?Q=X:Q<aa&&(Q=aa),ga+=oa,F=Q*l(ga)*Y,$+=F,oa*=ta,ha&&(Y+=ha,0>Y?ha=Y=0:1<Y&&(Y=1,ha=0)),S&&(0.0010<
N(V)&&(V*=qa,1E-5>V?V=1E-5:0.1<V&&(V=0.1)),F=C,G*=pa,0>G?G=0:0.1<G&&(G=0.1),ua?(n+=(L-C)*G,n*=v):(C=L,n=0),C+=n,w+=C-F,L=w*=1-V),B&&(R+=ia,0>R&&(R=-R,ia=-ia),1023<R&&(R=1023,ia=0),s[r]=L,L+=s[r-(R|0)+1024&1023],r=r+1&1023),d>la&&(E+=1,F=E<A?u[E]:{I:0,U:0,R:P},da=F.I,K=(F.U-F.I)/(F.R+1),la+=F.R),L*=da,da+=K,L*=Da,1<h?(ea+=L,0===(d+1)%h&&(z[va]=ea/h,va+=1,ea=0)):z[d]=L;a=g/100|0;t=Array(a);for(d=0;d<a;d++)t[d]=0;return t.concat(z).concat(t)};this.aa=this.Ja()}).apply(sa);var Ea={};(function(){this.ya=function(a){a=sa.za(this.Ga(a));return Z.Ma(a)};this.Ga=function(a){for(var t={},l=sa.aa.length,c=0;c<l;c++)t[sa.aa[c].id]=a[c];return t}}).apply(Ea);(function(){var a,t,l,c,N,g,h,u;function A(a,b,c,e,m){var f=O[a].frame;a=O[a].k;q.drawImage(ba,f.x,f.y,e||f.b,m||f.c,b+a.x,c+a.y,a.b,a.c)}function d(a,b,c,e,m,f){var d=O[a].frame,l=O[a].k;a=O[a].frames;e=f?a[Math.floor(f*e/1E3)%a.length]:a[e];m?q.drawImage(Aa,Ga-(d.x+e.x)-e.b,d.y+e.y,e.b,e.c,b+l.x,c+l.y,e.b,e.c):q.drawImage(ba,d.x+e.x,d.y+e.y,e.b,e.c,b+l.x,c+l.y,e.b,e.c)}function F(){var a=x[s],a={name:"CustomLevel"+ia++,G:a.G.slice(),F:a.F.slice(),A:a.A.slice(),l:a.l&&a.l.slice(),map:a.map,f:a.f.slice(),
o:a.o,Q:!0};x.push(a);s=x.length-1}function da(){p.g&&0<Fa.length&&(Ha[Fa.shift()].play(),setTimeout(da,200))}function E(a,b){wa[a]=Ea.ya(b)}function K(a){wa[a]&&(wa[a].pause(),wa[a].currentTime=0,wa[a].play())}function la(a,b,c,e){var m=a.fillColor,f=a.textAlign;a.fillStyle="black";for(b=b.slice();0<b.length;)a.fillText(b.shift(),c,e),e+=10;a.fillStyle=m;a.textAlign=f}function P(a){var b=a.A,c,e,m,f;xa.D=b;for(var d=M.length=0;d<a.f.length;d++)c=a.f[d],e=Object.create(xa),e.size=c,m=document.createElement("canvas"),
m.width=qa+c,m.height=qa+c,f=m.getContext("2d"),f.fillStyle="yellow",f.fillRect(0,0,qa+c,qa+c),f.fillStyle="black",f.fillText(c,5,10),e.ha=m,m=b[0]+16*d,c=b[1]-c,e.position=[m,c],e.D=[m,c],M.push(e)}function z(J){J=p.h=x[J]||x[s];p.g=!1;b.position=J.G.slice();c=J.F.slice();b.H=0;b.T=0;b.d=void 0;b.f=V;b.q=!1;b.C=!1;b.a=!1;b.p=!1;b.B=!1;N=Ia;g=0;p.time=0;p.j=!1;B=0;J.l?(a=J.l.slice(),t=[J.l[0]+15,J.l[1]+23],l=t.slice()):t=a=null;W="4444444444444444444444444444444444444444"+J.map+"4444444444444444444444444444444444444444";
W=W.split("");P(J);ka.length=0;ca.length=0;Ba.width=S;Ba.height=C;var H=Ba.getContext("2d");H.fillStyle="rgba(0,0,0,0.7)";H.fillRect(0,0,S,C);H.fillStyle="#fff";H.font="20px courier";H.textAlign="center";H.fillText(p.h.name,S/2,C/2-50);H.fillText("Delivery Boy "+p.ea+" - "+p.ga+" Crow",S/2,C/2);H.font="15px courier";H.fillText("Select level with arrows",S/2,C/2+80);H.fillText("Click the crow to start!",S/2,C/2+100);H.fillText(J.Q?"E: edit   D: delete   J: insert/copy JSON   S: share":"E: edit",S/
2,C/2+120);H.beginPath();H.arc(c[0],c[1],16,0,360);H.lineWidth=1;H.strokeStyle="#fff";H.stroke();Fa=Ja.slice()}function L(){p.ea+=1;I.style.cursor="auto";K(w.va);z(s)}function ea(){p.ga+=1;I.style.cursor="auto";K(w.na);z(s)}function fa(a){return[a.clientX-p.fa.left,a.clientY-p.fa.top]}function D(){return Math.max(1,b.speed+b.S-(void 0!==b.d?M[b.d].size:0))}function ma(a,b){return Math.round(a[0]/n)===Math.round(b[0]/n)&&Math.round(a[1]/n)===Math.round(b[1]/n)}function $(){var a=b.d,c=void 0!==a?M[a]:
void 0;if(void 0===c){for(a=0;a<M.length;a++)if(ma(b.position,M[a].position)){b.d=a;K(w.W);return}X(v.n)&&(b.H=Ka,K(w.n))}else b.d=void 0,K(w.W),X(v.oa)&&void 0!==c&&(M.splice(a,1),0>=M.length?L():K(w.ja))}function Q(){var a=b.P,c=D();b.a||(a=0);a=Math.min(c,a+c/5);b.P=a;return X(v.e)?c/3:a}function na(J){var d=D(),g=b.La,e=b.position[0],m=b.position[1],f=ya.ia;if(p.g||p.j){if(p.j)if(f[k.s]&&!b.a)B=(B+ua-1)%ua,b.a=!0;else if(f[k.v]&&!b.a)B=(B+1)%ua,b.a=!0;else if(f[k.r]&&!b.a)a instanceof Array?l=
t=a=null:(a=[32,32],t=[a[0]+15,a[1]+23],l=t.slice()),b.a=!0;else if(f[k.V]&&!b.a){b.a=!0;try{var h=JSON.parse(prompt("Set crates",JSON.stringify(x[s].f)));if(h instanceof Array){for(d=0;d<h.length;d++)"number"===!typeof d&&alert("Crates not valid"),h[d]=Math.max(1,Math.min(5,h[d]));x[s].f=h;P(x[s])}}catch(q){alert("Crates not valid: "+q.message)}f[k.V]=void 0}else if(f[k.$]&&!b.a){b.a=!0;if(d=prompt("Set name",x[s].name))x[s].name=d;f[k.$]=!1}else f[k.ca]&&!b.a?(b.a=!0,J=+prompt("Set time",x[s].o),
!isNaN(J)&&0<J&&(x[s].o=J),f[k.ca]=!1):f[k.s]||(f[k.v]||f[k.r]||f[k.V]||f[k.$]||f[k.ca])||(b.a=!1);else p.g&&(!f[k.qa]||b.C||b.p||b.q?f[k.N]&&!b.q?(b.q=!0,0<b.H&&(b.H--,b.S=Da,b.T=J+va,h=Object.create(La),h.position=[b.position[0]+4,b.position[1]-7],ka.push(h),K(w.ua))):f[k.qa]||(f[k.N]||!b.q)||(b.q=!1):(b.q=!0,$()),f[k.da]?X(v.e)?(b.position[1]=Math.min(C-n,m-g),b.a=!0):b.C||b.p||(b.i=b.Ka,b.P=d,b.C=!0,b.p=!0,K(w.ra)):!f[k.da]&&b.C&&(b.C=!1),f[k.s]&&(b.position[0]=Math.max(n,e-Q()),b.a=!0,b.B=!0),
f[k.v]&&(b.position[0]=Math.min(S-2*n,e+Q()),b.a=!0,b.B=!1),f[k.ma]&&((X(v.e)||T(v.e))&&!T(v.O))&&(b.position[1]=Math.min(C,m+g),b.a=!0),f[k.s]||(f[k.da]||f[k.v]||f[k.ma])||(b.a=!1));f[k.Ea]&&(I.style.cursor="auto",p.j&&(x[s].map=W.join("").substring(G,G*pa-G),x[s].G=b.position.slice(),x[s].F=c.slice(),a instanceof Array&&(x[s].l=a.slice()),x[s].A=xa.D.slice()),z(s))}else if(f[k.s]&&!b.a)s=(s+x.length-1)%x.length,z(s),b.a=!0;else if(f[k.v]&&!b.a)s=(s+1)%x.length,z(s),b.a=!0;else if(f[k.N]&&!b.a)x[s].Q||
(F(),z(s)),p.j=!0;else if(f[k.Ca]&&!b.a)b.a=!0,x[s].Q&&(x.splice(s,1),s--,z(s));else if(f[k.Z]&&x[s].Q&&!b.a){if(g=d=prompt("LEVEL JSON",JSON.stringify(x[s])))a:{try{JSON.parse(d);g=!0;break a}catch(r){alert("Level not valid: "+r.message)}g=!1}g&&(x[s]=JSON.parse(d),z(s));f[k.Z]=void 0}else f[k.ba]&&!b.a?(b.a=!0,d=new XMLHttpRequest,d.onload=function(){prompt("Your level share url",this.responseText);f[k.ba]=void 0},d.open("post","http://127.0.0.1:3000/addLevel",!0),d.send(JSON.stringify(x[s]))):
f[k.s]||(f[k.v]||f[k.N]||f[k.Z]||f[k.ba])||(b.a=!1)}function T(a){return ma(b.position,[b.position[0],b.position[1]+n/2])||W[G*Math.round(b.position[1]/n)+Math.round(b.position[0]/n-1)]!==a&&W[G*Math.round(b.position[1]/n)+Math.round(b.position[0]/n)]!==a?!1:!0}function aa(a,b){return W[G*Math.round(a[1]/n-1)+Math.round(a[0]/n-0.5)]===b?!0:!1}function X(a){return aa(b.position,a)}function ga(a,b){return Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)}function oa(){return void 0!==b.d?M[b.d]:void 0}function Y(){var a=
oa();a&&(K(w.sa),b.d=void 0,a.position=a.D.slice(),b.f--,0>=b.f&&ea())}function ta(){var a=oa();a&&b.i>za-a.size&&Y()}function ha(a,b,c){var e=null,d="#00deff";a===v.O?e=y.xa:a===v.w?e=y.w:a===v.Fa?d="#000":a===v.oa?d="#0f0":a===v.u?e=y.u:a===v.e?e=y.e:a===v.n&&(e=y.n);q.fillStyle=d;q.fillRect(b,c,n,n);null!==e&&A(e,b,c,n,n)}window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var I=document.getElementById("c"),
q=I.getContext("2d"),U=0,s=0,r=[0,0],R=!1,ia=1,B=0,S=640,C=400,n=16,G=S/n,pa=C/n,v={EMPTY:"0",O:"1",e:"2",w:"3",Fa:"4",oa:"5",u:"6",n:"7"},ua=12,w={ra:0,sa:1,ka:2,Ba:3,W:4,ja:5,va:6,na:7,ua:8,X:9,n:10,pa:11},V=10,qa=12,ja=[1,-6],za=12,Da=3,va=5E3,Ka=3,Ia=10,Ja="023123467".split(""),k={s:37,da:38,v:39,ma:40,N:69,qa:32,Ea:27,Ca:68,Z:74,r:71,V:67,$:78,ca:84,ba:83},y={L:0,la:1,n:2,r:3,e:4,t:5,u:6,w:7,ta:8,xa:9},O={};O[y.L]={frame:{x:30,y:0,b:30,c:14},k:{x:1,y:1,b:30,c:14},frames:[{x:1,y:1,b:15,c:13},
{x:17,y:1,b:15,c:13}]};O[y.la]={frame:{x:14,y:40,b:14,c:8},k:{x:1,y:7,b:14,c:8}};O[y.n]={frame:{x:32,y:14,b:16,c:16},k:{x:0,y:0,b:16,c:16}};O[y.r]={frame:{x:0,y:24,b:14,c:24},k:{x:1,y:7,b:14,c:24}};O[y.e]={frame:{x:16,y:48,b:16,c:16},k:{x:0,y:0,b:16,c:16}};O[y.t]={frame:{x:0,y:0,b:30,c:24},k:{x:1,y:3,b:30,c:24},frames:[{x:0,y:0,b:15,c:24},{x:15,y:0,b:15,c:24}]};O[y.u]={frame:{x:48,y:14,b:16,c:10},k:{x:0,y:10,b:16,c:10}};O[y.w]={frame:{x:14,y:24,b:16,c:16},k:{x:0,y:0,b:16,c:16}};O[y.ta]={frame:{x:30,
y:30,b:6,c:14},k:{x:4,y:1,b:6,c:14}};O[y.xa]={frame:{x:0,y:48,b:16,c:16},k:{x:0,y:0,b:16,c:16}};var ba=new Image,Aa=document.createElement("canvas"),Ga=0;ba.onload=function(){Aa.width=Ga=ba.naturalWidth;Aa.height=ba.naturalHeight;var a=Aa.getContext("2d");a.translate(ba.naturalWidth,0);a.scale(-1,1);a.drawImage(ba,0,0)};ba.src="img/imgmap.png";var b={position:null,speed:4,P:0,S:0,T:0,La:2,Ka:-7,C:!1,p:!1,a:!1,q:!1,i:0,Za:!1,d:void 0,H:0,f:V,Ua:!0};c=null;h=3;u=!1;g=0;N=Ia;var W=[],xa={ha:null,size:1,
position:null,D:[0,0]},M=[],La={position:null},ka=[],Ma={position:null,speed:6},ca=[],p={g:!1,fa:I.getBoundingClientRect(),time:0,ea:0,ga:0,h:null,j:!1},Ba=document.createElement("canvas");l=null;a=[80,53];t=[95,78];var Ca={name:"Tutorial",G:[33,370],F:[S-24,55],A:[300,365],l:[20,70],map:"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
f:[1],o:3E6,m:{K:[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,["SPACE: buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]]],M:[[580,30,["PLAYER 2"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,["RClick: eat from nest or candy crumbs","LClick: shoot!"]],[140,60,["Don't touch roofs or the boy"]]]}},
ra={name:"Level 1",G:[25,366],F:[616,24],A:[41,364],l:[513,180],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
f:[1,2],o:6E4},Na={name:"Level 2",startingPlayerPosition:[28,143],startingCrowPosition:[600,296],crateStartingPosition:[588,365],grannyPosition:[51,50],map:"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
crates:[1,2],gameTime:12E4},Oa={name:"Level 5",G:[75,370],F:[S-24,24],A:[83,365],l:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000000000000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000000000200000000200000000000000000207000000000020000000000333330000000000011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
f:[1,2,3],o:3E5},x=window.localStorage&&window.localStorage.Da&&JSON.parse(window.localStorage.Da)||[Ca,ra,Na,Oa],ya={ia:{},Qa:function(a){ya.ia[a.keyCode]=void 0},Pa:function(a){ya.ia[a.keyCode]=U}};window.addEventListener("keyup",ya.Qa,!1);window.addEventListener("keydown",ya.Pa,!1);for(var Ca=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ha={},ra=0;ra<Ca.length;ra++)Ha[ra]=Ea.ya(["synth",0,0.4,0,0.208,0,0.12,20,Ca[ra],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var Fa=Ja.slice(),
wa={};E(w.ra,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);E(w.sa,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);E(w.ja,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);E(w.ua,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);E(w.ka,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,
-0.592,0,0.094,0.066,1,0,0,0.28,0]);E(w.na,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);E(w.va,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);E(w.W,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);E(w.Ba,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);E(w.X,["square",
0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);E(w.n,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);E(w.pa,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);z(s);I.addEventListener("click",function(){if(p.j)if(8===B)b.position[0]=r[0],b.position[1]=r[1];else if(9===B)c[0]=r[0],c[1]=r[1];else if(10===B&&a)a[0]=r[0],a[1]=r[1],t=[a[0]+15,a[1]+23],l=t.slice();else{if(11===
B){xa.D[0]=r[0];xa.D[1]=r[1];for(var d=0;d<M.length;d++){var n=M[d];n.position[0]=r[0]+16*d;n.position[1]=r[1]-n.size}}}else p.g?0<h&&g<U&&(h--,K(w.ka),d=Object.create(Ma),d.position=c.slice(),ca.push(d)):r[0]>c[0]-16&&(r[0]<c[0]+16&&r[1]>c[1]-16&&r[1]<c[1]+16)&&(p.g=!0,p.time=U+p.h.o,da(),I.style.cursor="none")});I.addEventListener("mousedown",function(a){1===a.which&&(R=!0);p.j&&(R&&8>B)&&(a=Math.floor(r[1]/n),0<a&&a<pa-1&&(W[G*a+Math.floor(r[0]/n)]=""+B))});I.addEventListener("mouseup",function(a){1===
a.which&&(R=!1)});I.addEventListener("mousemove",function(a){var b=fa(a);r=[b[0],b[1]];p.g?c=fa(a).slice():p.j&&R&&8>B&&(a=Math.floor(r[1]/n),0<a&&a<pa-1&&(W[G*a+Math.floor(r[0]/n)]=""+B))});I.addEventListener("contextmenu",function(a){a.preventDefault();if(p.g&&g<U)if(a=fa(a),W[G*Math.round(c[1]/n-0.5)+Math.round(c[0]/n-0.5)]===v.u&&3>h)K(w.X),h++;else{var b;for(b=0;b<ka.length;b++)if(ma(a,ka[b].position)){h=Math.max(h,5);K(w.X);ka.splice(b,1);break}}});(function H(k){na(k);U=k;if(p.g){p.fa=I.getBoundingClientRect();
b.i>n/2&&(b.i+b.position[1]>b.Na&&b.i)&&(b.i=n/2,ta());if(X(v.e)||T(v.e)||T(v.O)||b.position[1]>C-n){if(T(v.e)||0<b.i)ta(),b.i=0,b.P=0,b.p=!1;X(v.e)||T(v.e)||0!==b.i||(b.position[1]=b.position[1]-b.position[1]%n+1)}else ta(),b.i+=1,b.p=!0;b.position[1]+=b.i;for(var e=b.position[0],m=b.position[1];m<C-n&&!aa([e,m],v.O);)m+=n;m-=m%n;b.Na=m;void 0!==b.d&&(M[b.d].position[0]=b.position[0]+ja[0],M[b.d].position[1]=b.position[1]+ja[1]);b.T<k&&0<b.S&&(b.S=0);for(e=0;e<ca.length;e++)if(m=ca[e],m.position[1]+=
m.speed,ma(b.position,m.position))Y(),ca.splice(e,1),e--;else if(m.position[1]>C||aa(m.position,v.w))ca.splice(e,1),e--;p.time<k&&ea();u=Math.pow(7*D()+75,2)>=ga(c,b.position);if(a){var e=aa(c,v.u)?t:c,m=Math.atan((e[1]-l[1])/(e[0]-l[0])),f=l[0]>e[0]?-1:1;if(3<Math.abs(e[0]-l[0])||3<Math.abs(e[1]-l[1]))l[0]+=1*Math.cos(m)*f,l[1]+=1*Math.sin(m)*f}(Math.pow(7*D()+25,2)>=ga(c,b.position)||aa(c,v.w)||a&&3>Math.sqrt(ga(l,c)))&&g<k&&(g=k+5E3,K(w.pa),h=0,N--,0>=N&&L())}q.fillStyle="black";q.fillRect(0,0,
S,C);for(e=0;e<G;e++)for(m=0;m<pa;m++)ha(W[G*m+e],e*n,m*n);for(m=0;m<M.length;m++)m!==b.d&&(e=M[m],q.drawImage(e.ha,e.position[0]-8,e.position[1]-8));for(m=0;m<ka.length;m++)e=ka[m],A(y.la,e.position[0]-8,e.position[1]-8);for(m=0;m<ca.length;m++)e=ca[m],A(y.ta,e.position[0]-8,e.position[1]-8);a&&A(y.r,a[0],a[1]);if(p.h.m){for(e=0;e<p.h.m.K.length;e++)la(q,p.h.m.K[e][2],p.h.m.K[e][0],p.h.m.K[e][1]);for(e=0;e<p.h.m.M.length;e++)la(q,p.h.m.M[e][2],p.h.m.M[e][0],p.h.m.M[e][1])}p.g?b.p?d(y.t,b.position[0]-
8,b.position[1]-24,0,b.B):b.a?d(y.t,b.position[0]-8,b.position[1]-24,10,b.B,k):d(y.t,b.position[0]-8,b.position[1]-24,1,b.B):d(y.t,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(e=M[b.d],q.drawImage(e.ha,b.B?e.position[0]+2:e.position[0]-16-e.size,e.position[1]-10));u&&(q.beginPath(),q.arc(b.position[0],b.position[1],7*D()+25,0,360),q.lineWidth=2,q.strokeStyle="#f09",q.stroke());p.g?g>k&&0===Math.floor(k/100)%2||d(y.L,c[0]-8,c[1]-8,2,!1,k):d(y.L,c[0]-8,c[1]-8,0);a&&(q.fillStyle="red",q.fillRect(l[0]-
1,l[1]-1,2,2),q.beginPath(),q.arc(l[0],l[1],5,0,360),q.lineWidth=2,q.strokeStyle="red",q.stroke());p.g?(q.fillStyle="#00deff",q.fillText("BOY",10,396),q.fillStyle="red",q.fillText("CROW",600,12),q.fillStyle="white",q.fillText("SPEED: "+D()+"   BOOST: "+Math.max(0,Math.ceil((b.T-k)/1E3))+"   TIME: "+Math.max(0,Math.ceil((p.time-k)/1E3))+"   CANDIES: "+b.H+"   CRATES: "+b.f,50,396),q.fillText("SHOTS: "+h+"   STUN: "+Math.max(0,Math.ceil((g-k)/1E3))+"   HEALTH: "+N,410,12)):p.j&&(q.fillStyle="white",
q.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+x[s].o+")   N: NAME ("+x[s].name+")",12,12));p.g||p.j||q.drawImage(Ba,0,0);p.j&&(q.globalAlpha=0.6,8>B?(ha(""+B,r[0]-r[0]%n,r[1]-r[1]%n),q.strokeStyle="#000",q.strokeRect(r[0]-r[0]%n,r[1]-r[1]%n,n,n)):8===B?d(y.t,r[0]-8,r[1]-24,1):9===B?d(y.L,r[0]-8,r[1]-8,0):10===B?A(y.r,r[0],r[1]):11===B&&(q.fillStyle="yellow",q.fillRect(r[0]-8,r[1]-8,16,16),q.fillStyle="#000",q.fillText("C",r[0]-4,r[1]+4)),q.globalAlpha=1);window.requestAnimationFrame(H)})()})();

var X={};
(function(b){function f(b,c){return c?p(b&255)+f(b>>8,c-1):""}var v=this.ra=b||44100,u=2*v,p=String.fromCharCode,t;this.La=function(b){var c=Audio,p=btoa,C="",w=b.length;for(k=0;k<w;k++)var g=32767*b[k]|0,g=-32768>g?-32768:32767<g?32767:g,g=g+(0>g?65536:0),C=C+String.fromCharCode(g&255,g>>8);b=C;b=["RIFF",36+(t=b.length),"WAVEfmt ",16,1,1,v,u,2,16,"data",t,b];C="";for(k=0;k<b.length;k++)C+="s"=="s4s4224422s4s"[k]?b[k]:f(b[k],"s4s4224422s4s".charCodeAt(k)-48);return new c("data:audio/wav;base64,"+p(C))};
var g,k,H=Math.sin,c=2*Math.PI;this.filter=function(b,c,f,p,w,t,v,u,z,H){f=f?f:1;p=p?p:b.length;g=b.slice(0);for(k=f;k<p;k++)g[k]=c(b,g,f,p,k,w,t,v,u,z,H);return g};this.filters={Ua:function(b,c,f,p,w,g){return c[w-1]+g*(b[w]-c[w-1])},Va:function(b,c,f,p,g,k){return c[g-1]+k*(p-g)/(p-f)*(b[g]-c[g-1])},Ta:function(b,c,f,p,g,k){return k*(c[g-1]+b[g]-b[g-1])}};this.ta=function(b,f,p,g,t,u,z,H,Y){f=f*c/v;var N=Array(b|0);for(k=0;k<b;k++)N[k]=p(k*f,g,t,u,z,H,Y);return N};var z=0;this.C={Na:function(b){4>
b%c&&(z=2*Math.random()-1);return z},Wa:Math.random,Ra:Math.sin,Sa:function(b){return H(b)+0.5*H(b/2)+0.3*H(b/4)},Qa:function(b){return 2*(b/c-(b/c+0.5|0))},ua:function(b,c){return H(b)>c?1:H(b)<c?-1:c}}}).apply(X);var na={};
(function(){this.X=[];this.T={square:X.C.ua,saw:X.C.Qa,sine:X.C.Ra,noise:X.C.Na,synth:X.C.Sa};this.Ha=function(){var b=[],f;for(f in this.T)b.push(f);return b};this.Ia=function(){function b(b,t,g,k,u){void 0===u&&(u=(g-t)/1E3);b={name:b,id:b.replace(/ /g,""),min:t,max:g,step:u,Ga:k,type:"range",group:v};f.push(b)}var f=[],v=0,u=this.Ha();(function(b,t,g){b={name:b,id:b.replace(/ /g,""),options:t,Ga:g,type:"option",group:v};f.push(b)})("Generator",u,u[0]);b("SuperSamplingQuality",0,16,0,1);b("MasterVolume",
0,1,0.4);v++;b("AttackTime",0,1,0.1);b("SustainTime",0,2,0.3);b("SustainPunch",0,3,2);b("DecayTime",0,2,1);v++;b("MinFrequency",20,2400,0,1);b("StartFrequency",20,2400,440,1);b("MaxFrequency",20,2400,2E3,1);b("Slide",-1,1,0);b("DeltaSlide",-1,1,0);v++;b("VibratoDepth",0,1,0);b("VibratoFrequency",0.01,48,8);b("VibratoDepth Slide",-0.3,1,0);b("VibratoFrequencySlide",-1,1,0);v++;b("ChangeAmount",-1,1,0);b("ChangeSpeed",0,1,0.1);v++;b("SquareDuty",0,0.5,0);b("SquareDutySweep",-1,1,0);v++;b("RepeatSpeed",
0,0.8,0);v++;b("PhaserOffset",-1,1,0);b("PhaserSweep",-1,1,0);v++;b("LPFilterCutoff",0,1,1);b("LPFilterCutoffSweep",-1,1,0);b("LPFilterResonance",0,1,0);b("HPFilterCutoff",0,1,0);b("HPFilterCutoffSweep",-1,1,0);return f};this.ta=function(b){var f=2*Math.PI,v=Math.sin,u=Math.pow,p=Math.abs,t=X.ra,g=b.SuperSamplingQuality|0;1>g&&(g=1);for(var t=t*g,k=[{B:0,P:1,time:b.AttackTime},{B:1+b.SustainPunch,P:1,time:b.SustainTime},{B:1,P:0,time:b.DecayTime}],H=k.length,c=0;c<H;c++)k[c].M=1+(k[c].time*t|0);for(var z=
void 0,aa=0,fa=-1,ma=0,C=-1,w=0,c=0;c<H;c++)w+=k[c].M;w<t/2&&(w=t/2);var ga=Array(w/g|0),J=0,M=0,Y=na.T[b.Generator];void 0===Y&&(Y=this.T.ua);var N=0,N=b.SquareDuty,oa=b.SquareDutySweep/t,O=0,K=b.StartFrequency*f/t,ha=1+64*u(b.Slide,3)/t,U=u(b.DeltaSlide,3)/(1E3*t);void 0!==g&&(U/=g);b.MinFrequency>b.StartFrequency&&(b.MinFrequency=b.StartFrequency);b.MaxFrequency<b.StartFrequency&&(b.MaxFrequency=b.StartFrequency);for(var ua=b.MinFrequency*f/t,V=b.MaxFrequency*f/t,W=0,Q=b.VibratoFrequency*f/t,R=
b.VibratoDepth,va=1+3*u(b.VibratoFrequencySlide,3)/t,ba=b.VibratoDepthSlide/t,Z=0,ia=b.ChangeSpeed*t,F=u(b.ChangeAmount,2),F=0<b.ChangeAmount?1+10*F:1-0.9*F,d=Array(1024),c=0;1024>c;c++)d[c]=0;var T=0,m=1020*u(b.PhaserOffset,2),q=4E3*u(b.PhaserSweep,3)/t,ja=1E-5<p(q)||1E-5<p(m),za=0.0010<b.HPFilterCutoff||0.999>b.LPFilterCutoff,B=0,E=0,D=u(b.LPFilterCutoff,3)/10,s=1+b.HPFilterCutoffSweep/1E4,I=5/(1+20*u(b.LPFilterResonance,2))*(0.01+b.LPFilterCutoff);0.8<I&&(I=0.8);var I=1-I,ka=0.999>b.LPFilterCutoff,
x=0,P=u(b.HPFilterCutoff,2)/10,A=1+b.HPFilterCutoffSweep/1E4,ca=0,da=w;0<b.RepeatSpeed&&(da=u(1-b.RepeatSpeed,2)*t+32);for(var wa=b.MasterVolume,pa=0,c=0;c<w;c++)J=Y(O,N,0),N+=oa,0>N?N=0:0.5<N&&(N=0.5),ca>da&&(O=0,K=b.StartFrequency*f/t,ha=1+3*u(b.Slide,3)/t,U=u(b.DeltaSlide,3)/(1E3*t),void 0!==g&&(U/=g),Z=0,ia=b.ChangeSpeed*t,F=1+(b.ChangeAmount|0)/12,ca=0),ca+=1,O+=K,ha+=U,K*=ha,Z>ia&&(K*=F,ia=w),Z+=1,K>V?K=V:K<ua&&(K=ua),W+=Q,z=K*v(W)*R,O+=z,Q*=va,ba&&(R+=ba,0>R?ba=R=0:1<R&&(R=1,ba=0)),za&&(0.0010<
p(P)&&(P*=A,1E-5>P?P=1E-5:0.1<P&&(P=0.1)),z=B,D*=s,0>D?D=0:0.1<D&&(D=0.1),ka?(E+=(J-B)*D,E*=I):(B=J,E=0),B+=E,x+=B-z,J=x*=1-P),ja&&(m+=q,0>m&&(m=-m,q=-q),1023<m&&(m=1023,q=0),d[T]=J,J+=d[T-(m|0)+1024&1023],T=T+1&1023),c>C&&(fa+=1,z=fa<H?k[fa]:{B:0,P:0,M:w},aa=z.B,ma=(z.P-z.B)/(z.M+1),C+=z.M),J*=aa,aa+=ma,J*=wa,1<g?(M+=J,0===(c+1)%g&&(ga[pa]=M/g,pa+=1,M=0)):ga[c]=J;b=t/100|0;f=Array(b);for(c=0;c<b;c++)f[c]=0;return f.concat(ga).concat(f)};this.X=this.Ia()}).apply(na);var Aa={};(function(){this.sa=function(b){b=na.ta(this.Fa(b));return X.La(b)};this.Fa=function(b){for(var f={},v=na.X.length,u=0;u<v;u++)f[na.X[u].id]=b[u];return f}}).apply(Aa);(function(){var b,f,v,u,p,t,g,k,H,c;function z(a,b,c,e){var n=new Image;n.width=b||16;n.height=c||16;n.onload=e;n.src=a;return n}function aa(a){var b=document.createElement("canvas"),c=z("img/man2.png",32,32,function(){var e=b.getContext("2d");a&&(e.translate(32,0),e.scale(-1,1));e.drawImage(c,0,0)});b.width=32;b.height=32;return b}function fa(){var a=y[m],a={name:"CustomLevel"+za++,v:a.v.slice(),u:a.u.slice(),r:a.r.slice(),k:a.k&&a.k.slice(),map:a.map,d:a.d.slice(),m:a.m,K:!0};y.push(a);m=y.length-
1}function ma(){l.e&&0<Ba.length&&(Ca[Ba.shift()].play(),setTimeout(ma,200))}function C(a,b){qa[a]=Aa.sa(b)}function w(a){qa[a]&&(qa[a].pause(),qa[a].currentTime=0,qa[a].play())}function ga(a,b,c,e){var n=a.fillColor,f=a.textAlign;a.fillStyle="black";for(b=b.slice();0<b.length;)a.fillText(b.shift(),c,e),e+=10;a.fillStyle=n;a.textAlign=f}function J(a){var b=a.r,c,e,f,d;ra.t=b;for(var g=L.length=0;g<a.d.length;g++)c=a.d[g],e=Object.create(ra),e.size=c,f=document.createElement("canvas"),f.width=da+c,
f.height=da+c,d=f.getContext("2d"),d.fillStyle="yellow",d.fillRect(0,0,da+c,da+c),d.fillStyle="black",d.fillText(c,5,10),e.b=f,f=b[0]+16*g,c=b[1]-c,e.position=[f,c],e.t=[f,c],L.push(e)}function M(b){b=l.f=y[b]||y[m];l.e=!1;a.position=b.v.slice();p=b.u.slice();a.A=0;a.O=0;a.c=void 0;a.d=ca;a.o=!1;a.s=!1;a.a=!1;a.n=!1;a.i=!0;t=Da;g=0;l.time=0;l.h=!1;B=0;b.k?(f=b.k.slice(),v=[b.k[0]+15,b.k[1]+23],c=v.slice()):v=f=null;S="4444444444444444444444444444444444444444"+b.map+"4444444444444444444444444444444444444444";
S=S.split("");J(b);ea.length=0;$.length=0;xa.width=E;xa.height=D;var G=xa.getContext("2d");G.fillStyle="rgba(0,0,0,0.7)";G.fillRect(0,0,E,D);G.fillStyle="#fff";G.font="20px courier";G.textAlign="center";G.fillText(l.f.name,E/2,D/2-50);G.fillText("Delivery Boy "+l.ba+" - "+l.da+" Crow",E/2,D/2);G.font="15px courier";G.fillText("Select level with arrows",E/2,D/2+80);G.fillText("Click the crow to start!",E/2,D/2+100);G.fillText(b.K?"E: edit   D: delete   J: insert/copy JSON   S: share":"E: edit",E/2,
D/2+120);G.beginPath();G.arc(p[0],p[1],16,0,360);G.lineWidth=1;G.strokeStyle="#fff";G.stroke();Ba=Ea.slice()}function Y(){l.ba+=1;F.style.cursor="auto";w(A.qa);M(m)}function N(){l.da+=1;F.style.cursor="auto";w(A.ia);M(m)}function oa(a){return[a.clientX-l.ca.left,a.clientY-l.ca.top]}function O(){return Math.max(1,a.speed+a.N-(void 0!==a.c?L[a.c].size:0))}function K(a,b){return Math.round(a[0]/s)===Math.round(b[0]/s)&&Math.round(a[1]/s)===Math.round(b[1]/s)}function ha(){var b=a.c,c=void 0!==b?L[b]:
void 0;if(void 0===c){for(b=0;b<L.length;b++)if(K(a.position,L[b].position)){a.c=b;w(A.R);return}Q(x.w)&&(a.A=Fa,w(A.w))}else a.c=void 0,w(A.R),Q(x.ja)&&void 0!==c&&(L.splice(b,1),0>=L.length?Y():w(A.fa))}function U(){var b=a.J,c=O();a.a||(b=0);b=Math.min(c,b+c/5);a.J=b;return Q(x.j)?c/3:b}function ua(b){var d=O(),g=a.Ka,e=a.position[0],n=a.position[1],r=sa.ea;if(l.e||l.h){if(l.h)if(r[h.p]&&!a.a)B=(B+P-1)%P,a.a=!0;else if(r[h.q]&&!a.a)B=(B+1)%P,a.a=!0;else if(r[h.ka]&&!a.a)f instanceof Array?c=v=
f=null:(f=[32,32],v=[f[0]+15,f[1]+23],c=v.slice()),a.a=!0;else if(r[h.Q]&&!a.a){a.a=!0;try{var k=JSON.parse(prompt("Set crates",JSON.stringify(y[m].d)));if(k instanceof Array){for(d=0;d<k.length;d++)"number"===!typeof d&&alert("Crates not valid"),k[d]=Math.max(1,Math.min(5,k[d]));y[m].d=k;J(y[m])}}catch(q){alert("Crates not valid: "+q.message)}r[h.Q]=void 0}else if(r[h.V]&&!a.a){a.a=!0;if(d=prompt("Set name",y[m].name))y[m].name=d;r[h.V]=!1}else r[h.$]&&!a.a?(a.a=!0,b=+prompt("Set time",y[m].m),!isNaN(b)&&
0<b&&(y[m].m=b),r[h.$]=!1):r[h.p]||(r[h.q]||r[h.ka]||r[h.Q]||r[h.V]||r[h.$])||(a.a=!1);else l.e&&(!r[h.ma]||a.s||a.n||a.o?r[h.H]&&!a.o?(a.o=!0,0<a.A&&(a.A--,a.N=Ga,a.O=b+Ha,k=Object.create(Ia),k.position=[a.position[0]+4,a.position[1]-7],ea.push(k),w(A.pa))):r[h.ma]||(r[h.H]||!a.o)||(a.o=!1):(a.o=!0,ha()),r[h.aa]?Q(x.j)?(a.position[1]=Math.min(D-s,n-g),a.a=!0):a.s||a.n||(a.g=a.Ja,a.J=d,a.s=!0,a.n=!0,w(A.na)):!r[h.aa]&&a.s&&(a.s=!1),r[h.p]&&(a.position[0]=Math.max(s,e-U()),a.a=!0,a.i=!1),r[h.q]&&(a.position[0]=
Math.min(E-2*s,e+U()),a.a=!0,a.i=!0),r[h.ha]&&((Q(x.j)||V(x.j))&&!V(x.I))&&(a.position[1]=Math.min(D,n+g),a.a=!0),r[h.p]||(r[h.aa]||r[h.q]||r[h.ha])||(a.a=!1));r[h.Aa]&&(F.style.cursor="auto",l.h&&(y[m].map=S.join("").substring(I,I*ka-I),y[m].v=a.position.slice(),y[m].u=p.slice(),f instanceof Array&&(y[m].k=f.slice()),y[m].r=ra.t.slice()),M(m))}else if(r[h.p]&&!a.a)m=(m+y.length-1)%y.length,M(m),a.a=!0;else if(r[h.q]&&!a.a)m=(m+1)%y.length,M(m),a.a=!0;else if(r[h.H]&&!a.a)y[m].K||(fa(),M(m)),l.h=
!0;else if(r[h.wa]&&!a.a)a.a=!0,y[m].K&&(y.splice(m,1),m--,M(m));else if(r[h.U]&&y[m].K&&!a.a){if(g=d=prompt("LEVEL JSON",JSON.stringify(y[m])))a:{try{JSON.parse(d);g=!0;break a}catch(t){alert("Level not valid: "+t.message)}g=!1}g&&(y[m]=JSON.parse(d),M(m));r[h.U]=void 0}else r[h.Z]&&!a.a?(a.a=!0,d=new XMLHttpRequest,d.onload=function(){prompt("Your level share url",this.responseText);r[h.Z]=void 0},d.open("post","http://127.0.0.1:3000/addLevel",!0),d.send(JSON.stringify(y[m]))):r[h.p]||(r[h.q]||
r[h.H]||r[h.U]||r[h.Z])||(a.a=!1)}function V(b){return K(a.position,[a.position[0],a.position[1]+s/2])||S[I*Math.round(a.position[1]/s)+Math.round(a.position[0]/s-1)]!==b&&S[I*Math.round(a.position[1]/s)+Math.round(a.position[0]/s)]!==b?!1:!0}function W(a,b){return S[I*Math.round(a[1]/s-1)+Math.round(a[0]/s-0.5)]===b?!0:!1}function Q(b){return W(a.position,b)}function R(a,b){return Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)}function va(){return void 0!==a.c?L[a.c]:void 0}function ba(){var b=va();
b&&(w(A.oa),a.c=void 0,b.position=b.t.slice(),a.d--,0>=a.d&&N())}function Z(){var b=va();b&&a.g>pa-b.size&&ba()}function ia(a,b,c){var e=null,f="#00deff";a===x.I?e=ta.Ea.b:a===x.Y?e=ta.Ca.b:a===x.Da?f="#000":a===x.ja?f="#0f0":a===x.W?e=ta.Ba.b:a===x.j?e=ta.ya.b:a===x.w&&(e=ta.xa.b);d.fillStyle=f;d.fillRect(b,c,s,s);null!==e&&d.drawImage(e,b,c,s,s)}window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;
var F=document.getElementById("c"),d=F.getContext("2d"),T=0,m=0,q=[0,0],ja=!1,za=1,B=0,E=640,D=400,s=16,I=E/s,ka=D/s,x={EMPTY:"0",I:"1",j:"2",Y:"3",Da:"4",ja:"5",W:"6",w:"7"},P=12,A={na:0,oa:1,ga:2,va:3,R:4,fa:5,qa:6,ia:7,pa:8,S:9,w:10,la:11},ca=10,da=12,wa=[1,-6],pa=12,Ga=3,Ha=5E3,Fa=3,Da=10,Ea="023123467".split(""),h={p:37,aa:38,q:39,ha:40,H:69,ma:32,Aa:27,wa:68,U:74,ka:71,Q:67,V:78,$:84,Z:83},a={position:null,speed:4,J:0,N:0,O:0,Ka:2,Ja:-7,s:!1,n:!1,a:!1,o:!1,g:0,images:{D:aa(),L:aa(!0)},Xa:!1,
c:void 0,A:0,d:ca,i:!0};p=null;b=z("img/crow2.png");k=3;H=!1;g=0;t=Da;var S=[],ta={ya:{b:z("img/ladder.png")},Ba:{b:z("img/nest.png")},xa:{b:z("img/dispenser.png")},Ca:{b:z("img/roof.gif")},Ea:{b:z("img/wall.gif")}},ra={b:null,size:1,position:null,t:[0,0]},L=[],Ia={b:z("img/crumbs.png"),position:null},ea=[],Ja={b:z("img/shot.png"),position:null,speed:6},$=[],l={e:!1,ca:F.getBoundingClientRect(),time:0,ba:0,da:0,f:null,h:!1},xa=document.createElement("canvas");c=null;f=[80,53];u=z("img/granny.png");
v=[95,78];var ya={name:"Tutorial",v:[33,370],u:[E-24,55],r:[300,365],k:[20,70],map:"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
d:[1],m:3E6,l:{F:[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,["SPACE: buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]]],G:[[580,30,["PLAYER 2"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,["RClick: eat from nest or candy crumbs","LClick: shoot!"]],[140,60,["Don't touch roofs or the boy"]]]}},
la={name:"Level 1",v:[25,366],u:[616,24],r:[41,364],k:[513,180],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
d:[1,2],m:6E4},Ka={name:"Level 2",startingPlayerPosition:[28,143],startingCrowPosition:[600,296],crateStartingPosition:[588,365],grannyPosition:[51,50],map:"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
crates:[1,2],gameTime:12E4},La={name:"Level 5",v:[75,370],u:[E-24,24],r:[83,365],k:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000000000000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000000000200000000200000000000000000207000000000020000000000333330000000000011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
d:[1,2,3],m:3E5},y=window.localStorage&&window.localStorage.za&&JSON.parse(window.localStorage.za)||[ya,la,Ka,La],sa={ea:{},Pa:function(a){sa.ea[a.keyCode]=void 0},Oa:function(a){sa.ea[a.keyCode]=T}};window.addEventListener("keyup",sa.Pa,!1);window.addEventListener("keydown",sa.Oa,!1);for(var ya=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ca={},la=0;la<ya.length;la++)Ca[la]=Aa.sa(["synth",0,0.4,0,0.208,0,0.12,20,ya[la],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var Ba=Ea.slice(),
qa={};C(A.na,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);C(A.oa,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);C(A.fa,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);C(A.pa,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);C(A.ga,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,
-0.592,0,0.094,0.066,1,0,0,0.28,0]);C(A.ia,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);C(A.qa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);C(A.R,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);C(A.va,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);C(A.S,["square",
0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);C(A.w,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);C(A.la,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);M(m);F.addEventListener("click",function(){if(l.h)if(8===B)a.position[0]=q[0],a.position[1]=q[1];else if(9===B)p[0]=q[0],p[1]=q[1];else if(10===B&&f)f[0]=q[0],f[1]=q[1],v=[f[0]+15,f[1]+23],c=v.slice();else{if(11===
B){ra.t[0]=q[0];ra.t[1]=q[1];for(var b=0;b<L.length;b++){var d=L[b];d.position[0]=q[0]+16*b;d.position[1]=q[1]-d.size}}}else l.e?0<k&&g<T&&(k--,w(A.ga),b=Object.create(Ja),b.position=p.slice(),$.push(b)):q[0]>p[0]-16&&(q[0]<p[0]+16&&q[1]>p[1]-16&&q[1]<p[1]+16)&&(l.e=!0,l.time=T+l.f.m,ma(),F.style.cursor="none")});F.addEventListener("mousedown",function(a){1===a.which&&(ja=!0);l.h&&(ja&&8>B)&&(a=Math.floor(q[1]/s),0<a&&a<ka-1&&(S[I*a+Math.floor(q[0]/s)]=""+B))});F.addEventListener("mouseup",function(a){1===
a.which&&(ja=!1)});F.addEventListener("mousemove",function(a){var b=oa(a);q=[b[0],b[1]];l.e?p=oa(a).slice():l.h&&ja&&8>B&&(a=Math.floor(q[1]/s),0<a&&a<ka-1&&(S[I*a+Math.floor(q[0]/s)]=""+B))});F.addEventListener("contextmenu",function(a){a.preventDefault();if(l.e&&g<T)if(a=oa(a),S[I*Math.round(p[1]/s-0.5)+Math.round(p[0]/s-0.5)]===x.W&&3>k)w(A.S),k++;else{var b;for(b=0;b<ea.length;b++)if(K(a,ea[b].position)){k=Math.max(k,5);w(A.S);ea.splice(b,1);break}}});(function G(h){ua(h);T=h;if(l.e){l.ca=F.getBoundingClientRect();
a.g>s/2&&(a.g+a.position[1]>a.Ma&&a.g)&&(a.g=s/2,Z());if(Q(x.j)||V(x.j)||V(x.I)||a.position[1]>D-s){if(V(x.j)||0<a.g)Z(),a.g=0,a.J=0,a.n=!1;Q(x.j)||V(x.j)||0!==a.g||(a.position[1]=a.position[1]-a.position[1]%s+1)}else Z(),a.g+=1,a.n=!0;a.position[1]+=a.g;for(var e=a.position[0],n=a.position[1];n<D-s&&!W([e,n],x.I);)n+=s;n-=n%s;a.Ma=n;void 0!==a.c&&(L[a.c].position[0]=a.position[0]+wa[0],L[a.c].position[1]=a.position[1]+wa[1]);a.O<h&&0<a.N&&(a.N=0);for(e=0;e<$.length;e++)if(n=$[e],n.position[1]+=n.speed,
K(a.position,n.position))ba(),$.splice(e,1),e--;else if(n.position[1]>D||W(n.position,x.Y))$.splice(e,1),e--;l.time<h&&N();H=Math.pow(7*O()+75,2)>=R(p,a.position);if(f){var e=W(p,x.W)?v:p,n=Math.atan((e[1]-c[1])/(e[0]-c[0])),r=c[0]>e[0]?-1:1;if(3<Math.abs(e[0]-c[0])||3<Math.abs(e[1]-c[1]))c[0]+=1*Math.cos(n)*r,c[1]+=1*Math.sin(n)*r}(Math.pow(7*O()+25,2)>=R(p,a.position)||W(p,x.Y)||f&&3>Math.sqrt(R(c,p)))&&g<h&&(g=h+5E3,w(A.la),k=0,t--,0>=t&&Y())}d.fillStyle="black";d.fillRect(0,0,E,D);for(e=0;e<I;e++)for(n=
0;n<ka;n++)ia(S[I*n+e],e*s,n*s);for(n=0;n<L.length;n++)n!==a.c&&(e=L[n],d.drawImage(e.b,e.position[0]-8,e.position[1]-8));for(n=0;n<ea.length;n++)e=ea[n],d.drawImage(e.b,e.position[0]-8,e.position[1]-8);for(n=0;n<$.length;n++)e=$[n],d.drawImage(e.b,e.position[0]-8,e.position[1]-8);f&&d.drawImage(u,f[0],f[1]);if(l.f.l){for(e=0;e<l.f.l.F.length;e++)ga(d,l.f.l.F[e][2],l.f.l.F[e][0],l.f.l.F[e][1]);for(e=0;e<l.f.l.G.length;e++)ga(d,l.f.l.G[e][2],l.f.l.G[e][0],l.f.l.G[e][1])}l.e?a.n?d.drawImage(a.i?a.images.D:
a.images.L,a.i?0:16,0,16,32,a.position[0]-8,a.position[1]-24,16,32):a.a?d.drawImage(a.i?a.images.D:a.images.L,1>Math.floor(h/100)%2?0:17,0,15,32,a.position[0]-8,a.position[1]-24,16,32):d.drawImage(a.i?a.images.D:a.images.L,a.i?17:0,0,15,32,a.position[0]-8,a.position[1]-24,16,32):d.drawImage(a.i?a.images.D:a.images.L,a.i?17:0,0,15,32,a.position[0]-8,a.position[1]-24,16,32);void 0!==a.c&&(e=L[a.c],d.drawImage(e.b,a.i?e.position[0]-16-e.size:e.position[0]+2,e.position[1]-10));H&&(d.beginPath(),d.arc(a.position[0],
a.position[1],7*O()+25,0,360),d.lineWidth=2,d.strokeStyle="#f09",d.stroke());l.e?g>h&&0===Math.floor(h/100)%2||d.drawImage(b,3>Math.floor(h/100)%6?1:17,0,15,16,p[0]-8,p[1]-8,16,16):d.drawImage(b,0,0,16,16,p[0]-8,p[1]-8,16,16);f&&(d.fillStyle="red",d.fillRect(c[0]-1,c[1]-1,2,2),d.beginPath(),d.arc(c[0],c[1],5,0,360),d.lineWidth=2,d.strokeStyle="red",d.stroke());l.e?(d.fillStyle="#00deff",d.fillText("BOY",10,396),d.fillStyle="red",d.fillText("CROW",600,12),d.fillStyle="white",d.fillText("SPEED: "+O()+
"   BOOST: "+Math.max(0,Math.ceil((a.O-h)/1E3))+"   TIME: "+Math.max(0,Math.ceil((l.time-h)/1E3))+"   CANDIES: "+a.A+"   CRATES: "+a.d,50,396),d.fillText("SHOTS: "+k+"   STUN: "+Math.max(0,Math.ceil((g-h)/1E3))+"   HEALTH: "+t,410,12)):l.h&&(d.fillStyle="white",d.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+y[m].m+")   N: NAME ("+y[m].name+")",12,12));l.e||l.h||d.drawImage(xa,0,0);l.h&&(d.globalAlpha=0.6,8>B?(ia(""+B,q[0]-q[0]%s,q[1]-q[1]%s),d.strokeStyle="#000",d.strokeRect(q[0]-
q[0]%s,q[1]-q[1]%s,s,s)):8===B?d.drawImage(a.images.D,17,0,15,32,q[0]-8,q[1]-24,16,32):9===B?d.drawImage(b,0,0,16,16,q[0]-8,q[1]-8,16,16):10===B?d.drawImage(u,q[0],q[1]):11===B&&(d.fillStyle="yellow",d.fillRect(q[0]-8,q[1]-8,16,16),d.fillStyle="#000",d.fillText("C",q[0]-4,q[1]+4)),d.globalAlpha=1);window.requestAnimationFrame(G)})()})();

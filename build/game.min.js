var ea={};
(function(a){function t(a,c){return c?P(a&255)+t(a>>8,c-1):""}var m=this.ua=a||44100,c=2*m,P=String.fromCharCode,h;this.Ka=function(a){var B=Audio,d=btoa,k="",z=a.length;for(u=0;u<z;u++)var L=32767*a[u]|0,L=-32768>L?-32768:32767<L?32767:L,L=L+(0>L?65536:0),k=k+String.fromCharCode(L&255,L>>8);a=k;a=["RIFF",36+(h=a.length),"WAVEfmt ",16,1,1,m,c,2,16,"data",h,a];k="";for(u=0;u<a.length;u++)k+="s"=="s4s4224422s4s"[u]?a[u]:t(a[u],"s4s4224422s4s".charCodeAt(u)-48);return new B("data:audio/wav;base64,"+d(k))};
var k,u,C=Math.sin,d=2*Math.PI;this.filter=function(a,c,h,m,d,t,P,C,D,E){h=h?h:1;m=m?m:a.length;k=a.slice(0);for(u=h;u<m;u++)k[u]=c(a,k,h,m,u,d,t,P,C,D,E);return k};this.filters={Ua:function(a,c,h,m,d,k){return c[d-1]+k*(a[d]-c[d-1])},Va:function(a,c,h,m,d,k){return c[d-1]+k*(m-d)/(m-h)*(a[d]-c[d-1])},Ta:function(a,c,d,m,h,k){return k*(c[h-1]+a[h]-a[h-1])}};this.xa=function(a,c,h,k,t,P,C,D,T){c=c*d/m;var E=Array(a|0);for(u=0;u<a;u++)E[u]=h(u*c,k,t,P,C,D,T);return E};var D=0;this.I={Ma:function(a){4>
a%d&&(D=2*Math.random()-1);return D},Wa:Math.random,Qa:Math.sin,Ra:function(a){return C(a)+0.5*C(a/2)+0.3*C(a/4)},Pa:function(a){return 2*(a/d-(a/d+0.5|0))},ya:function(a,c){return C(a)>c?1:C(a)<c?-1:c}}}).apply(ea);var ra={};
(function(){this.Z=[];this.W={square:ea.I.ya,saw:ea.I.Pa,sine:ea.I.Qa,noise:ea.I.Ma,synth:ea.I.Ra};this.Ga=function(){var a=[],t;for(t in this.W)a.push(t);return a};this.Ha=function(){function a(a,c,k,u,C){void 0===C&&(C=(k-c)/1E3);a={name:a,id:a.replace(/ /g,""),min:c,max:k,step:C,Fa:u,type:"range",group:m};t.push(a)}var t=[],m=0,c=this.Ga();(function(a,c,k){a={name:a,id:a.replace(/ /g,""),options:c,Fa:k,type:"option",group:m};t.push(a)})("Generator",c,c[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);m++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);m++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);m++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);m++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);m++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);m++;a("RepeatSpeed",
0,0.8,0);m++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);m++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return t};this.xa=function(a){var t=2*Math.PI,m=Math.sin,c=Math.pow,P=Math.abs,h=ea.ua,k=a.SuperSamplingQuality|0;1>k&&(k=1);for(var h=h*k,u=[{H:0,S:1,time:a.AttackTime},{H:1+a.SustainPunch,S:1,time:a.SustainTime},{H:1,S:0,time:a.DecayTime}],C=u.length,d=0;d<C;d++)u[d].P=1+(u[d].time*h|0);
for(var D=void 0,ia=0,B=-1,K=0,la=-1,z=0,d=0;d<C;d++)z+=u[d].P;z<h/2&&(z=h/2);var L=Array(z/k|0),M=0,fa=0,T=ra.W[a.Generator];void 0===T&&(T=this.W.ya);var E=0,E=a.SquareDuty,Ca=a.SquareDutySweep/h,aa=0,R=a.StartFrequency*t/h,W=1+64*c(a.Slide,3)/h,U=c(a.DeltaSlide,3)/(1E3*h);void 0!==k&&(U/=k);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var $=a.MinFrequency*t/h,ma=a.MaxFrequency*t/h,na=0,oa=a.VibratoFrequency*
t/h,X=a.VibratoDepth,wa=1+3*c(a.VibratoFrequencySlide,3)/h,H=a.VibratoDepthSlide/h,p=0,ba=a.ChangeSpeed*h,r=c(a.ChangeAmount,2),r=0<a.ChangeAmount?1+10*r:1-0.9*r,s=Array(1024),d=0;1024>d;d++)s[d]=0;var ca=0,Y=1020*c(a.PhaserOffset,2),A=4E3*c(a.PhaserSweep,3)/h,Q=1E-5<P(A)||1E-5<P(Y),N=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,n=0,F=0,V=c(a.LPFilterCutoff,3)/10,w=1+a.HPFilterCutoffSweep/1E4,da=5/(1+20*c(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<da&&(da=0.8);var da=1-da,x=0.999>a.LPFilterCutoff,
ja=0,S=c(a.HPFilterCutoff,2)/10,xa=1+a.HPFilterCutoffSweep/1E4,pa=0,ya=z;0<a.RepeatSpeed&&(ya=c(1-a.RepeatSpeed,2)*h+32);for(var Da=a.MasterVolume,sa=0,d=0;d<z;d++)M=T(aa,E,0),E+=Ca,0>E?E=0:0.5<E&&(E=0.5),pa>ya&&(aa=0,R=a.StartFrequency*t/h,W=1+3*c(a.Slide,3)/h,U=c(a.DeltaSlide,3)/(1E3*h),void 0!==k&&(U/=k),p=0,ba=a.ChangeSpeed*h,r=1+(a.ChangeAmount|0)/12,pa=0),pa+=1,aa+=R,W+=U,R*=W,p>ba&&(R*=r,ba=z),p+=1,R>ma?R=ma:R<$&&(R=$),na+=oa,D=R*m(na)*X,aa+=D,oa*=wa,H&&(X+=H,0>X?H=X=0:1<X&&(X=1,H=0)),N&&(0.0010<
P(S)&&(S*=xa,1E-5>S?S=1E-5:0.1<S&&(S=0.1)),D=n,V*=w,0>V?V=0:0.1<V&&(V=0.1),x?(F+=(M-n)*V,F*=da):(n=M,F=0),n+=F,ja+=n-D,M=ja*=1-S),Q&&(Y+=A,0>Y&&(Y=-Y,A=-A),1023<Y&&(Y=1023,A=0),s[ca]=M,M+=s[ca-(Y|0)+1024&1023],ca=ca+1&1023),d>la&&(B+=1,D=B<C?u[B]:{H:0,S:0,P:z},ia=D.H,K=(D.S-D.H)/(D.P+1),la+=D.P),M*=ia,ia+=K,M*=Da,1<k?(fa+=M,0===(d+1)%k&&(L[sa]=fa/k,sa+=1,fa=0)):L[d]=M;a=h/100|0;t=Array(a);for(d=0;d<a;d++)t[d]=0;return t.concat(L).concat(t)};this.Z=this.Ha()}).apply(ra);var Ea={};(function(){this.wa=function(a){a=ra.xa(this.Ea(a));return ea.Ka(a)};this.Ea=function(a){for(var t={},m=ra.Z.length,c=0;c<m;c++)t[ra.Z[c].id]=a[c];return t}}).apply(Ea);(function(){var a,t,m,c,P,h,k,u;function C(a,b,c,e,g){var f=J[a].frame;a=J[a].j;p.drawImage(ga,f.x,f.y,e||f.b,g||f.c,b+a.x,c+a.y,a.b,a.c)}function d(a,b,c,e,g,f){var d=J[a].frame,m=J[a].j;a=J[a].frames;e=f?a[Math.floor(f*e/1E3)%a.length]:a[e];g?p.drawImage(za,Ga-(d.x+e.x)-e.b,d.y+e.y,e.b,e.c,b+m.x,c+m.y,e.b,e.c):p.drawImage(ga,d.x+e.x,d.y+e.y,e.b,e.c,b+m.x,c+m.y,e.b,e.c)}function D(){var a=v[r],a={name:"CustomLevel"+Y++,F:a.F.slice(),D:a.D.slice(),w:a.w.slice(),k:a.k&&a.k.slice(),map:a.map,f:a.f.slice(),
n:a.n,O:!0};v.push(a);r=v.length-1}function ia(){q.g&&0<Fa.length&&(Ha[Fa.shift()].play(),setTimeout(ia,200))}function B(a,b){ta[a]=Ea.wa(b)}function K(a){ta[a]&&(ta[a].pause(),ta[a].currentTime=0,ta[a].play())}function la(a){var b=a.w,c,e,g,f;ua.C=b;for(var d=O.length=0;d<a.f.length;d++)c=a.f[d],e=Object.create(ua),e.size=c,g=document.createElement("canvas"),g.width=S+c,g.height=S+c,f=g.getContext("2d"),f.fillStyle="yellow",f.fillRect(0,0,S+c,S+c),f.fillStyle="black",f.fillText(c,5,10),e.fa=g,g=
b[0]+16*d,c=b[1]-c,e.position=[g,c],e.C=[g,c],O.push(e)}function z(I){I=q.m=v[I]||v[r];q.g=!1;b.position=I.F.slice();c=I.D.slice();b.G=0;b.R=0;b.d=void 0;b.f=ja;b.p=!1;b.B=!1;b.a=!1;b.o=!1;b.A=!1;P=Ia;h=0;q.time=0;q.i=!1;A=0;I.k?(a=I.k.slice(),t=[I.k[0]+15,I.k[1]+23],m=t.slice()):t=a=null;Z="4444444444444444444444444444444444444444"+I.map+"4444444444444444444444444444444444444444";Z=Z.split("");la(I);ka.length=0;ha.length=0;Aa.width=Q;Aa.height=N;var G=Aa.getContext("2d");G.fillStyle="rgba(0,0,0,0.7)";
G.fillRect(0,0,Q,N);G.fillStyle="#fff";G.font="20px courier";G.textAlign="center";G.fillText(q.m.name,Q/2,N/2-50);G.fillText("Delivery Boy "+q.ca+" - "+q.ea+" Crow",Q/2,N/2);G.font="15px courier";G.fillText("Select level with arrows",Q/2,N/2+80);G.fillText("Click the crow to start!",Q/2,N/2+100);G.fillText(I.O?"E: edit   D: delete   J: insert/copy JSON   S: share":"E: edit",Q/2,N/2+120);G.beginPath();G.arc(c[0],c[1],16,0,360);G.lineWidth=1;G.strokeStyle="#fff";G.stroke();Fa=Ja.slice()}function L(){q.ca+=
1;H.style.cursor="auto";K(x.ta);z(r)}function M(){q.ea+=1;H.style.cursor="auto";K(x.la);z(r)}function fa(a){return[a.clientX-q.da.left,a.clientY-q.da.top]}function T(){return Math.max(1,b.speed+b.Q-(void 0!==b.d?O[b.d].size:0))}function E(a,b){return Math.round(a[0]/n)===Math.round(b[0]/n)&&Math.round(a[1]/n)===Math.round(b[1]/n)}function Ca(){var a=b.d,c=void 0!==a?O[a]:void 0;if(void 0===c){for(a=0;a<O.length;a++)if(E(b.position,O[a].position)){b.d=a;K(x.U);return}$(w.l)&&(b.G=sa,K(x.l))}else b.d=
void 0,K(x.U),$(w.ma)&&void 0!==c&&(O.splice(a,1),0>=O.length?L():K(x.ha))}function aa(){var a=b.N,c=T();b.a||(a=0);a=Math.min(c,a+c/5);b.N=a;return $(w.e)?c/3:a}function R(I){var d=T(),h=b.Ja,e=b.position[0],g=b.position[1],f=va.ga;if(q.g||q.i){if(q.i)if(f[l.r]&&!b.a)A=(A+da-1)%da,b.a=!0;else if(f[l.u]&&!b.a)A=(A+1)%da,b.a=!0;else if(f[l.q]&&!b.a)a instanceof Array?m=t=a=null:(a=[32,32],t=[a[0]+15,a[1]+23],m=t.slice()),b.a=!0;else if(f[l.T]&&!b.a){b.a=!0;try{var k=JSON.parse(prompt("Set crates",
JSON.stringify(v[r].f)));if(k instanceof Array){for(d=0;d<k.length;d++)"number"===!typeof d&&alert("Crates not valid"),k[d]=Math.max(1,Math.min(5,k[d]));v[r].f=k;la(v[r])}}catch(p){alert("Crates not valid: "+p.message)}f[l.T]=void 0}else if(f[l.Y]&&!b.a){b.a=!0;if(d=prompt("Set name",v[r].name))v[r].name=d;f[l.Y]=!1}else f[l.aa]&&!b.a?(b.a=!0,I=+prompt("Set time",v[r].n),!isNaN(I)&&0<I&&(v[r].n=I),f[l.aa]=!1):f[l.r]||(f[l.u]||f[l.q]||f[l.T]||f[l.Y]||f[l.aa])||(b.a=!1);else q.g&&(!f[l.oa]||b.B||b.o||
b.p?f[l.L]&&!b.p?(b.p=!0,0<b.G&&(b.G--,b.Q=ya,b.R=I+Da,k=Object.create(Ka),k.position=[b.position[0]+4,b.position[1]-7],ka.push(k),K(x.sa))):f[l.oa]||(f[l.L]||!b.p)||(b.p=!1):(b.p=!0,Ca()),f[l.ba]?$(w.e)?(b.position[1]=Math.min(N-n,g-h),b.a=!0):b.B||b.o||(b.h=b.Ia,b.N=d,b.B=!0,b.o=!0,K(x.pa)):!f[l.ba]&&b.B&&(b.B=!1),f[l.r]&&(b.position[0]=Math.max(n,e-aa()),b.a=!0,b.A=!0),f[l.u]&&(b.position[0]=Math.min(Q-2*n,e+aa()),b.a=!0,b.A=!1),f[l.ka]&&(($(w.e)||W(w.e))&&!W(w.M))&&(b.position[1]=Math.min(N,g+
h),b.a=!0),f[l.r]||(f[l.ba]||f[l.u]||f[l.ka])||(b.a=!1));f[l.Ca]&&(H.style.cursor="auto",q.i&&(v[r].map=Z.join("").substring(F,F*V-F),v[r].F=b.position.slice(),v[r].D=c.slice(),a instanceof Array&&(v[r].k=a.slice()),v[r].w=ua.C.slice()),z(r))}else if(f[l.r]&&!b.a)r=(r+v.length-1)%v.length,z(r),b.a=!0;else if(f[l.u]&&!b.a)r=(r+1)%v.length,z(r),b.a=!0;else if(f[l.L]&&!b.a)v[r].O||(D(),z(r)),q.i=!0;else if(f[l.Aa]&&!b.a)b.a=!0,v[r].O&&(v.splice(r,1),r--,z(r));else if(f[l.X]&&v[r].O&&!b.a){if(h=d=prompt("LEVEL JSON",
JSON.stringify(v[r])))a:{try{JSON.parse(d);h=!0;break a}catch(s){alert("Level not valid: "+s.message)}h=!1}h&&(v[r]=JSON.parse(d),z(r));f[l.X]=void 0}else f[l.$]&&!b.a?(b.a=!0,d=new XMLHttpRequest,d.onload=function(){prompt("Your level share url",this.responseText);f[l.$]=void 0},d.open("post","http://127.0.0.1:3000/addLevel",!0),d.send(JSON.stringify(v[r]))):f[l.r]||(f[l.u]||f[l.L]||f[l.X]||f[l.$])||(b.a=!1)}function W(a){return E(b.position,[b.position[0],b.position[1]+n/2])||Z[F*Math.round(b.position[1]/
n)+Math.round(b.position[0]/n-1)]!==a&&Z[F*Math.round(b.position[1]/n)+Math.round(b.position[0]/n)]!==a?!1:!0}function U(a,b){return Z[F*Math.round(a[1]/n-1)+Math.round(a[0]/n-0.5)]===b?!0:!1}function $(a){return U(b.position,a)}function ma(a,b){return Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)}function na(){return void 0!==b.d?O[b.d]:void 0}function oa(){var a=na();a&&(K(x.qa),b.d=void 0,a.position=a.C.slice(),b.f--,0>=b.f&&M())}function X(){var a=na();a&&b.h>pa-a.size&&oa()}function wa(a,b,c){var e=
null,d="#00deff";a===w.M?e=y.va:a===w.v?e=y.v:a===w.Da?d="#000":a===w.ma?d="#0f0":a===w.t?e=y.t:a===w.e?e=y.e:a===w.l&&(e=y.l);p.fillStyle=d;p.fillRect(b,c,n,n);null!==e&&C(e,b,c,n,n)}window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var H=document.getElementById("c"),p=H.getContext("2d"),ba=0,r=0,s=[0,0],ca=!1,Y=1,A=0,Q=640,N=400,n=16,F=Q/n,V=N/n,w={EMPTY:"0",M:"1",e:"2",v:"3",Da:"4",ma:"5",
t:"6",l:"7"},da=12,x={pa:0,qa:1,ia:2,za:3,U:4,ha:5,ta:6,la:7,sa:8,V:9,l:10,na:11},ja=10,S=12,xa=[1,-6],pa=12,ya=3,Da=5E3,sa=3,Ia=10,Ja="023123467".split(""),l={r:37,ba:38,u:39,ka:40,L:69,oa:32,Ca:27,Aa:68,X:74,q:71,T:67,Y:78,aa:84,$:83},y={K:0,ja:1,l:2,q:3,e:4,s:5,t:6,v:7,ra:8,va:9},J={};J[y.K]={frame:{x:30,y:0,b:30,c:14},j:{x:1,y:1,b:30,c:14},frames:[{x:1,y:1,b:15,c:13},{x:17,y:1,b:15,c:13}]};J[y.ja]={frame:{x:14,y:40,b:14,c:8},j:{x:1,y:7,b:14,c:8}};J[y.l]={frame:{x:32,y:14,b:16,c:16},j:{x:0,y:0,
b:16,c:16}};J[y.q]={frame:{x:0,y:24,b:14,c:24},j:{x:1,y:7,b:14,c:24}};J[y.e]={frame:{x:16,y:48,b:16,c:16},j:{x:0,y:0,b:16,c:16}};J[y.s]={frame:{x:0,y:0,b:30,c:24},j:{x:1,y:3,b:30,c:24},frames:[{x:0,y:0,b:15,c:24},{x:15,y:0,b:15,c:24}]};J[y.t]={frame:{x:48,y:14,b:16,c:10},j:{x:0,y:10,b:16,c:10}};J[y.v]={frame:{x:14,y:24,b:16,c:16},j:{x:0,y:0,b:16,c:16}};J[y.ra]={frame:{x:30,y:30,b:6,c:14},j:{x:4,y:1,b:6,c:14}};J[y.va]={frame:{x:0,y:48,b:16,c:16},j:{x:0,y:0,b:16,c:16}};var ga=new Image,za=document.createElement("canvas"),
Ga=0;ga.onload=function(){za.width=Ga=ga.naturalWidth;za.height=ga.naturalHeight;var a=za.getContext("2d");a.translate(ga.naturalWidth,0);a.scale(-1,1);a.drawImage(ga,0,0)};ga.src="img/imgmap.png";var b={position:null,speed:4,N:0,Q:0,R:0,Ja:2,Ia:-7,B:!1,o:!1,a:!1,p:!1,h:0,Xa:!1,d:void 0,G:0,f:ja,Sa:!0};c=null;k=3;u=!1;h=0;P=Ia;var Z=[],ua={fa:null,size:1,position:null,C:[0,0]},O=[],Ka={position:null},ka=[],La={position:null,speed:6},ha=[],q={g:!1,da:H.getBoundingClientRect(),time:0,ca:0,ea:0,m:null,
i:!1},Aa=document.createElement("canvas");m=null;a=[80,53];t=[95,78];var Ba={name:"Tutorial",F:[33,370],D:[Q-24,55],w:[300,365],k:[20,70],map:"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
f:[1],n:3E6,J:[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,["SPACE: buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[580,30,["PLAYER 2"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,["RClick: eat from nest or candy crumbs","LClick: shoot!"]],[140,60,["Don't touch roofs or the boy"]]]},
qa={name:"Level 1",F:[25,366],D:[616,24],w:[41,364],k:[513,180],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
f:[1,2],n:6E4},Ma={name:"Level 2",startingPlayerPosition:[28,143],startingCrowPosition:[600,296],crateStartingPosition:[588,365],grannyPosition:[51,50],map:"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
crates:[1,2],gameTime:12E4},Na={name:"Level 5",F:[75,370],D:[Q-24,24],w:[83,365],k:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000000000000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000000000200000000200000000000000000207000000000020000000000333330000000000011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
f:[1,2,3],n:3E5},v=window.localStorage&&window.localStorage.Ba&&JSON.parse(window.localStorage.Ba)||[Ba,qa,Ma,Na],va={ga:{},Oa:function(a){va.ga[a.keyCode]=void 0},Na:function(a){va.ga[a.keyCode]=ba}};window.addEventListener("keyup",va.Oa,!1);window.addEventListener("keydown",va.Na,!1);for(var Ba=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ha={},qa=0;qa<Ba.length;qa++)Ha[qa]=Ea.wa(["synth",0,0.4,0,0.208,0,0.12,20,Ba[qa],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var Fa=
Ja.slice(),ta={};B(x.pa,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);B(x.qa,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);B(x.ha,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);B(x.sa,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);B(x.ia,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,
0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);B(x.la,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);B(x.ta,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);B(x.U,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);B(x.za,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);B(x.V,
["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);B(x.l,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);B(x.na,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);z(r);H.addEventListener("click",function(){if(q.i)if(8===A)b.position[0]=s[0],b.position[1]=s[1];else if(9===A)c[0]=s[0],c[1]=s[1];else if(10===A&&a)a[0]=s[0],a[1]=s[1],t=[a[0]+15,a[1]+23],m=t.slice();
else{if(11===A){ua.C[0]=s[0];ua.C[1]=s[1];for(var d=0;d<O.length;d++){var n=O[d];n.position[0]=s[0]+16*d;n.position[1]=s[1]-n.size}}}else q.g?0<k&&h<ba&&(k--,K(x.ia),d=Object.create(La),d.position=c.slice(),ha.push(d)):s[0]>c[0]-16&&(s[0]<c[0]+16&&s[1]>c[1]-16&&s[1]<c[1]+16)&&(q.g=!0,q.time=ba+q.m.n,ia(),H.style.cursor="none")});H.addEventListener("mousedown",function(a){1===a.which&&(ca=!0);q.i&&(ca&&8>A)&&(a=Math.floor(s[1]/n),0<a&&a<V-1&&(Z[F*a+Math.floor(s[0]/n)]=""+A))});H.addEventListener("mouseup",
function(a){1===a.which&&(ca=!1)});H.addEventListener("mousemove",function(a){var b=fa(a);s=[b[0],b[1]];q.g?c=fa(a).slice():q.i&&ca&&8>A&&(a=Math.floor(s[1]/n),0<a&&a<V-1&&(Z[F*a+Math.floor(s[0]/n)]=""+A))});H.addEventListener("contextmenu",function(a){a.preventDefault();if(q.g&&h<ba)if(a=fa(a),Z[F*Math.round(c[1]/n-0.5)+Math.round(c[0]/n-0.5)]===w.t&&3>k)K(x.V),k++;else{var b;for(b=0;b<ka.length;b++)if(E(a,ka[b].position)){k=Math.max(k,5);K(x.V);ka.splice(b,1);break}}});(function G(l){R(l);ba=l;
if(q.g){q.da=H.getBoundingClientRect();b.h>n/2&&(b.h+b.position[1]>b.La&&b.h)&&(b.h=n/2,X());if($(w.e)||W(w.e)||W(w.M)||b.position[1]>N-n){if(W(w.e)||0<b.h)X(),b.h=0,b.N=0,b.o=!1;$(w.e)||W(w.e)||0!==b.h||(b.position[1]=b.position[1]-b.position[1]%n+1)}else X(),b.h+=1,b.o=!0;b.position[1]+=b.h;for(var e=b.position[0],g=b.position[1];g<N-n&&!U([e,g],w.M);)g+=n;g-=g%n;b.La=g;void 0!==b.d&&(O[b.d].position[0]=b.position[0]+xa[0],O[b.d].position[1]=b.position[1]+xa[1]);b.R<l&&0<b.Q&&(b.Q=0);for(e=0;e<
ha.length;e++)if(g=ha[e],g.position[1]+=g.speed,E(b.position,g.position))oa(),ha.splice(e,1),e--;else if(g.position[1]>N||U(g.position,w.v))ha.splice(e,1),e--;q.time<l&&M();u=Math.pow(7*T()+75,2)>=ma(c,b.position);if(a){var e=U(c,w.t)?t:c,g=Math.atan((e[1]-m[1])/(e[0]-m[0])),f=m[0]>e[0]?-1:1;if(3<Math.abs(e[0]-m[0])||3<Math.abs(e[1]-m[1]))m[0]+=1*Math.cos(g)*f,m[1]+=1*Math.sin(g)*f}(Math.pow(7*T()+25,2)>=ma(c,b.position)||U(c,w.v)||a&&3>Math.sqrt(ma(m,c)))&&h<l&&(h=l+5E3,K(x.na),k=0,P--,0>=P&&L())}p.fillStyle=
"black";p.fillRect(0,0,Q,N);for(e=0;e<F;e++)for(g=0;g<V;g++)wa(Z[F*g+e],e*n,g*n);for(g=0;g<O.length;g++)g!==b.d&&(e=O[g],p.drawImage(e.fa,e.position[0]-8,e.position[1]-8));for(g=0;g<ka.length;g++)e=ka[g],C(y.ja,e.position[0]-8,e.position[1]-8);for(g=0;g<ha.length;g++)e=ha[g],C(y.ra,e.position[0]-8,e.position[1]-8);a&&C(y.q,a[0],a[1]);if(q.m.J)for(e=0;e<q.m.J.length;e++){var g=p,z=q.m.J[e][2],f=q.m.J[e][0],B=q.m.J[e][1],D=g.fillColor,J=g.textAlign;g.fillStyle="black";for(z=z.slice();0<z.length;)g.fillText(z.shift(),
f,B),B+=10;g.fillStyle=D;g.textAlign=J}q.g?b.o?d(y.s,b.position[0]-8,b.position[1]-24,0,b.A):b.a?d(y.s,b.position[0]-8,b.position[1]-24,10,b.A,l):d(y.s,b.position[0]-8,b.position[1]-24,1,b.A):d(y.s,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(e=O[b.d],p.drawImage(e.fa,b.A?e.position[0]+2:e.position[0]-16-e.size,e.position[1]-10));u&&(p.beginPath(),p.arc(b.position[0],b.position[1],7*T()+25,0,360),p.lineWidth=2,p.strokeStyle="#f09",p.stroke());q.g?h>l&&0===Math.floor(l/100)%2||d(y.K,c[0]-8,c[1]-
8,2,!1,l):d(y.K,c[0]-8,c[1]-8,0);a&&(p.fillStyle="red",p.fillRect(m[0]-1,m[1]-1,2,2),p.beginPath(),p.arc(m[0],m[1],5,0,360),p.lineWidth=2,p.strokeStyle="red",p.stroke());q.g?(p.fillStyle="#00deff",p.fillText("BOY",10,396),p.fillStyle="red",p.fillText("CROW",600,12),p.fillStyle="white",p.fillText("SPEED: "+T()+"   BOOST: "+Math.max(0,Math.ceil((b.R-l)/1E3))+"   TIME: "+Math.max(0,Math.ceil((q.time-l)/1E3))+"   CANDIES: "+b.G+"   CRATES: "+b.f,50,396),p.fillText("SHOTS: "+k+"   STUN: "+Math.max(0,Math.ceil((h-
l)/1E3))+"   HEALTH: "+P,410,12)):q.i&&(p.fillStyle="white",p.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+v[r].n+")   N: NAME ("+v[r].name+")",12,12));q.g||q.i||p.drawImage(Aa,0,0);q.i&&(p.globalAlpha=0.6,8>A?(wa(""+A,s[0]-s[0]%n,s[1]-s[1]%n),p.strokeStyle="#000",p.strokeRect(s[0]-s[0]%n,s[1]-s[1]%n,n,n)):8===A?d(y.s,s[0]-8,s[1]-24,1):9===A?d(y.K,s[0]-8,s[1]-8,0):10===A?C(y.q,s[0],s[1]):11===A&&(p.fillStyle="yellow",p.fillRect(s[0]-8,s[1]-8,16,16),p.fillStyle="#000",p.fillText("C",
s[0]-4,s[1]+4)),p.globalAlpha=1);window.requestAnimationFrame(G)})()})();

var X={};
(function(a){function r(a,e){return e?m(a&255)+r(a>>8,e-1):""}var w=this.ba=a||44100,p=2*w,m=String.fromCharCode,f;this.ta=function(a){var e=Audio,m=btoa,k="",z=a.length;for(c=0;c<z;c++)var H=32767*a[c]|0,H=-32768>H?-32768:32767<H?32767:H,H=H+(0>H?65536:0),k=k+String.fromCharCode(H&255,H>>8);a=k;a=["RIFF",36+(f=a.length),"WAVEfmt ",16,1,1,w,p,2,16,"data",f,a];k="";for(c=0;c<a.length;c++)k+="s"=="s4s4224422s4s"[c]?a[c]:r(a[c],"s4s4224422s4s".charCodeAt(c)-48);return new e("data:audio/wav;base64,"+m(k))};
var k,c,K=Math.sin,e=2*Math.PI;this.filter=function(a,e,m,f,z,r,p,w,n,C){m=m?m:1;f=f?f:a.length;k=a.slice(0);for(c=m;c<f;c++)k[c]=e(a,k,m,f,c,z,r,p,w,n,C);return k};this.filters={Da:function(a,e,m,f,c,k){return e[c-1]+k*(a[c]-e[c-1])},Ea:function(a,e,m,f,c,k){return e[c-1]+k*(f-c)/(f-m)*(a[c]-e[c-1])},Ca:function(a,e,c,m,f,k){return k*(e[f-1]+a[f]-a[f-1])}};this.da=function(a,f,m,k,r,p,n,K,Q){f=f*e/w;var C=Array(a|0);for(c=0;c<a;c++)C[c]=m(c*f,k,r,p,n,K,Q);return C};var n=0;this.u={va:function(a){4>
a%e&&(n=2*Math.random()-1);return n},Fa:Math.random,za:Math.sin,Ba:function(a){return K(a)+0.5*K(a/2)+0.3*K(a/4)},ya:function(a){return 2*(a/e-(a/e+0.5|0))},ea:function(a,e){return K(a)>e?1:K(a)<e?-1:e}}}).apply(X);var ja={};
(function(){this.N=[];this.L={square:X.u.ea,saw:X.u.ya,sine:X.u.za,noise:X.u.va,synth:X.u.Ba};this.pa=function(){var a=[],r;for(r in this.L)a.push(r);return a};this.qa=function(){function a(a,f,k,c,p){void 0===p&&(p=(k-f)/1E3);a={name:a,id:a.replace(/ /g,""),min:f,max:k,step:p,oa:c,type:"range",group:w};r.push(a)}var r=[],w=0,p=this.pa();(function(a,f,k){a={name:a,id:a.replace(/ /g,""),options:f,oa:k,type:"option",group:w};r.push(a)})("Generator",p,p[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);w++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);w++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);w++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);w++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);w++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);w++;a("RepeatSpeed",
0,0.8,0);w++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);w++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return r};this.da=function(a){var r=2*Math.PI,w=Math.sin,p=Math.pow,m=Math.abs,f=X.ba,k=a.SuperSamplingQuality|0;1>k&&(k=1);for(var f=f*k,c=[{t:0,G:1,time:a.AttackTime},{t:1+a.SustainPunch,G:1,time:a.SustainTime},{t:1,G:0,time:a.DecayTime}],K=c.length,e=0;e<K;e++)c[e].C=1+(c[e].time*f|0);for(var n=
void 0,ba=0,y=-1,G=0,fa=-1,z=0,e=0;e<K;e++)z+=c[e].C;z<f/2&&(z=f/2);var H=Array(z/k|0),I=0,Y=0,Q=ja.L[a.Generator];void 0===Q&&(Q=this.L.ea);var C=0,C=a.SquareDuty,oa=a.SquareDutySweep/f,N=0,E=a.StartFrequency*r/f,R=1+64*p(a.Slide,3)/f,V=p(a.DeltaSlide,3)/(1E3*f);void 0!==k&&(V/=k);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var ka=a.MinFrequency*r/f,la=a.MaxFrequency*r/f,ca=0,ga=a.VibratoFrequency*r/f,B=
a.VibratoDepth,l=1+3*p(a.VibratoFrequencySlide,3)/f,W=a.VibratoDepthSlide/f,u=0,F=a.ChangeSpeed*f,O=p(a.ChangeAmount,2),O=0<a.ChangeAmount?1+10*O:1-0.9*O,T=Array(1024),e=0;1024>e;e++)T[e]=0;var A=0,x=1020*p(a.PhaserOffset,2),g=4E3*p(a.PhaserSweep,3)/f,P=1E-5<m(g)||1E-5<m(x),ha=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,s=0,t=0,S=p(a.LPFilterCutoff,3)/10,ia=1+a.HPFilterCutoffSweep/1E4,Z=5/(1+20*p(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<Z&&(Z=0.8);var Z=1-Z,ra=0.999>a.LPFilterCutoff,
da=0,M=p(a.HPFilterCutoff,2)/10,b=1+a.HPFilterCutoffSweep/1E4,J=0,$=z;0<a.RepeatSpeed&&($=p(1-a.RepeatSpeed,2)*f+32);for(var sa=a.MasterVolume,D=0,e=0;e<z;e++)I=Q(N,C,0),C+=oa,0>C?C=0:0.5<C&&(C=0.5),J>$&&(N=0,E=a.StartFrequency*r/f,R=1+3*p(a.Slide,3)/f,V=p(a.DeltaSlide,3)/(1E3*f),void 0!==k&&(V/=k),u=0,F=a.ChangeSpeed*f,O=1+(a.ChangeAmount|0)/12,J=0),J+=1,N+=E,R+=V,E*=R,u>F&&(E*=O,F=z),u+=1,E>la?E=la:E<ka&&(E=ka),ca+=ga,n=E*w(ca)*B,N+=n,ga*=l,W&&(B+=W,0>B?W=B=0:1<B&&(B=1,W=0)),ha&&(0.0010<m(M)&&(M*=
b,1E-5>M?M=1E-5:0.1<M&&(M=0.1)),n=s,S*=ia,0>S?S=0:0.1<S&&(S=0.1),ra?(t+=(I-s)*S,t*=Z):(s=I,t=0),s+=t,da+=s-n,I=da*=1-M),P&&(x+=g,0>x&&(x=-x,g=-g),1023<x&&(x=1023,g=0),T[A]=I,I+=T[A-(x|0)+1024&1023],A=A+1&1023),e>fa&&(y+=1,n=y<K?c[y]:{t:0,G:0,C:z},ba=n.t,G=(n.G-n.t)/(n.C+1),fa+=n.C),I*=ba,ba+=G,I*=sa,1<k?(Y+=I,0===(e+1)%k&&(H[D]=Y/k,D+=1,Y=0)):H[e]=I;a=f/100|0;r=Array(a);for(e=0;e<a;e++)r[e]=0;return r.concat(H).concat(r)};this.N=this.qa()}).apply(ja);var ta={};(function(){this.ca=function(a){a=ja.da(this.na(a));return X.ta(a)};this.na=function(a){for(var r={},w=ja.N.length,p=0;p<w;p++)r[ja.N[p].id]=a[p];return r}}).apply(ta);(function(){var a,r,w,p,m,f,k,c,K,e;function n(a,b,e){var d=new Image;d.width=b||16;d.height=e||16;d.src=a;return d}function ba(){0<ua.length&&(va[ua.shift()].play(),setTimeout(ba,200))}function y(a,b){ma[a]=ta.ca(b)}function G(a){ma[a]&&(ma[a].pause(),ma[a].currentTime=0,ma[a].play())}function fa(a,b,e,d,h){var f=a.fillColor,c=a.textAlign;a.fillStyle="black";h&&(a.textAlign=h);for(b=b.slice();0<b.length;)a.fillText(b.shift(),e,d),d+=10;a.fillStyle=f;a.textAlign=c}function z(a){a=q.l=L[a]||L[u];var c=
a.k;q.h=!1;b.position=a.q.slice();m=a.p.slice();b.s=0;b.F=0;b.c=void 0;b.d=S;b.j=!1;b.o=!1;b.a=!1;b.n=!1;f=da;k=0;q.time=0;q.g=!1;a.i?(r=a.i.slice(),w=[a.i[0]+15,a.i[1]+23],e=w.slice()):w=r=null;J="4444444444444444444444444444444444444444"+a.map+"4444444444444444444444444444444444444444";J=J.split("");for(var g,d,h,l,p=D.length=0;p<a.d.length;p++)g=a.d[p],d=Object.create(sa),d.size=g,h=document.createElement("canvas"),h.width=ia+g,h.height=ia+g,l=h.getContext("2d"),l.fillStyle="yellow",l.fillRect(0,
0,ia+g,ia+g),l.fillStyle="black",l.fillText(g,5,10),d.b=h,h=c[0]+16*p,g=c[1]-g,d.position=[h,g],d.fa=[h,g],D.push(d);ea.length=0;aa.length=0;pa.width=A;pa.height=x;c=pa.getContext("2d");c.fillStyle="rgba(0,0,0,0.7)";c.fillRect(0,0,A,x);c.fillStyle="#fff";c.font="20px courier";c.textAlign="center";c.fillText(q.l.name,A/2,x/2-50);c.fillText("Delivery Boy "+q.P+" - "+q.R+" Crow",A/2,x/2);c.font="15px courier";c.fillText("Select level with arrows",A/2,x/2+80);c.fillText("Click the crow to start!",A/2,
x/2+100);c.fillText("E to edit",A/2,x/2+120);a.B&&(c.fillText("D to delete",A/2,x/2+140),c.fillText("J to insert/copy JSON",A/2,x/2+160));c.beginPath();c.arc(m[0],m[1],16,0,360);c.lineWidth=1;c.strokeStyle="#fff";c.stroke();ua=M.slice()}function H(){q.P+=1;B.style.cursor="auto";G(t.aa);z(u)}function I(){q.R+=1;B.style.cursor="auto";G(t.V);z(u)}function Y(a){return[a.clientX-q.Q.left,a.clientY-q.Q.top]}function Q(){return Math.max(1,b.speed+b.D-(void 0!==b.c?D[b.c].size:0))}function C(a,b){return Math.round(a[0]/
g)===Math.round(b[0]/g)&&Math.round(a[1]/g)===Math.round(b[1]/g)}function oa(){var a=b.A,c=Q();b.a||(a=0);a=Math.min(c,a+c/5);b.A=a;return R(s.f)?c/3:a}function N(a){return C(b.position,[b.position[0],b.position[1]+g/2])||J[P*Math.round(b.position[1]/g)+Math.round(b.position[0]/g-1)]!==a&&J[P*Math.round(b.position[1]/g)+Math.round(b.position[0]/g)]!==a?!1:!0}function E(a,b){return J[P*Math.round(a[1]/g-1)+Math.round(a[0]/g-0.5)]===b?!0:!1}function R(a){return E(b.position,a)}function V(a,b){return Math.pow(a[0]-
b[0],2)+Math.pow(a[1]-b[1],2)}function ka(){return void 0!==b.c?D[b.c]:void 0}function la(){var a=ka();a&&(G(t.Z),b.c=void 0,a.position=a.fa.slice(),b.d--,0>=b.d&&I())}function ca(){var a=ka();a&&b.e>ra-a.size&&la()}function ga(a,b,c){var d=null,e="#00deff";a===s.w?d=$.ma.b:a===s.O?d=$.ka.b:a===s.la?e="#000":a===s.W?e="#0f0":a===s.M?d=$.ja.b:a===s.f?d=$.ia.b:a===s.r&&(d=$.ha.b);l.fillStyle=e;l.fillRect(b,c,g,g);null!==d&&l.drawImage(d,b,c,g,g)}window.requestAnimationFrame=window.requestAnimationFrame||
window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var B=document.getElementById("c"),l=B.getContext("2d"),W=0,u=0,F=[0,0],O=!1,T=0,A=640,x=400,g=16,P=A/g,ha=x/g,s={EMPTY:"0",w:"1",f:"2",O:"3",la:"4",W:"5",M:"6",r:"7"},t={Y:0,Z:1,U:2,ga:3,I:4,T:5,aa:6,V:7,$:8,J:9,r:10,X:11},S=10,ia=12,Z=[1,-6],ra=12,da=10,M="023123467".split(""),b={position:null,speed:4,A:0,D:0,F:0,sa:2,ra:-7,o:!1,n:!1,a:!1,j:!1,e:0,images:{Aa:n("img/man.png",16,32)},Ga:!1,c:void 0,
s:0,d:S};m=null;a=n("img/crow.png");c=3;K=!1;k=0;f=da;var J=[],$={ia:{b:n("img/ladder.png")},ja:{b:n("img/nest.png")},ha:{b:n("img/dispenser.png")},ka:{b:n("img/roof.png")},ma:{b:n("img/wall.png")}},sa={b:null,size:1,position:null,fa:null},D=[],ya={b:n("img/crumbs.png"),position:null},ea=[],za={b:n("img/shot.png"),position:null,speed:6},aa=[],q={h:!1,Q:B.getBoundingClientRect(),time:0,P:0,R:0,l:null,g:!1},pa=document.createElement("canvas");e=null;r=[80,53];p=n("img/granny.png");w=[95,78];var L=[{name:"Tutorial 1",
q:[33,370],p:[A-24,24],k:[53,365],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555000000000000000000000000000000000000555500000000000000000000000000000000000055551111111111111111111111111111111111111111",
d:[1],m:3E4,v:{H:["PLAYER 1","ARROWS: move/jump","SPACEBAR: grab/release crate","Leave crate into the green zone."],K:["PLAYER 2","MOUSE: move","LClick: shoot","RClick: recharge from nest","Shoot boy to make his crate fall."]}},{name:"Tutorial 2",q:[33,370],p:[A-24,24],k:[53,365],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033333300000000000000000000000000000333330000000000000000000000000000000000005555000000000000000000000000000000000000555500000000007000000000000000000000000055551111111111111111111111111111111111111111",
d:[3],m:3E4,v:{H:["SPACEBAR: buy candies when not holding a crate.","E: use candy","Candies give a speed boost."],K:["Roofs block shots.","Don't touch the roofs or the boy.","RClick: eat candy crumbs to get 5 shots."]}},{name:"Tutorial 3",q:[33,370],p:[A-24,24],k:[53,365],i:[100,227],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000333333300000000000000000000000000000000055555500000000000000000000000000000000005555550000000000000000000000000000000000555555000000000200000000000000033330000011111111111111120000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000700200033333300000000021111111100011111111120000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020001111111111111111111111111111111111111111",
d:[2,3],m:6E4,v:{H:["ARROWS: climb ladder","Crates will break if you fall from too high."],K:["Don't get shot!","Hide in the nest."]}},{name:"Level 5",q:[75,370],p:[A-24,24],k:[83,365],i:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000000000000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000000000200000000200000000000000000207000000000020000000000333330000000000011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
d:[1,2,3],m:3E5}],na={S:{},xa:function(a){na.S[a.keyCode]=void 0},wa:function(a){na.S[a.keyCode]=W}};window.addEventListener("keyup",na.xa,!1);window.addEventListener("keydown",na.wa,!1);for(var wa=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],va={},qa=0;qa<wa.length;qa++)va[qa]=ta.ca(["synth",0,0.4,0,0.208,0,0.12,20,wa[qa],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var ua=M.slice(),ma={};y(t.Y,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,
0,0,0.783,0,0,0,0]);y(t.Z,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);y(t.T,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);y(t.$,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);y(t.U,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);y(t.V,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,
3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);y(t.aa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);y(t.I,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);y(t.ga,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);y(t.J,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);y(t.r,
["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);y(t.X,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);z(u);B.addEventListener("click",function(){if(!q.h)F[0]>m[0]-16&&(F[0]<m[0]+16&&F[1]>m[1]-16&&F[1]<m[1]+16)&&(q.h=!0,q.time=W+q.l.m,ba(),B.style.cursor="none");else if(0<c&&k<W){c--;G(t.U);var a=Object.create(za);a.position=m.slice();aa.push(a)}});B.addEventListener("mousedown",function(a){1===a.which&&
(O=!0);q.g&&O&&(a=Math.floor(F[1]/g),0<a&&a<ha-1&&(J[P*a+Math.floor(F[0]/g)]=""+T))});B.addEventListener("mouseup",function(a){1===a.which&&(O=!1)});B.addEventListener("mousemove",function(a){var b=Y(a);F=[b[0],b[1]];q.h?m=Y(a).slice():q.g&&O&&(a=Math.floor(F[1]/g),0<a&&a<ha-1&&(J[P*a+Math.floor(F[0]/g)]=""+T))});B.addEventListener("contextmenu",function(a){a.preventDefault();if(q.h&&k<W)if(a=Y(a),J[P*Math.round(m[1]/g-0.5)+Math.round(m[0]/g-0.5)]===s.M&&3>c)G(t.J),c++;else{var b;for(b=0;b<ea.length;b++)if(C(a,
ea[b].position)){c=Math.max(c,5);G(t.J);ea.splice(b,1);break}}});(function xa(n){var d=Q(),h=b.sa,y=b.position[0],M=b.position[1],v=na.S;if(q.h||q.g){if(q.g)v[37]&&!b.a&&(T=(T+8-1)%8,b.a=!0),v[39]&&!b.a&&(T=(T+1)%8,b.a=!0),v[37]||v[39]||(b.a=!1);else if(q.h){if(!v[32]||b.o||b.n||b.j)v[69]&&!b.j?(b.j=!0,0<b.s&&(b.s--,b.D=3,b.F=n+5E3,U=Object.create(ya),U.position=[b.position[0]+4,b.position[1]-7],ea.push(U),G(t.$))):v[32]||(v[69]||!b.j)||(b.j=!1);else{b.j=!0;a:{var U=b.c,O=void 0!==U?D[U]:void 0;if(void 0===
O){for(U=0;U<D.length;U++)if(C(b.position,D[U].position)){b.c=U;G(t.I);break a}R(s.r)&&(b.s=3,G(t.r))}else b.c=void 0,G(t.I),R(s.W)&&void 0!==O&&(D.splice(U,1),0>=D.length?H():G(t.T))}}v[38]?R(s.f)?(b.position[1]=Math.min(x-g,M-h),b.a=!0):b.o||b.n||(b.e=b.ra,b.A=d,b.o=!0,b.n=!0,G(t.Y)):!v[38]&&b.o&&(b.o=!1);v[37]&&(b.position[0]=Math.max(g,y-oa()),b.a=!0);v[39]&&(b.position[0]=Math.min(A-2*g,y+oa()),b.a=!0);v[40]&&((R(s.f)||N(s.f))&&!N(s.w))&&(b.position[1]=Math.min(x,M+h),b.a=!0);v[37]||(v[38]||
v[39]||v[40])||(b.a=!1)}v[27]&&(B.style.cursor="auto",L[u].map=J.join("").substring(P,P*ha-P),z(u))}else if(v[37]&&!b.a)u=(u+L.length-1)%L.length,z(u),b.a=!0;else if(v[39]&&!b.a)u=(u+1)%L.length,z(u),b.a=!0;else if(v[69]&&!b.a)L[u].B||(d=L[u],d={name:"CustomLevel1",q:d.q.slice(),p:d.p.slice(),k:d.k.slice(),i:d.i&&d.i.slice(),map:d.map,d:d.d.slice(),m:d.m,B:!0},L.push(d),u=L.length-1),q.g=!0;else if(v[68]&&!b.a)b.a=!0,L[u].B&&(L.splice(u,1),u--,z(u));else if(v[74]&&L[u].B&&!b.a){b.a=!0;if(h=d=prompt("LEVEL JSON",
JSON.stringify(L[u])))a:{try{JSON.parse(d);h=!0;break a}catch(S){alert("Level not valid: "+S.message)}h=!1}h&&(L[u]=JSON.parse(d),z(u))}else v[37]||(v[39]||v[69]||v[74])||(b.a=!1);W=n;if(q.h){q.Q=B.getBoundingClientRect();b.e>g/2&&(b.e+b.position[1]>b.ua&&b.e)&&(b.e=g/2,ca());if(R(s.f)||N(s.f)||N(s.w)||b.position[1]>x-g){if(N(s.f)||0<b.e)ca(),b.e=0,b.A=0,b.n=!1;R(s.f)||N(s.f)||0!==b.e||(b.position[1]=b.position[1]-b.position[1]%g+1)}else ca(),b.e+=1,b.n=!0;b.position[1]+=b.e;d=b.position[0];for(h=
b.position[1];h<x-g&&!E([d,h],s.w);)h+=g;h-=h%g;b.ua=h;void 0!==b.c&&(D[b.c].position[0]=b.position[0]+Z[0],D[b.c].position[1]=b.position[1]+Z[1]);b.F<n&&0<b.D&&(b.D=0);for(d=0;d<aa.length;d++)if(h=aa[d],h.position[1]+=h.speed,C(b.position,h.position))la(),aa.splice(d,1),d--;else if(h.position[1]>x||E(h.position,s.O))aa.splice(d,1),d--;q.time<n&&I();K=Math.pow(7*Q()+75,2)>=V(m,b.position);r&&(d=E(m,s.M)?w:m,h=Math.atan((d[1]-e[1])/(d[0]-e[0])),y=e[0]>d[0]?-1:1,3<Math.abs(d[0]-e[0])||3<Math.abs(d[1]-
e[1]))&&(e[0]+=1*Math.cos(h)*y,e[1]+=1*Math.sin(h)*y);(Math.pow(7*Q()+25,2)>=V(m,b.position)||E(m,s.O)||r&&3>Math.sqrt(V(e,m)))&&k<n&&(k=n+5E3,G(t.X),c=0,f--,0>=f&&H())}l.fillStyle="black";l.fillRect(0,0,A,x);for(d=0;d<P;d++)for(h=0;h<ha;h++)ga(J[P*h+d],d*g,h*g);for(h=0;h<D.length;h++)h!==b.c&&(d=D[h],l.drawImage(d.b,d.position[0]-8,d.position[1]-8));for(h=0;h<ea.length;h++)d=ea[h],l.drawImage(d.b,d.position[0]-8,d.position[1]-8);for(h=0;h<aa.length;h++)d=aa[h],l.drawImage(d.b,d.position[0]-8,d.position[1]-
8);r&&l.drawImage(p,r[0],r[1]);q.l.v&&(fa(l,q.l.v.H,120,330),fa(l,q.l.v.K,620,70,"right"));l.drawImage(b.images.Aa,b.position[0]-8,b.position[1]-24);void 0!==b.c&&(d=D[b.c],l.drawImage(d.b,d.position[0]-8,d.position[1]-8));K&&(l.beginPath(),l.arc(b.position[0],b.position[1],7*Q()+25,0,360),l.lineWidth=2,l.strokeStyle="#f09",l.stroke());k>n&&0===Math.floor(n/100)%2||l.drawImage(a,m[0]-8,m[1]-8);l.fillStyle="red";r&&(l.fillStyle="red",l.fillRect(e[0]-1,e[1]-1,2,2),l.beginPath(),l.arc(e[0],e[1],5,0,
360),l.lineWidth=2,l.strokeStyle="red",l.stroke());l.fillStyle="#00deff";l.fillText("BOY",10,396);l.fillStyle="red";l.fillText("CROW",600,12);l.fillStyle="white";l.fillText("SPEED: "+Q()+"   BOOST: "+Math.max(0,Math.ceil((b.F-n)/1E3))+"   TIME: "+Math.max(0,Math.ceil((q.time-n)/1E3))+"   CANDIES: "+b.s+"   CRATES: "+b.d,50,396);l.fillText("SHOTS: "+c+"   STUN TIMEOUT: "+Math.max(0,Math.ceil((k-n)/1E3))+"   HEALTH: "+f,370,12);q.g&&l.fillText("< > CHANGE BLOCK",12,12);q.h||q.g||l.drawImage(pa,0,0);
q.g&&ga(""+T,F[0]-F[0]%g,F[1]-F[1]%g);window.requestAnimationFrame(xa)})()})();

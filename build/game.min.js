/* Mirror Delivery 1.4.1 http://github.com/4lbertoC/mirrordelivery */var ha={};
(function(a){function y(a,m){return m?d(a&255)+y(a>>8,m-1):""}var p=this.ya=a||44100,t=2*p,d=String.fromCharCode,m;this.Pa=function(a){var P=Audio,k=btoa,L="",T=a.length;for(s=0;s<T;s++)var d=32767*a[s]|0,d=-32768>d?-32768:32767<d?32767:d,d=d+(0>d?65536:0),L=L+String.fromCharCode(d&255,d>>8);a=L;a=["RIFF",36+(m=a.length),"WAVEfmt ",16,1,1,p,t,2,16,"data",m,a];L="";for(s=0;s<a.length;s++)L+="s"=="s4s4224422s4s"[s]?a[s]:y(a[s],"s4s4224422s4s".charCodeAt(s)-48);return new P("data:audio/wav;base64,"+k(L))};
var D,s,G=Math.sin,k=2*Math.PI;this.filter=function(a,m,d,p,k,y,t,q,G,S){d=d?d:1;p=p?p:a.length;D=a.slice(0);for(s=d;s<p;s++)D[s]=m(a,D,d,p,s,k,y,t,q,G,S);return D};this.filters={Wa:function(a,d,m,p,k,s){return d[k-1]+s*(a[k]-d[k-1])},Xa:function(a,d,m,p,k,s){return d[k-1]+s*(p-k)/(p-m)*(a[k]-d[k-1])},Va:function(a,d,m,p,k,s){return s*(d[k-1]+a[k]-a[k-1])}};this.Aa=function(a,d,m,y,t,q,D,G,ja){d=d*k/p;var S=Array(a|0);for(s=0;s<a;s++)S[s]=m(s*d,y,t,q,D,G,ja);return S};var q=0;this.M={Qa:function(a){4>
a%k&&(q=2*Math.random()-1);return q},Ya:Math.random,Sa:Math.sin,Ta:function(a){return G(a)+0.5*G(a/2)+0.3*G(a/4)},Ra:function(a){return 2*(a/k-(a/k+0.5|0))},Ea:function(a,d){return G(a)>d?1:G(a)<d?-1:d}}}).apply(ha);var Ia={};
(function(){this.ea=[];this.ba={square:ha.M.Ea,saw:ha.M.Ra,sine:ha.M.Sa,noise:ha.M.Qa,synth:ha.M.Ta};this.Ma=function(){var a=[],y;for(y in this.ba)a.push(y);return a};this.Na=function(){function a(a,m,t,s,G){void 0===G&&(G=(t-m)/1E3);a={name:a,id:a.replace(/ /g,""),min:m,max:t,step:G,La:s,type:"range",group:p};y.push(a)}var y=[],p=0,t=this.Ma();(function(a,m,t){a={name:a,id:a.replace(/ /g,""),options:m,La:t,type:"option",group:p};y.push(a)})("Generator",t,t[0]);a("SuperSamplingQuality",0,16,0,1);
a("MasterVolume",0,1,0.4);p++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);p++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);p++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);p++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);p++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);
p++;a("RepeatSpeed",0,0.8,0);p++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);p++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return y};this.Aa=function(a){var y=2*Math.PI,p=Math.sin,t=Math.pow,d=Math.abs,m=ha.ya,D=a.SuperSamplingQuality|0;1>D&&(D=1);for(var m=m*D,s=[{L:0,Y:1,time:a.AttackTime},{L:1+a.SustainPunch,Y:1,time:a.SustainTime},{L:1,Y:0,time:a.DecayTime}],G=s.length,k=0;k<G;k++)s[k].X=
1+(s[k].time*m|0);for(var q=void 0,K=0,P=-1,Ba=0,L=-1,T=0,k=0;k<G;k++)T+=s[k].X;T<m/2&&(T=m/2);var Ca=Array(T/D|0),I=0,ia=0,ja=Ia.ba[a.Generator];void 0===ja&&(ja=this.ba.Ea);var S=0,S=a.SquareDuty,Pa=a.SquareDutySweep/m,ca=0,U=a.StartFrequency*y/m,Z=1+64*t(a.Slide,3)/m,E=t(a.DeltaSlide,3)/(1E3*m);void 0!==D&&(E/=D);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var ta=a.MinFrequency*y/m,fa=a.MaxFrequency*y/
m,Da=0,Ja=a.VibratoFrequency*y/m,$=a.VibratoDepth,ka=1+3*t(a.VibratoFrequencySlide,3)/m,ua=a.VibratoDepthSlide/m,da=0,Ea=a.ChangeSpeed*m,la=t(a.ChangeAmount,2),la=0<a.ChangeAmount?1+10*la:1-0.9*la,Fa=Array(1024),k=0;1024>k;k++)Fa[k]=0;var ma=0,aa=1020*t(a.PhaserOffset,2),na=4E3*t(a.PhaserSweep,3)/m,Ka=1E-5<d(na)||1E-5<d(aa),M=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,H=0,v=0,Q=t(a.LPFilterCutoff,3)/10,Qa=1+a.HPFilterCutoffSweep/1E4,B=5/(1+20*t(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);
0.8<B&&(B=0.8);var B=1-B,va=0.999>a.LPFilterCutoff,wa=0,X=t(a.HPFilterCutoff,2)/10,Ra=1+a.HPFilterCutoffSweep/1E4,xa=0,z=T;0<a.RepeatSpeed&&(z=t(1-a.RepeatSpeed,2)*m+32);for(var Sa=a.MasterVolume,u=0,k=0;k<T;k++)I=ja(ca,S,0),S+=Pa,0>S?S=0:0.5<S&&(S=0.5),xa>z&&(ca=0,U=a.StartFrequency*y/m,Z=1+3*t(a.Slide,3)/m,E=t(a.DeltaSlide,3)/(1E3*m),void 0!==D&&(E/=D),da=0,Ea=a.ChangeSpeed*m,la=1+(a.ChangeAmount|0)/12,xa=0),xa+=1,ca+=U,Z+=E,U*=Z,da>Ea&&(U*=la,Ea=T),da+=1,U>fa?U=fa:U<ta&&(U=ta),Da+=Ja,q=U*p(Da)*
$,ca+=q,Ja*=ka,ua&&($+=ua,0>$?ua=$=0:1<$&&($=1,ua=0)),M&&(0.0010<d(X)&&(X*=Ra,1E-5>X?X=1E-5:0.1<X&&(X=0.1)),q=H,Q*=Qa,0>Q?Q=0:0.1<Q&&(Q=0.1),va?(v+=(I-H)*Q,v*=B):(H=I,v=0),H+=v,wa+=H-q,I=wa*=1-X),Ka&&(aa+=na,0>aa&&(aa=-aa,na=-na),1023<aa&&(aa=1023,na=0),Fa[ma]=I,I+=Fa[ma-(aa|0)+1024&1023],ma=ma+1&1023),k>L&&(P+=1,q=P<G?s[P]:{L:0,Y:0,X:T},K=q.L,Ba=(q.Y-q.L)/(q.X+1),L+=q.X),I*=K,K+=Ba,I*=Sa,1<D?(ia+=I,0===(k+1)%D&&(Ca[u]=ia/D,u+=1,ia=0)):Ca[k]=I;a=m/100|0;y=Array(a);for(k=0;k<a;k++)y[k]=0;return y.concat(Ca).concat(y)};
this.ea=this.Na()}).apply(Ia);var db={};(function(){this.za=function(a){a=Ia.Aa(this.Ka(a));return ha.Pa(a)};this.Ka=function(a){for(var y={},p=Ia.ea.length,t=0;t<p;t++)y[Ia.ea[t].id]=a[t];return y}}).apply(db);(function(){var a,y,p,t;function d(g,b,a){g.addEventListener?g.addEventListener(b,a,!1):g.attachEvent?g.attachEvent("on"+b,a):g["on"+b]=a}function m(g,b,a,f,vb,c){var e=va[g].frame,d=va[g].g;g=va[g].frames;f=c?g[Math.floor(c*f/1E3)%g.length]:g[f];vb?n.drawImage(Ta,kb-(e.x+f.x)-f.a,e.y+f.y,f.a,f.b,b+d.x,a+d.y,f.a,f.b):n.drawImage(oa,e.x+f.x,e.y+f.y,f.a,f.b,b+d.x,a+d.y,f.a,f.b)}function D(g,b,a,f,c){var e=va[g].frame;g=va[g].g;n.drawImage(oa,e.x,e.y,f||e.a,c||e.b,b+g.x,a+g.y,g.a,g.b)}function s(g){var b=
g.clientX-e.U.left;g=g.clientY-e.U.top;b=Math.max(0,Math.min(b,M-1));g=Math.max(0,Math.min(g,H-1));return[b,g]}function G(g,b,a,f,c,e,d){var m=g.fillStyle,k=g.textAlign,n=g.font;g.fillStyle=c;g.font=d;g.textAlign=e;for(b=b.slice();0<b.length;)g.fillText(b.shift(),a,f),f+=10;g.fillStyle=m;g.font=n;g.textAlign=k}function k(g){ba.style.cursor=g?"auto":"none"}function q(g,b){if(X)try{La[g]=db.za(b)}catch(a){}}function K(g){if(X)try{La[g]&&(La[g].pause(),La[g].currentTime=0,La[g].play())}catch(b){}}function P(g,
b){var a=document.getElementById(g);d(a,Ma,function(){V.O({keyCode:b})});d(a,Ua,function(){V.P({keyCode:b})})}function Ba(g,b,a){g=document.getElementById(g);d(g,Ma,b);d(g,Ua,a)}function L(g,b,a,f){var c=Object.create(wb);c.position=b;c.text=[g];c.color=a;c.time=pa+xb;c.Ba=f||!1;Na.push(c)}function T(g,b,a,f,c){var e=Object.create(yb);e.position=g;e.d=b;e.color=a;e.time=pa+zb;e.size=f;e.speed=c;ya.push(e)}function Ca(g){var b=g[r.Z],a,f,c,e;Va.R=b;for(var d=O.length=0;d<g[r.n].length;d++)a=g[r.n][d],
f=Object.create(Va),f.size=a,c=document.createElement("canvas"),c.width=Ga+a,c.height=Ga+a,e=c.getContext("2d"),e.fillStyle="#ea0",e.strokeStyle="#330",e.fillRect(0,0,Ga+a,Ga+a),e.strokeRect(0,0,Ga+a,Ga+a),e.fillStyle="#000",e.fillText(a,5,10),f.ha=c,c=b[0]+16*d,a=b[1]-a,f.position=[c,a],f.R=[c,a],O.push(f)}function I(g){g=e.l=A[g]||A[w];b.position=g[r.da].slice();b.s=0;b.t=0;b.ja=0;b.c=void 0;b.V=lb;b.u=!1;b.C=!1;b.p=!1;b.e=!1;b.j=!1;c.W=mb;c.h=0;c.D=0;c.position=g[r.S].slice();c.d=g[r.S].slice();
a=g[r.G].slice();y=[g[r.G][0]+15,g[r.G][1]+23];p=y.slice();t=1;C.position=C.d=null;C.ia=eb;e.time=0;ia(u.i);R=0;za.length=0;qa.length=0;Na.length=0;ya.length=0;ea="4444444444444444444444444444444444444444"+g[r.ca]+"4444444444444444444444444444444444444444";ea=ea.split("");Ha=null;Ca(g);Wa=Ra.slice();window.localStorage&&(window.localStorage.ta=JSON.stringify(A))}function ia(g){e.state=g;if(Y){var b=document.getElementsByClassName("edit");g="btn edit"+(g===u.f?"":" h");for(var a=0;a<b.length;a++)b[a].setAttribute("class",
g)}}function ja(b){ia(u.k);e.time=pa+e.l[r.K];X&&(Xa=b+xa);k()}function S(b){e.fa+=1;k(!0);K(z.xa);Ya=!0;I(w);Za=b+Sa}function Pa(b){e.ga+=1;k(!0);K(z.qa);Ya=!1;I(w);Za=b+Sa}function ca(b,a){return Math.round(b[0]/v)===Math.round(a[0]/v)&&Math.round(b[1]/v)===Math.round(a[1]/v)}function U(b,a){return Math.atan((a[1]-b[1])/(a[0]-b[0]))}function Z(b,a){return b&&a&&Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))}function E(b,a){return ea[Q*Math.floor(a/v)+Math.floor(b/v)]}function ta(b,a,c,f,
e){var d=a,m=E(b,d);c=b+c;topRight=E(c,d);bottomRight=E(c,a+f);bottomLeft=E(b,a);return m===e||topRight===e||bottomRight===e||bottomLeft===e}function fa(b,a,c,f,e){a+=f;f=E(b,a);bottomLeft=E(b+c,a);return f===e||bottomLeft===e}function Da(){k(!0);e.state===u.f&&(A[w][r.ca]=ea.join("").substring(Q,Q*Qa-Q),A[w][r.da]=b.position.slice(),A[w][r.S]=c.position.slice(),A[w][r.G]=a.slice(),A[w][r.Z]=Va.R.slice());I(w)}function Ja(){var a=b.t,c=$();if(b.e)a=b.t;else if(b.p)a=Math.min(c,a+c/25);else if(a*=
Math.min(0.2*c,0.8),0.2>a||ka(J.o))a=0;b.t=a;return ka(J.o)?c/2:a}function $(){return Math.max(1,b.speed+b.Q-(void 0!==b.c?O[b.c].size:0))}function ka(a){return ta(b.position[0]-8,b.position[1]-32,16,32,a)||ta(b.position[0],b.position[1]-8,0,0,a)}function ua(b){b.preventDefault();if(e.state===u.f)fb=!fb;else if(e.state===u.k&&c.D<pa){b=s(b);var a=c.h;if((fa(c.position[0]-8,c.position[1]-8,16,16,J.w)||ta(c.position[0],c.position[1],0,0,J.w))&&c.h<Ab)K(z.aa),c.h++,L("+"+(c.h-a)+"\u21a1",[c.position[0]-
4,c.position[1]-4],"#0c0");else{var d;for(d=0;d<za.length;d++)if(ca(b,za[d].position)){c.h=Math.max(c.h,Bb);L("+"+(c.h-a)+"\u21a1",[c.position[0]-4,c.position[1]-4],"#0c0");K(z.aa);za.splice(d,1);break}}}}function da(){if(e.state===u.f)if(R<Aa){var g=Q*Math.floor(x[1]/v)+Math.floor(x[0]/v);g<ea.length&&(ea[g]=""+R)}else if(R===ra.ua)b.position=x.slice();else if(R===ra.v)c.position=x.slice();else if(R===ra.F)a=x.slice(),y=[a[0]+15,a[1]+23],p=y.slice();else{if(R===ra.n)for(Va.R=x.slice(),g=0;g<O.length;g++){var d=
O[g];d.position[0]=x[0]+16*g;d.position[1]=x[1]-d.size}}else e.state!==u.i||Y?0<c.h&&c.D<pa&&(c.h--,K(z.pa),g=Object.create(Cb),g.position=c.position.slice(),qa.push(g)):x[0]>c.position[0]-16&&(x[0]<c.position[0]+16&&x[1]>c.position[1]-16&&x[1]<c.position[1]+16)&&ja(pa)}function Ea(b){if(c.D<b){for(var a=60;0<a--;)T(c.position.slice(),[c.position[0]-Math.floor(128*Math.random()-64),c.position[1]+Math.ceil(128*Math.random()-64)],"#000",Math.ceil(3*Math.random()),Math.ceil(2*Math.random()));c.D=b+Db;
K(z.oa);c.h=0;c.W--;L("-1\u2665",[c.position[0]-4,c.position[1]-4],"#c00");0>=c.W?S(b):Fa(b);gb=b+nb}}function la(b){if(!Ha){Ha=[];for(var a=0;a<ea.length;a++)ea[a]===J.A&&Ha.push(a)}a=Ha[Math.floor(Math.random()*Ha.length)]+1;a=[a%Q*v,Math.floor(a/Q)*v];C.d=[a[0]-6,a[1]-10];C.position?K(z.ma):(C.position=C.d.slice(),L("meow...",[C.position[0],C.position[1]-4],"#ccc",!0));C.Da=b+Eb;t+=0.05}function Fa(b){C.position||0<--C.ia||(C.ia=eb,K(z.la),la(b))}function ma(g,c){for(var e=60;0<e--;)T(b.position.slice(),
[b.position[0]-Math.floor(128*Math.random()-64),b.position[1]-16-Math.ceil(128*Math.random()-64)],"#ea0",Math.ceil(3*Math.random()),Math.ceil(4*Math.random()));L(0.5<Math.random()?"My mirrors!":"Be careful!",[a[0]+4,a[1]],"#ccc",!0);K(z.va);b.c=void 0;g.position=g.R.slice();b.V--;L("-1\u25fc",[b.position[0]-4,b.position[1]-32],"#c00");gb=c+nb;0>=b.V?Pa(c):Fa(c)}function aa(b){var a=b||A[w];b=[b?a[r.I]:"CustomLevel"+Fb++,a[r.da].slice(),a[r.S].slice(),a[r.Z].slice(),a[r.G].slice(),a[r.K],a[r.ca],a[r.n].slice(),
null,!0];A.push(b);e.state===u.i&&(w=A.length-1,I(w))}function na(a,b,c){var f=null,e=C.position?"rgb("+Math.pow(c,2)+","+Math.floor(c/3)+","+Math.floor(c)+")":"rgb("+Math.floor(c/3)+","+Math.floor(c)+","+Math.pow(c,2)+")";a===J.A?f=B.A:a===J.J?f=B.J:a===J.Ja?e="#000":a===J.ra?e="#0f0":a===J.w?f=B.w:a===J.o?f=B.o:a===J.q&&(f=B.q);n.fillStyle=e;n.fillRect(b,c,v,v);null!==f&&D(f,b,c,v,v)}function Ka(a,b){if(a.position&&a.d){var c=U(a.position,a.d),f=a.position[0]>a.d[0]?-1:1,e=Math.abs(a.position[0]-
a.d[0]),d=Math.abs(a.position[1]-a.d[1]);if(3<e||3<d){var m=Math.cos(c)*f*b,c=Math.sin(c)*f*b;Math.abs(m)>e&&(m=e*m/Math.abs(m));Math.abs(c)>d&&(c=d*c/Math.abs(c));a.position[0]+=m;a.position[1]+=c;return!0}return!1}}var M=640,H=400,v=16,Q=M/v,Qa=H/v,B={v:0,Ha:1,q:2,F:3,o:4,r:5,w:6,J:7,Ia:8,A:9,Fa:10,Ga:11},va=[{frame:{x:30,y:0,a:30,b:14},g:{x:1,y:1,a:30,b:14},frames:[{x:1,y:1,a:15,b:11},{x:17,y:1,a:15,b:13}]},{frame:{x:14,y:40,a:14,b:8},g:{x:1,y:7,a:14,b:8}},{frame:{x:32,y:14,a:16,b:16},g:{x:0,y:0,
a:16,b:16}},{frame:{x:0,y:24,a:14,b:24},g:{x:1,y:7,a:14,b:24}},{frame:{x:16,y:48,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:0,a:30,b:24},g:{x:1,y:3,a:30,b:24},frames:[{x:0,y:0,a:15,b:24},{x:16,y:0,a:13,b:24}]},{frame:{x:48,y:14,a:16,b:10},g:{x:0,y:10,a:16,b:10}},{frame:{x:14,y:24,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:31,y:32,a:6,b:14},g:{x:4,y:1,a:6,b:14}},{frame:{x:0,y:48,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:36,y:32,a:11,b:13},g:{x:0,y:0,a:12,b:13}},{frame:{x:49,y:30,a:15,b:16},
g:{x:0,y:0,a:15,b:16}}],wa=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],X=!(!window.btoa||!window.atob),Ra="023123467".split(""),xa=200,z={sa:0,va:1,pa:2,oa:3,$:4,na:5,xa:6,qa:7,ka:8,aa:9,q:10,la:11,ma:12,wa:13},Sa=2E3,u={i:0,k:1,f:2},nb=500,xb=1500,zb=1500,J={EMPTY:"0",A:"1",o:"2",J:"3",Ja:"4",ra:"5",w:"6",q:"7"},Aa=8,ra={ua:Aa+0,v:Aa+1,F:Aa+2,n:Aa+3},hb=Aa+4,Ab=3,Bb=5,Db=5E3,mb=10,eb=3,Eb=2E3,lb=10,Ga=12,ob=[1,-6],r={I:0,da:1,S:2,Z:3,G:4,K:5,ca:6,n:7,H:8,T:9},ba=document.getElementById("C"),
n=ba.getContext("2d"),oa=new Image,Ta=document.createElement("canvas"),kb=0,$a=document.createElement("canvas"),N=$a.getContext("2d"),La=[],pb={},Wa=null,Xa=0,x=[0,0],ab=!1,W=!1,V={N:{},P:function(a){V.N[a.keyCode]=void 0},O:function(a){V.N[a.keyCode]=pa}},Y=!1,Oa=document.getElementById("o"),ga=Oa.getBoundingClientRect(),qb=[100,100],ib=!1,sa=null,Ma=null,Ua=null,rb=null,pa=0,e={state:u.i,U:ba.getBoundingClientRect(),time:0,fa:0,ga:0,l:null},gb=0,Za=0,Ya=void 0,wb={position:null,text:void 0,color:"#0f0",
time:0,Ba:!1},Na=[],ea=[],Ha=null,fb=!1,R=0,b={position:null,speed:4,t:0,Q:0,ja:0,Ca:2,Oa:-6.8,B:!1,C:!1,e:!1,p:!1,u:!1,m:0,c:void 0,s:0,V:lb,Ua:!1},c={position:null,d:null,h:0,D:0,W:mb};p=y=a=null;t=1;var C={position:null,d:null,Da:0,ia:eb},Va={ha:null,size:1,position:null,R:null},O=[],Gb={position:null},za=[],Cb={position:null,speed:6},qa=[],yb={position:null,d:null,color:"#000",size:2,time:0,speed:2},ya=[],sb=[["Tutorial",[33,370],[M-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000550000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,[(Y?"I":"SPACEBAR")+": grab/release crate"]],[500,340,["UP/DOWN: Climb"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(Y?"I":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(Y?"analogPad":"Mouse")+": move"]],[390,80,["Hide from granny in nest"]],[390,130,[(Y?"A":"RClick")+": eat from nest or crumbs",(Y?"S":"LClick")+": shoot!"]],
[150,70,["Don't touch roofs or Luke"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000111000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300033000000000000000000000000000000000000000000000000000000000000000000000000550000020000000000000200000000000000000055020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000700001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000000000000000000033000000000330000000000000055000000000000000000000000000000000000005500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000600000000000000112110000002020000060000111000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[88,317],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2,3]],["Level 4",[75,370],[M-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000600000000000000000000000000000000000000011055000000000000000000000003333000000000005500000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000000000000000100000000000000000000000000700000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330112100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010101010111000020200000000211111111111111000000033311001111011100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000000000000303030200000000000000000000000000007000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[2,3,4]]],A=window.localStorage&&window.localStorage.ta&&JSON.parse(window.localStorage.ta)||sb,Fb=A.length-sb.length+1,w=0;(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),e=Math.max(0,16-(c-a)),d=window.setTimeout(function(){b(c+e)},e);a=c+e;return d})})();if("ontouchstart"in document.documentElement||
window.navigator.msMaxTouchPoints)for(var Y=!0,Ma=window.navigator.msMaxTouchPoints?"MSPointerDown":"touchstart",Ua=window.navigator.msMaxTouchPoints?"MSPointerUp":"touchend",rb=window.navigator.msMaxTouchPoints?"MSPointerMove":"touchmove",jb=document.getElementsByClassName("btn"),bb=0;bb<jb.length;bb++)-1===jb[bb].getAttribute("class").indexOf("edit")&&jb[bb].setAttribute("class","btn");oa.onload=function(){Ta.width=kb=oa.naturalWidth;Ta.height=oa.naturalHeight;var a=Ta.getContext("2d");a.translate(oa.naturalWidth,
0);a.scale(-1,1);a.drawImage(oa,0,0)};oa.src="imgmap.png";$a.width=M;$a.height=H;for(var cb=0;cb<wa.length;cb++)pb[cb]=db.za(["synth",0,0.1,0,0.208,0,0.12,20,wa[cb],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);Wa=Ra.slice();q(z.sa,["square",0,0.3,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);q(z.va,["noise",0,0.3,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);q(z.na,["square",0,0.3,0,0.098,0.504,0.282,20,1582,2400,
0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);q(z.ka,["saw",0,0.3,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);q(z.pa,["saw",0,0.3,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);q(z.qa,["synth",0,0.3,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);q(z.xa,["synth",0,0.3,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);q(z.$,["noise",0,0.3,
0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);q(z.oa,["noise",0,0.3,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);q(z.aa,["square",0,0.3,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);q(z.q,["square",0,0.3,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);q(z.la,["synth",0,0.3,0,0.44,0.579,1.004,20,1793,2400,-0.202,0,0,8.6962,0.5346,
0.666,-0.298,0.671,0,0,0,0,0,1,0,0,0,0]);q(z.ma,["noise",0,0.127,0.043,0.124,0,0.282,20,2400,20,1,-1,0,0.01,-0.3,-1,0.956,0.272,0,0.68,0,-0.998,-1,1,1,0,0,-0.998]);q(z.wa,["noise",0,0.126,0,0.07,0,0.232,2400,2400,2400,-1,-1,0,0.01,-0.3,-1,-1,0,0,-1,0,0.0040,0,1,1,0,0,-1]);window.addEventListener("keyup",V.P,!1);window.addEventListener("keydown",V.O,!1);if(Y){d(ba,Ma,function(){e.state===u.i&&ja()});Ba("s",function(){e.state===u.i?V.O({keyCode:68}):da()},function(){V.P({keyCode:68})});Ba("a",function(a){e.state===
u.i?V.O({keyCode:74}):ua(a)},function(){V.P({keyCode:74})});Ba("i",function(){V.O({keyCode:e.state===u.i?73:32})},function(){V.P({keyCode:e.state===u.i?73:32})});P("x",27);P("e",69);P("l",37);P("u",38);P("r",39);P("d",40);P("c",67);P("t",84);P("n",78);var tb=function(a){a.preventDefault();sa=a.changedTouches||a;ga=Oa.getBoundingClientRect();ib=!0};d(Oa,Ma,tb);d(Oa,rb,tb);d(Oa,Ua,function(a){a.preventDefault();ib=!1});d(document.body,"contextmenu",function(a){a.preventDefault()})}else d(ba,"click",
da),d(ba,"contextmenu",ua),d(ba,"mousedown",function(a){1===a.which&&(ab=!0);e.state===u.f&&ab&&da()}),d(ba,"mouseup",function(a){1===a.which&&(ab=!1)}),d(ba,"mousemove",function(a){var b=s(a);x=[b[0],b[1]];e.state===u.k?(a=s(a),c.d=a.slice()):e.state===u.f&&ab&&da()});I(w);(function ub(d){if(!(Za>d)){var f=V.N;if(e.state===u.i)if(f[37]&&!W)w=(w+A.length-1)%A.length,I(w);else if(f[39]&&!W)w=(w+1)%A.length,I(w);else if(f[69]&&!W)A[w][r.T]||aa(),ia(u.f),f[69]=void 0;else if(f[68]&&!W)A[w][r.T]&&(A.splice(w,
1),w--,I(w)),f[68]=void 0;else if(f[74]&&A[w][r.T]&&!W){var k=prompt("JSON",JSON.stringify(A[w]));f[74]=void 0}else{if(f[73]){if(k=prompt("JSON"))try{aa(JSON.parse(k))}catch(s){alert("Error")}f[73]=void 0}}else{if(e.state===u.f){var q=d;if(f[37]&&!W)R=(R+hb-1)%hb;else if(f[39]&&!W)R=(R+1)%hb;else if(f[67]&&!W){try{if(k=JSON.parse(prompt("Crates",JSON.stringify(A[w][r.n]))),k instanceof Array){for(q=0;q<k.length;q++)"number"===!typeof q&&alert("Error"),k[q]=Math.max(1,Math.min(5,k[q]));A[w][r.n]=k;
Ca(A[w])}}catch(P){alert("Error")}f[67]=void 0}else f[78]&&!W?((k=prompt("Name",A[w][r.I]))&&(A[w][r.I]=k),f[78]=!1):f[84]&&!W?(q=+prompt("Time",A[w][r.K]),!isNaN(q)&&0<q&&(A[w][r.K]=q),f[84]=!1):f[69]&&!W&&(Da(),f[69]=void 0)}else if(e.state===u.k){f[38]?ka(J.o)?(b.position[1]=Math.min(H-v,b.position[1]-b.Ca),b.B=!0):b.C||b.e||(b.m=b.Oa,b.C=!0,b.e=!0,b.B=!1,K(z.sa)):!f[38]&&b.C?(b.C=!1,b.B=!1):f[40]&&ka(J.o)?(b.position[1]=Math.min(H,b.position[1]+b.Ca),b.B=!0):b.B=!1;f[37]&&!b.e?(b.p=!0,b.j=!0):
f[39]&&!b.e?(b.p=!0,b.j=!1):b.p=!1;if(b.p||0<b.t)b.position[0]=Math.min(M-v,Math.max(v,b.position[0]+(b.j?-1:1)*Ja()));if(!f[32]||b.C||b.e||b.u)f[69]&&!b.u?(b.u=!0,0<b.s&&(b.s--,b.Q=3,b.ja=d+5E3,k=Object.create(Gb),k.position=[b.position[0]+4,b.position[1]-7],za.push(k),K(z.ka))):f[32]||(f[69]||!b.u)||(b.u=!1);else a:if(b.u=!0,k=b.c,q=void 0!==k?O[k]:void 0,void 0===q){for(k=0;k<O.length;k++)if(ca(b.position,O[k].position)){b.c=k;K(z.$);break a}ka(J.q)&&3>b.s&&(L("+"+(3-b.s)+"\u00a7",[b.position[0]-
4,b.position[1]-32],"#0c0"),b.s=3,K(z.q))}else b.c=void 0,K(z.$),ka(J.ra)&&void 0!==q&&(O.splice(k,1),L(0.5<Math.random()?"Thank you!":"Good boy!",[a[0]+4,a[1]],"#ccc",!0),0>=O.length?S(d):K(z.na))}f[27]&&Da()}W=!1;for(var E in V.N)W=W||!!V.N[E];if(ib&&sa){var F;if(sa.clientX)F=sa;else if(sa instanceof TouchList)for(E=0;E<sa.length;E++)if(f=sa[E],f.clientX>=ga.left&&f.clientX<ga.left+ga.width&&f.clientY>=ga.top&&f.clientY<ga.top+ga.height){F=sa[E];break}if(F){F=[F.clientX-ga.left,F.clientY-ga.top];
f=U(qb,F);E=Z(qb,F)/12.5;var l;e.state===u.k?l=c.d:e.state===u.f&&(l=x);l&&(l[0]+=(e.state===u.f?Math.round(Math.cos(f)):Math.cos(f))*(100>F[0]?-E:E),l[1]+=(e.state===u.f?Math.round(Math.sin(f)):Math.sin(f))*(100>F[0]?-E:E),l[0]=Math.max(0,Math.min(l[0],M-1)),l[1]=Math.max(0,Math.min(l[1],H-1)));fb&&da()}}}pa=d;e.U=ba.getBoundingClientRect();try{Xa<d&&e.state===u.k&&0<Wa.length&&(pb[Wa.shift()].play(),Xa+=xa)}catch(X){}if(e.state===u.k){F=2;var h;l=0;if(!b.e&&fa(b.position[0]-4,b.position[1],8,0,
J.A))h=b.position[1]-b.position[1]%v;else for(;F<=b.m;){if(fa(b.position[0]-4,b.position[1]+F,8,0,J.A)){h=b.position[1]+F-(b.position[1]+F)%v;break}F+=v}h?(b.position[1]=h,b.e&&(b.t/=2,h=void 0!==b.c&&O[b.c])&&(F=13-h.size,l=h.size,b.m>F&&ma(h,d)),b.e=!1,b.m>10-2*l&&K(z.wa),b.m=0):fa(b.position[0]-4,b.position[1]-32,8,16,J.o)?(b.e=!1,b.m=0):(b.m+=0.6,b.e=!0,b.position[1]+=b.m);b.ja<d&&0<b.Q&&(b.Q=0);void 0!==b.c&&(O[b.c].position[0]=b.position[0]+ob[0],O[b.c].position[1]=b.position[1]+ob[1]);h=fa(c.position[0],
c.position[1],0,0,J.w)?y:c.position;l=U(p,h);F=p[0]>h[0]?-1:1;if(3<Math.abs(h[0]-p[0])||3<Math.abs(h[1]-p[1]))p[0]+=Math.cos(l)*F*t,p[1]+=Math.sin(l)*F*t;if(Ka(c,16))for(h=3;0<h--;)T(c.position.slice(),[c.d[0],c.d[1]],"#000",Math.ceil(2*Math.random()),Math.ceil(3*Math.random()));for(h=0;h<qa.length;h++)if(l=qa[h],l.position[1]+=l.speed,ca(b.position,l.position)&&void 0!==b.c)ma(O[b.c],d),qa.splice(h,1),h--;else if(l.position[1]>H||fa(l.position[0],l.position[1],0,0,J.J))qa.splice(h,1),h--;(7*$()+
25>=Z(c.position,b.position)||ta(c.position[0],c.position[1],0,0,J.J)||3>Z(p,c.position))&&Ea(d);C.position&&(void 0!==b.c&&15>Z(b.position,C.position)?(ma(O[b.c],d),C.position=null):15>Z(c.position,C.position)?(Ea(d),C.position=null):(Ka(C,16),C.Da<d&&la(d)));for(l=0;l<ya.length;l++)if(h=ya[l],!Ka(h,h.speed)||h.time<d)ya.splice(l,1),l--;e.time<d&&Pa(d)}e.U=ba.getBoundingClientRect();n.fillStyle="#000";n.fillRect(0,0,M,H);f=F=0;gb>d&&(F=Math.floor(8*Math.random()-4),f=Math.floor(8*Math.random()-4));
for(h=0;h<Q;h++)for(l=0;l<Qa;l++)na(ea[Q*l+h],h*v+F,l*v+f);for(l=0;l<O.length;l++)l!==b.c&&(h=O[l],n.drawImage(h.ha,h.position[0]-8,h.position[1]-8));for(l=0;l<za.length;l++)h=za[l],D(B.Ha,h.position[0]-8,h.position[1]-8);for(l=0;l<qa.length;l++)h=qa[l],D(B.Ia,h.position[0]-8,h.position[1]-8);D(B.F,a[0],a[1]);if(e.l[r.H])for(h=0;h<e.l[r.H].length;h++)G(n,e.l[r.H][h][2],e.l[r.H][h][0],e.l[r.H][h][1],"#000");C.position&&D(5<Z(C.position,C.d)?B.Ga:B.Fa,C.position[0]-8,C.position[1]);e.state===u.k?(b.e?
m(B.r,b.position[0]-8,b.position[1]-24,0,b.j):b.p||b.B?m(B.r,b.position[0]-8,b.position[1]-24,10,b.j,d):m(B.r,b.position[0]-8,b.position[1]-24,1,b.j),b.Q&&(b.e||b.p)&&(n.globalAlpha=0.6,m(B.r,b.position[0]+(b.j?-4:-12),b.position[1]-24,10,b.j,d),n.globalAlpha=0.3,m(B.r,b.position[0]+(b.j?2:-18),b.position[1]-24,10,b.j,d),n.globalAlpha=1)):m(B.r,b.position[0]-8,b.position[1]-24,1);void 0!==b.c&&(h=O[b.c],n.drawImage(h.ha,b.j?h.position[0]+2:h.position[0]-15-h.size,h.position[1]-10));7*$()+75>=Z(c.position,
b.position)&&(n.beginPath(),n.arc(b.position[0],b.position[1],7*$()+25,0,360),n.lineWidth=2,n.strokeStyle="#f00",n.stroke());e.state===u.k?c.D>d&&0===Math.floor(d/100)%2||m(B.v,c.position[0]-8,c.position[1]-8,2,!1,d):m(B.v,c.position[0]-8,c.position[1]-8,0);n.fillStyle="#f00";n.fillRect(p[0]-1,p[1]-1,2,2);n.beginPath();n.arc(p[0],p[1],5,0,360);n.lineWidth=2;n.strokeStyle="#f00";n.stroke();n.fillStyle="#fff";e.state===u.k?(l=Math.max(0,Math.ceil((e.time-d)/1E3)),h=l%60,l=Math.floor(l/60),10>h&&(h=
"0"+h),n.fillText("\u00a7 "+b.s+"   \u25fc "+b.V+"   \u2699 "+l+":"+h,50,396),n.fillText("\u21a1 "+c.h+"   \u2665 "+c.W,540,12),n.fillStyle="#00deff",n.fillText("LUKE",10,396),n.fillStyle="#f00",n.fillText("CROW",600,12)):e.state===u.f&&n.fillText("< > CHANGE BLOCK   C: CRATES   T: TIME ("+A[w][r.K]+")   N: NAME ("+A[w][r.I]+")"+(Y?"   S: PAINT   A: TOGGLE PAINT   analogPad: MOVE":""),12,12);for(l=0;l<ya.length;l++)h=ya[l],n.fillStyle=h.color,n.fillRect(h.position[0],h.position[1],h.size,h.size);
for(l=0;l<Na.length;l++)h=Na[l],h.time<d?(Na.splice(l,1),l--):(G(n,h.text,h.position[0]+1,h.position[1]+1,"#000","center","14px sans-serif"),G(n,h.text,h.position[0],h.position[1],h.color,"center","14px sans-serif"),h.Ba||(h.position[1]-=0.5));e.state===u.i&&(h=e.l,N.fillStyle="rgba(0,0,0,0.7)",N.clearRect(0,0,M,H),N.fillRect(0,0,M,H),N.fillStyle="#fff",N.textAlign="center",N.font="20px courier",N.fillText(e.l[r.I],M/2,H/2-50),G(N,["Luke "+e.fa],M/2-50,H/2,!0===Ya?"#0f0":"#fff","right"),G(N,[e.ga+
" Crow"],M/2+50,H/2,!1===Ya?"#0f0":"#fff","left"),N.font="15px courier",N.fillText("A 13kB game by Alberto Congiu",M/2,12),Za<d&&(N.fillText("Click the "+(Y?"screen":"crow")+" to start",M/2,H/2+60),N.fillText("< >: Select level",M/2,H/2+100),N.fillText(h[r.T]?"E: EDIT   "+(Y?"S":"D")+": DELETE   "+(Y?"A":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",M/2,H/2+120)),N.beginPath(),N.arc(c.position[0],c.position[1],16,0,360),N.lineWidth=2,N.strokeStyle="#fff",N.stroke(),n.drawImage($a,0,0));e.state===
u.f&&(n.globalAlpha=0.6,R<Aa?(na(""+R,x[0]-x[0]%v,x[1]-x[1]%v),n.strokeStyle="#000",n.strokeRect(x[0]-x[0]%v,x[1]-x[1]%v,v,v)):R===ra.ua?m(B.r,x[0]-8,x[1]-24,1):R===ra.v?m(B.v,x[0]-8,x[1]-8,0):R===ra.F?D(B.F,x[0],x[1]):R===ra.n&&(n.fillStyle="#ea0",n.strokeStyle="#330",n.fillRect(x[0]-8,x[1]-8,16,16),n.strokeRect(x[0]-8,x[1]-8,16,16),n.fillStyle="#000",n.fillText("C",x[0]-4,x[1]+4)),n.globalAlpha=1);window.requestAnimationFrame(ub)})()})();

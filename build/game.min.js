var ia={};
(function(a){function c(a,f){return f?M(a&255)+c(a>>8,f-1):""}var y=this.pa=a||44100,n=2*y,M=String.fromCharCode,e;this.Ca=function(a){var d=Audio,z=btoa,B="",V=a.length;for(f=0;f<V;f++)var w=32767*a[f]|0,w=-32768>w?-32768:32767<w?32767:w,w=w+(0>w?65536:0),B=B+String.fromCharCode(w&255,w>>8);a=B;a=["RIFF",36+(e=a.length),"WAVEfmt ",16,1,1,y,n,2,16,"data",e,a];B="";for(f=0;f<a.length;f++)B+="s"=="s4s4224422s4s"[f]?a[f]:c(a[f],"s4s4224422s4s".charCodeAt(f)-48);return new d("data:audio/wav;base64,"+z(B))};
var E,f,v=Math.sin,d=2*Math.PI;this.filter=function(a,c,d,e,n,w,M,y,v,J){d=d?d:1;e=e?e:a.length;E=a.slice(0);for(f=d;f<e;f++)E[f]=c(a,E,d,e,f,n,w,M,y,v,J);return E};this.filters={Ja:function(a,c,f,d,e,n){return c[e-1]+n*(a[e]-c[e-1])},Ka:function(a,c,f,d,e,n){return c[e-1]+n*(d-e)/(d-f)*(a[e]-c[e-1])},Ia:function(a,c,d,f,e,n){return n*(c[e-1]+a[e]-a[e-1])}};this.sa=function(a,c,e,n,M,w,v,E,H){c=c*d/y;var J=Array(a|0);for(f=0;f<a;f++)J[f]=e(f*c,n,M,w,v,E,H);return J};var H=0;this.I={Da:function(a){4>
a%d&&(H=2*Math.random()-1);return H},La:Math.random,Fa:Math.sin,Ga:function(a){return v(a)+0.5*v(a/2)+0.3*v(a/4)},Ea:function(a){return 2*(a/d-(a/d+0.5|0))},ta:function(a,c){return v(a)>c?1:v(a)<c?-1:c}}}).apply(ia);var Ca={};
(function(){this.W=[];this.V={square:ia.I.ta,saw:ia.I.Ea,sine:ia.I.Fa,noise:ia.I.Da,synth:ia.I.Ga};this.ya=function(){var a=[],c;for(c in this.V)a.push(c);return a};this.za=function(){function a(a,e,n,f,v){void 0===v&&(v=(n-e)/1E3);a={name:a,id:a.replace(/ /g,""),min:e,max:n,step:v,xa:f,type:"range",group:y};c.push(a)}var c=[],y=0,n=this.ya();(function(a,e,n){a={name:a,id:a.replace(/ /g,""),options:e,xa:n,type:"option",group:y};c.push(a)})("Generator",n,n[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);y++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);y++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);y++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);y++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);y++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);y++;a("RepeatSpeed",
0,0.8,0);y++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);y++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return c};this.sa=function(a){var c=2*Math.PI,y=Math.sin,n=Math.pow,M=Math.abs,e=ia.pa,E=a.SuperSamplingQuality|0;1>E&&(E=1);for(var e=e*E,f=[{H:0,S:1,time:a.AttackTime},{H:1+a.SustainPunch,S:1,time:a.SustainTime},{H:1,S:0,time:a.DecayTime}],v=f.length,d=0;d<v;d++)f[d].P=1+(f[d].time*e|0);
for(var H=void 0,W=0,pa=-1,z=0,B=-1,V=0,d=0;d<v;d++)V+=f[d].P;V<e/2&&(V=e/2);var w=Array(V/E|0),S=0,qa=0,ra=Ca.V[a.Generator];void 0===ra&&(ra=this.V.ta);var J=0,J=a.SquareDuty,A=a.SquareDutySweep/e,ca=0,N=a.StartFrequency*c/e,O=1+64*n(a.Slide,3)/e,Z=n(a.DeltaSlide,3)/(1E3*e);void 0!==E&&(Z/=E);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var Da=a.MinFrequency*c/e,sa=a.MaxFrequency*c/e,ta=0,ya=a.VibratoFrequency*
c/e,da=a.VibratoDepth,za=1+3*n(a.VibratoFrequencySlide,3)/e,ea=a.VibratoDepthSlide/e,fa=0,ja=a.ChangeSpeed*e,ka=n(a.ChangeAmount,2),ka=0<a.ChangeAmount?1+10*ka:1-0.9*ka,ua=Array(1024),d=0;1024>d;d++)ua[d]=0;var va=0,$=1020*n(a.PhaserOffset,2),P=4E3*n(a.PhaserSweep,3)/e,Ea=1E-5<M(P)||1E-5<M($),Aa=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,I=0,p=0,X=n(a.LPFilterCutoff,3)/10,s=1+a.HPFilterCutoffSweep/1E4,q=5/(1+20*n(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<q&&(q=0.8);var q=1-q,Ba=0.999>
a.LPFilterCutoff,la=0,ga=n(a.HPFilterCutoff,2)/10,Na=1+a.HPFilterCutoffSweep/1E4,F=0,Q=V;0<a.RepeatSpeed&&(Q=n(1-a.RepeatSpeed,2)*e+32);for(var T=a.MasterVolume,r=0,d=0;d<V;d++)S=ra(ca,J,0),J+=A,0>J?J=0:0.5<J&&(J=0.5),F>Q&&(ca=0,N=a.StartFrequency*c/e,O=1+3*n(a.Slide,3)/e,Z=n(a.DeltaSlide,3)/(1E3*e),void 0!==E&&(Z/=E),fa=0,ja=a.ChangeSpeed*e,ka=1+(a.ChangeAmount|0)/12,F=0),F+=1,ca+=N,O+=Z,N*=O,fa>ja&&(N*=ka,ja=V),fa+=1,N>sa?N=sa:N<Da&&(N=Da),ta+=ya,H=N*y(ta)*da,ca+=H,ya*=za,ea&&(da+=ea,0>da?ea=da=
0:1<da&&(da=1,ea=0)),Aa&&(0.0010<M(ga)&&(ga*=Na,1E-5>ga?ga=1E-5:0.1<ga&&(ga=0.1)),H=I,X*=s,0>X?X=0:0.1<X&&(X=0.1),Ba?(p+=(S-I)*X,p*=q):(I=S,p=0),I+=p,la+=I-H,S=la*=1-ga),Ea&&($+=P,0>$&&($=-$,P=-P),1023<$&&($=1023,P=0),ua[va]=S,S+=ua[va-($|0)+1024&1023],va=va+1&1023),d>B&&(pa+=1,H=pa<v?f[pa]:{H:0,S:0,P:V},W=H.H,z=(H.S-H.H)/(H.P+1),B+=H.P),S*=W,W+=z,S*=T,1<E?(qa+=S,0===(d+1)%E&&(w[r]=qa/E,r+=1,qa=0)):w[d]=S;a=e/100|0;c=Array(a);for(d=0;d<a;d++)c[d]=0;return c.concat(w).concat(c)};this.W=this.za()}).apply(Ca);var Oa={};(function(){this.ra=function(a){a=Ca.sa(this.wa(a));return ia.Ca(a)};this.wa=function(a){for(var c={},y=Ca.W.length,n=0;n<y;n++)c[Ca.W[n].id]=a[n];return c}}).apply(Oa);(function(){function a(b){b.preventDefault();Fa=b.changedTouches;ha=Ga.getBoundingClientRect();Pa=!0}var c,y,n,M,e,E,f,v,d;function H(b,a,c,e,l){var d=D[b].frame;b=D[b].i;p.drawImage(ma,d.x,d.y,e||d.b,l||d.c,a+b.x,c+b.y,b.b,b.c)}function W(b,a,c,d,l,e){var f=D[b].frame,h=D[b].i;b=D[b].frames;d=e?b[Math.floor(e*d/1E3)%b.length]:b[d];l?p.drawImage(Ja,Ua-(f.x+d.x)-d.b,f.y+d.y,d.b,d.c,a+h.x,c+h.y,d.b,d.c):p.drawImage(ma,f.x+d.x,f.y+d.y,d.b,d.c,a+h.x,c+h.y,d.b,d.c)}function pa(){if(Qa)try{h.state===t.j&&
0<Ra.length&&(Va[Ra.shift()].play(),setTimeout(pa,200))}catch(b){}}function z(b,a){if(Qa)try{Ha[b]=Oa.ra(a)}catch(c){}}function B(b){if(Qa)try{Ha[b]&&(Ha[b].pause(),Ha[b].currentTime=0,Ha[b].play())}catch(a){}}function V(b){var a=b.r,c,d,l,e;Ia.F=a;for(var f=U.length=0;f<b.e.length;f++)c=b.e[f],d=Object.create(Ia),d.size=c,l=document.createElement("canvas"),l.width=Ka+c,l.height=Ka+c,e=l.getContext("2d"),e.fillStyle="yellow",e.fillRect(0,0,Ka+c,Ka+c),e.fillStyle="black",e.fillText(c,5,10),d.Z=l,l=
a[0]+16*f,c=a[1]-c,d.position=[l,c],d.F=[l,c],U.push(d)}function w(a){a=h.o=u[a]||u[s];sa(t.g);b.position=a.u.slice();c=a.t.slice();b.G=0;b.R=0;b.d=void 0;b.e=Wa;b.s=!1;b.D=!1;b.a=!1;b.l=!1;b.C=!1;y=Xa;M=n=0;h.time=0;sa(t.g);F=0;a.h?(f=a.h.slice(),v=[a.h[0]+15,a.h[1]+23],d=v.slice()):v=f=null;aa="4444444444444444444444444444444444444444"+a.map+"4444444444444444444444444444444444444444";aa=aa.split("");V(a);wa.length=0;na.length=0;La.width=Q;La.height=T;var G=La.getContext("2d");G.fillStyle="rgba(0,0,0,0.7)";
G.fillRect(0,0,Q,T);G.fillStyle="#fff";G.font="20px courier";G.textAlign="center";G.fillText(h.o.name,Q/2,T/2-50);G.fillText("Delivery Boy "+h.X+" - "+h.Y+" Crow",Q/2,T/2);G.font="15px courier";G.fillText("Click the "+(P?"screen":"crow")+" to start!",Q/2,T/2+60);G.fillText("< >: Select level",Q/2,T/2+100);G.fillText(a.O?"E: edit   "+(P?"1":"D")+": delete   "+(P?"2":"J")+": insert/copy JSON"+(Na?"   S: share":""):"E: edit",Q/2,T/2+120);G.beginPath();G.arc(c[0],c[1],16,0,360);G.lineWidth=1;G.strokeStyle=
"#fff";G.stroke();Ra=Ya.slice();window.localStorage&&(window.localStorage.ia=JSON.stringify(u))}function S(){h.X+=1;I.style.cursor="auto";B(C.oa);w(s)}function qa(){h.Y+=1;I.style.cursor="auto";B(C.ea);w(s)}function ra(b){var a=b.clientX-h.M.left;b=b.clientY-h.M.top;a=Math.max(0,Math.min(a,Q-1));b=Math.max(0,Math.min(b,T-1));return[a,b]}function J(){return Math.max(1,b.speed+b.Q-(void 0!==b.d?U[b.d].size:0))}function A(b,a,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+
a,c):b["on"+a]=c}function ca(){sa(t.j);h.time=X+h.o.k;pa();I.style.cursor="none"}function N(){if(h.state===t.f)if(F<xa){var a=Math.floor(q[1]/r);0<a&&a<Sa-1&&(aa[ba*a+Math.floor(q[0]/r)]=""+F)}else if(F===oa.ja)b.position[0]=q[0],b.position[1]=q[1];else if(F===oa.p)c[0]=q[0],c[1]=q[1];else if(F===oa.w&&f)f[0]=q[0],f[1]=q[1],v=[f[0]+15,f[1]+23],d=v.slice();else{if(F===oa.aa)for(Ia.F[0]=q[0],Ia.F[1]=q[1],a=0;a<U.length;a++){var G=U[a];G.position[0]=q[0]+16*a;G.position[1]=q[1]-G.size}}else h.state!==
t.g||P?0<n&&M<X&&(n--,B(C.ca),a=Object.create(bb),a.position=c.slice(),na.push(a)):q[0]>c[0]-16&&(q[0]<c[0]+16&&q[1]>c[1]-16&&q[1]<c[1]+16)&&ca()}function O(b,a){var c=document.getElementById(b);A(c,"touchstart",function(){Y.K({keyCode:a})});A(c,"touchend",function(){Y.L({keyCode:a})})}function Z(b,a,c){b=document.getElementById(b);A(b,"touchstart",a);A(b,"touchend",c)}function Da(b){b.preventDefault();if(h.state===t.f)la=!la;else if(h.state===t.j&&M<X)if(b=ra(b),(ea(c[0]-8,c[1]-8,16,16,L.q)||za(c[0],
c[1],0,0,L.q))&&n<cb)B(C.U),n++;else{var a;for(a=0;a<wa.length;a++)if(ta(b,wa[a].position)){n=Math.max(n,db);B(C.U);wa.splice(a,1);break}}}function sa(b){h.state=b;if(P)if(b===t.f){b=document.getElementsByClassName("edit");for(var a=0;a<b.length;a++)b[a].setAttribute("class","btn edit")}else for(b=document.getElementsByClassName("edit"),a=0;a<b.length;a++)b[a].setAttribute("class","btn h edit")}function ta(b,a){return Math.round(b[0]/r)===Math.round(a[0]/r)&&Math.round(b[1]/r)===Math.round(a[1]/r)}
function ya(){var a=b.N,c=J();b.a||(a=0);a=Math.min(c,a+c/5);b.N=a;return fa(L.n)?c/3:a}function da(){I.style.cursor="auto";h.state===t.f&&(u[s].map=aa.join("").substring(ba,ba*Sa-ba),u[s].u=b.position.slice(),u[s].t=c.slice(),u[s].h=f instanceof Array?f.slice():void 0,u[s].r=Ia.F.slice());w(s)}function za(b,a,c,d,e){var f=a,h=aa[ba*Math.floor(f/r)+Math.floor(b/r)];c=b+c;topRight=aa[ba*Math.floor(f/r)+Math.floor(c/r)];bottomRight=aa[ba*Math.floor((a+d)/r)+Math.floor(c/r)];bottomLeft=aa[ba*Math.floor(a/
r)+Math.floor(b/r)];return h===e||topRight===e||bottomRight===e||bottomLeft===e}function ea(b,a,c,d,e){a+=d;d=aa[ba*Math.floor(a/r)+Math.floor(b/r)];bottomLeft=aa[ba*Math.floor(a/r)+Math.floor((b+c)/r)];return d===e||bottomLeft===e}function fa(a){return za(b.position[0]-16,b.position[1]-32,16,32,a)||za(b.position[0]-8,b.position[1]-8,0,0,a)}function ja(b,a){return Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2)}function ka(){return void 0!==b.d?U[b.d]:void 0}function ua(b,a){return Math.atan((a[1]-b[1])/
(a[0]-b[0]))}function va(){var a=ka();a&&(B(C.ka),b.d=void 0,a.position=a.F.slice(),b.e--,0>=b.e&&qa())}function $(a,b,c){var d=null,e="#00deff";a===L.ma?d=x.qa:a===L.B?d=x.B:a===L.va?e="#000":a===L.fa?e="#0f0":a===L.q?d=x.q:a===L.n?d=x.n:a===L.m&&(d=x.m);p.fillStyle=e;p.fillRect(b,c,r,r);null!==d&&H(d,b,c,r,r)}(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+
"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();var P=!1;if("ontouchstart"in document.documentElement)for(var P=!0,Ea=document.getElementsByClassName("btn"),Aa=0;Aa<Ea.length;Aa++)-1===Ea[Aa].getAttribute("class").indexOf("edit")&&
Ea[Aa].setAttribute("class","btn");var I=document.getElementById("C"),p=I.getContext("2d"),X=0,s=0,q=[0,0],Ba=!1,la=!1,ga=1,Na=!1,F=0,Q=640,T=400,r=16,ba=Q/r,Sa=T/r,Qa=window.btoa&&window.atob,L={EMPTY:"0",ma:"1",n:"2",B:"3",va:"4",fa:"5",q:"6",m:"7"},xa=8,oa={ja:xa+0,p:xa+1,w:xa+2,aa:xa+3},Ta=xa+4,t={g:0,j:1,f:2},C={ha:0,ka:1,ca:2,ua:3,T:4,ba:5,oa:6,ea:7,na:8,U:9,m:10,ga:11},Wa=10,Ka=12,Za=[1,-6],cb=3,db=5,Xa=10,Ya="023123467".split(""),x={p:0,da:1,m:2,w:3,n:4,A:5,q:6,B:7,la:8,qa:9},D={};D[x.p]=
{frame:{x:30,y:0,b:30,c:14},i:{x:1,y:1,b:30,c:14},frames:[{x:1,y:1,b:15,c:13},{x:17,y:1,b:15,c:13}]};D[x.da]={frame:{x:14,y:40,b:14,c:8},i:{x:1,y:7,b:14,c:8}};D[x.m]={frame:{x:32,y:14,b:16,c:16},i:{x:0,y:0,b:16,c:16}};D[x.w]={frame:{x:0,y:24,b:14,c:24},i:{x:1,y:7,b:14,c:24}};D[x.n]={frame:{x:16,y:48,b:16,c:16},i:{x:0,y:0,b:16,c:16}};D[x.A]={frame:{x:0,y:0,b:30,c:24},i:{x:1,y:3,b:30,c:24},frames:[{x:0,y:0,b:15,c:24},{x:15,y:0,b:15,c:24}]};D[x.q]={frame:{x:48,y:14,b:16,c:10},i:{x:0,y:10,b:16,c:10}};
D[x.B]={frame:{x:14,y:24,b:16,c:16},i:{x:0,y:0,b:16,c:16}};D[x.la]={frame:{x:31,y:30,b:6,c:14},i:{x:4,y:1,b:6,c:14}};D[x.qa]={frame:{x:0,y:48,b:16,c:16},i:{x:0,y:0,b:16,c:16}};var ma=new Image,Ja=document.createElement("canvas"),Ua=0;ma.onload=function(){Ja.width=Ua=ma.naturalWidth;Ja.height=ma.naturalHeight;var a=Ja.getContext("2d");a.translate(ma.naturalWidth,0);a.scale(-1,1);a.drawImage(ma,0,0)};ma.src="img/imgmap.png";var b={position:null,speed:4,N:0,Q:0,R:0,Ba:2,Aa:-7,D:!1,l:!1,a:!1,s:!1,v:0,
Ma:!1,d:void 0,G:0,e:Wa,Ha:!0};e=c=null;n=0;E=!1;M=0;y=Xa;var aa=[],Ia={Z:null,size:1,position:null,F:[0,0]},U=[],eb={position:null},wa=[],bb={position:null,speed:6},na=[],h={state:t.g,M:I.getBoundingClientRect(),time:0,X:0,Y:0,o:null},La=document.createElement("canvas");d=null;f=[80,53];v=[95,78];var fb={name:"Tutorial",u:[33,370],t:[Q-24,55],r:[300,365],h:[20,70],map:"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
e:[1],k:3E6,J:[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(P?"S":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(P?"DPad":"Mouse")+": move"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,[(P?"2":"RClick")+": eat from nest or candy crumbs",(P?
"1":"LClick")+": shoot!"]],[140,60,["Don't touch roofs or the boy"]]]},gb={name:"Level 1",u:[25,366],t:[616,24],r:[41,364],h:[513,180],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
e:[1,2],k:6E4},hb={name:"Level 2",u:[28,143],t:[600,296],r:[588,365],h:[51,50],map:"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
e:[1,2],k:12E4},ib={name:"Level 5",u:[75,370],t:[Q-24,24],r:[83,365],h:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000303030200000000200000000000000000207000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
e:[1,2,3],k:3E5},u=window.localStorage&&window.localStorage.ia&&JSON.parse(window.localStorage.ia)||[fb,gb,hb,ib],Y={$:{},L:function(a){Y.$[a.keyCode]=void 0},K:function(a){Y.$[a.keyCode]=X}};window.addEventListener("keyup",Y.L,!1);window.addEventListener("keydown",Y.K,!1);for(var $a=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Va={},Ma=0;Ma<$a.length;Ma++)Va[Ma]=Oa.ra(["synth",0,0.4,0,0.208,0,0.12,20,$a[Ma],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var Ra=Ya.slice(),Ha=
{};z(C.ha,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);z(C.ka,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);z(C.ba,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);z(C.na,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);z(C.ca,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,
0,0.094,0.066,1,0,0,0.28,0]);z(C.ea,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);z(C.oa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);z(C.T,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);z(C.ua,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);z(C.U,["square",0,0.4,
0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);z(C.m,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);z(C.ga,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);w(s);A(I,"click",N);A(I,"mousedown",function(a){1===a.which&&(Ba=!0);h.state===t.f&&Ba&&N()});A(I,"mouseup",function(a){1===a.which&&(Ba=!1)});A(I,"mousemove",function(a){var b=ra(a);q=[b[0],b[1]];h.state===t.j?e=
ra(a).slice():h.state===t.f&&Ba&&N()});A(I,"touchstart",function(){h.state===t.g&&ca()});Z("s",function(){h.state===t.g?Y.K({keyCode:68}):N()},function(){Y.L({keyCode:68})});A(I,"contextmenu",Da);Z("e",function(a){h.state===t.g?Y.K({keyCode:74}):Da(a)},function(){Y.L({keyCode:74})});var Ga=document.getElementById("o"),ha=Ga.getBoundingClientRect(),ab=[100,100],Pa=!1,Fa;A(Ga,"touchstart",a);A(Ga,"touchmove",a);A(Ga,"touchend",function(a){a.preventDefault();Pa=!1});Z("p",function(){Y.K({keyCode:h.state!==
t.g?32:74})},function(){Y.L({keyCode:h.state!==t.g?32:74})});O("a",69);O("l",37);O("u",38);O("r",39);O("d",40);O("g",71);O("c",67);O("t",84);O("n",78);(function G(a){var z=a,l=J(),A=b.Ba,D=b.position[0],O=b.position[1],g=Y.$;if(h.state===t.g)if(g[37]&&!b.a)s=(s+u.length-1)%u.length,w(s),b.a=!0;else if(g[39]&&!b.a)s=(s+1)%u.length,w(s),b.a=!0;else if(g[69]&&!b.a)b.a=!0,u[s].O||(l=u[s],l={name:"CustomLevel"+ga++,u:l.u.slice(),t:l.t.slice(),r:l.r.slice(),h:l.h&&l.h.slice(),map:l.map,e:l.e.slice(),k:l.k,
O:!0},u.push(l),s=u.length-1,w(s)),sa(t.f),g[69]=void 0;else if(g[68]&&!b.a)b.a=!0,u[s].O&&(u.splice(s,1),s--,w(s));else if(g[74]&&u[s].O&&!b.a){if(A=l=prompt("LEVEL JSON",JSON.stringify(u[s])))a:{try{JSON.parse(l);A=!0;break a}catch(Z){alert("Level not valid: "+Z.message)}A=!1}A&&(u[s]=JSON.parse(l),w(s));g[74]=void 0}else g[83]&&!b.a?b.a=!0:g[37]||(g[39]||g[69]||g[74]||g[83])||(b.a=!1);else{if(h.state===t.f)if(g[37]&&!b.a)F=(F+Ta-1)%Ta,b.a=!0;else if(g[39]&&!b.a)F=(F+1)%Ta,b.a=!0;else if(g[71]&&
!b.a)f instanceof Array?d=v=f=null:(f=[32,32],v=[f[0]+15,f[1]+23],d=v.slice()),b.a=!0;else if(g[67]&&!b.a){b.a=!0;try{var R=JSON.parse(prompt("Set crates",JSON.stringify(u[s].e)));if(R instanceof Array){for(l=0;l<R.length;l++)"number"===!typeof l&&alert("Crates not valid"),R[l]=Math.max(1,Math.min(5,R[l]));u[s].e=R;V(u[s])}}catch(ca){alert("Crates not valid: "+ca.message)}g[67]=void 0}else if(g[78]&&!b.a){b.a=!0;if(l=prompt("Set name",u[s].name))u[s].name=l;g[78]=!1}else g[84]&&!b.a?(b.a=!0,z=+prompt("Set time",
u[s].k),!isNaN(z)&&0<z&&(u[s].k=z),g[84]=!1):g[69]&&!b.a?(b.a=!0,da(),g[69]=void 0):g[37]||(g[39]||g[71]||g[67]||g[78]||g[84]||g[69])||(b.a=!1);else if(h.state===t.j){if(!g[32]||b.D||b.l||b.s)g[69]&&!b.s?(b.s=!0,0<b.G&&(b.G--,b.Q=3,b.R=z+5E3,R=Object.create(eb),R.position=[b.position[0]+4,b.position[1]-7],wa.push(R),B(C.na))):g[32]||(g[69]||!b.s)||(b.s=!1);else a:if(b.s=!0,R=b.d,z=void 0!==R?U[R]:void 0,void 0===z){for(R=0;R<U.length;R++)if(ta(b.position,U[R].position)){b.d=R;B(C.T);break a}fa(L.m)&&
(b.G=3,B(C.m))}else b.d=void 0,B(C.T),fa(L.fa)&&void 0!==z&&(U.splice(R,1),0>=U.length?S():B(C.ba));g[38]?fa(L.n)?(b.position[1]=Math.min(T-r,O-A),b.a=!0):b.D||b.l||(b.v=b.Aa,b.N=l,b.D=!0,b.l=!0,B(C.ha)):!g[38]&&b.D&&(b.D=!1);g[37]&&(b.position[0]=Math.max(r,D-ya()),b.a=!0,b.C=!0);g[39]&&(b.position[0]=Math.min(Q-2*r,D+ya()),b.a=!0,b.C=!1);g[40]&&fa(L.n)&&(b.position[1]=Math.min(T,O+A),b.a=!0);g[37]||(g[38]||g[39]||g[40])||(b.a=!1)}g[27]&&da()}X=a;if(Pa&&Fa){for(var K,l=0;l<Fa.length;l++)if(g=Fa[l],
g.clientX>=ha.left&&g.clientX<ha.left+ha.width&&g.clientY>=ha.top&&g.clientY<ha.top+ha.height){K=Fa[l];break}if(K){K=[K.clientX-ha.left,K.clientY-ha.top];var g=ua(ab,K),l=Math.sqrt(ja(ab,K))/12.5,k;h.state===t.j?k=c:h.state===t.f&&(k=q);k&&(k[0]+=(h.state===t.f?Math.round(Math.cos(g)):Math.cos(g))*(100>K[0]?-l:l),k[1]+=(h.state===t.f?Math.round(Math.sin(g)):Math.sin(g))*(100>K[0]?-l:l),k[0]=Math.max(0,Math.min(k[0],Q-1)),k[1]=Math.max(0,Math.min(k[1],T-1)));la&&N()}}if(h.state===t.j){h.M=I.getBoundingClientRect();
k=0;for(var m;k<=b.v;){if(ea(b.position[0]-8,b.position[1]+k,16,0,L.ma)){m=b.position[1]+k-(b.position[1]+k)%r;break}k+=r}m?(b.position[1]=m,b.l&&(b.N=0,(m=ka())&&b.v>12-m.size&&va()),b.l=!1,b.v=0):ea(b.position[0]-16,b.position[1]-32,16,32,L.n)?b.l=!1:(b.v+=1,b.l=!0,b.position[1]+=b.v);void 0!==b.d&&(U[b.d].position[0]=b.position[0]+Za[0],U[b.d].position[1]=b.position[1]+Za[1]);b.R<a&&0<b.Q&&(b.Q=0);for(m=0;m<na.length;m++)if(k=na[m],k.position[1]+=k.speed,ta(b.position,k.position))va(),na.splice(m,
1),m--;else if(k.position[1]>T||ea(k.position[0],k.position[1],0,0,L.B))na.splice(m,1),m--;h.time<a&&qa();c&&e&&(g=ua(c,e),l=c[0]>e[0]?-1:1,m=Math.abs(c[0]-e[0]),k=Math.abs(c[1]-e[1]),3<m||3<k)&&(K=16*Math.cos(g)*l,g=16*Math.sin(g)*l,Math.abs(K)>m&&(K=m*K/Math.abs(K)),Math.abs(g)>k&&(g=k*g/Math.abs(g)),c[0]+=K,c[1]+=g);E=Math.pow(7*J()+75,2)>=ja(c,b.position);f&&(m=ea(c[0],c[1],0,0,L.q)?v:c,k=ua(d,m),K=d[0]>m[0]?-1:1,3<Math.abs(m[0]-d[0])||3<Math.abs(m[1]-d[1]))&&(d[0]+=1*Math.cos(k)*K,d[1]+=1*Math.sin(k)*
K);(Math.pow(7*J()+25,2)>=ja(c,b.position)||za(c[0],c[1],0,0,L.B)||f&&3>Math.sqrt(ja(d,c)))&&M<a&&(M=a+5E3,B(C.ga),n=0,y--,0>=y&&S())}h.M=I.getBoundingClientRect();p.fillStyle="black";p.fillRect(0,0,Q,T);for(m=0;m<ba;m++)for(k=0;k<Sa;k++)$(aa[ba*k+m],m*r,k*r);for(k=0;k<U.length;k++)k!==b.d&&(m=U[k],p.drawImage(m.Z,m.position[0]-8,m.position[1]-8));for(k=0;k<wa.length;k++)m=wa[k],H(x.da,m.position[0]-8,m.position[1]-8);for(k=0;k<na.length;k++)m=na[k],H(x.la,m.position[0]-8,m.position[1]-8);f&&H(x.w,
f[0],f[1]);if(h.o.J)for(m=0;m<h.o.J.length;m++){k=p;D=h.o.J[m][2];K=h.o.J[m][0];A=h.o.J[m][1];g=k.fillColor;l=k.textAlign;k.fillStyle="black";for(D=D.slice();0<D.length;)k.fillText(D.shift(),K,A),A+=10;k.fillStyle=g;k.textAlign=l}h.state===t.j?b.l?W(x.A,b.position[0]-8,b.position[1]-24,0,b.C):b.a?W(x.A,b.position[0]-8,b.position[1]-24,10,b.C,a):W(x.A,b.position[0]-8,b.position[1]-24,1,b.C):W(x.A,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(m=U[b.d],p.drawImage(m.Z,b.C?m.position[0]+2:m.position[0]-
16-m.size,m.position[1]-10));E&&(p.beginPath(),p.arc(b.position[0],b.position[1],7*J()+25,0,360),p.lineWidth=2,p.strokeStyle="#f09",p.stroke());h.state===t.j?M>a&&0===Math.floor(a/100)%2||W(x.p,c[0]-8,c[1]-8,2,!1,a):W(x.p,c[0]-8,c[1]-8,0);f&&(p.fillStyle="red",p.fillRect(d[0]-1,d[1]-1,2,2),p.beginPath(),p.arc(d[0],d[1],5,0,360),p.lineWidth=2,p.strokeStyle="red",p.stroke());h.state===t.j?(p.fillStyle="#00deff",p.fillText("BOY",10,396),p.fillStyle="red",p.fillText("CROW",600,12),p.fillStyle="white",
p.fillText("SPEED: "+J()+"   BOOST: "+Math.max(0,Math.ceil((b.R-a)/1E3))+"   TIME: "+Math.max(0,Math.ceil((h.time-a)/1E3))+"   CANDIES: "+b.G+"   CRATES: "+b.e,50,396),p.fillText("SHOTS: "+n+"   STUN: "+Math.max(0,Math.ceil((M-a)/1E3))+"   HEALTH: "+y,410,12)):h.state===t.f&&(p.fillStyle="white",p.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+u[s].k+")   N: NAME ("+u[s].name+")"+(P?"   1: PAINT   2: TOGGLE PAINT":""),12,12));h.state===t.g&&p.drawImage(La,0,0);h.state===t.f&&(p.globalAlpha=
0.6,F<xa?($(""+F,q[0]-q[0]%r,q[1]-q[1]%r),p.strokeStyle="#000",p.strokeRect(q[0]-q[0]%r,q[1]-q[1]%r,r,r)):F===oa.ja?W(x.A,q[0]-8,q[1]-24,1):F===oa.p?W(x.p,q[0]-8,q[1]-8,0):F===oa.w?H(x.w,q[0],q[1]):F===oa.aa&&(p.fillStyle="yellow",p.fillRect(q[0]-8,q[1]-8,16,16),p.fillStyle="#000",p.fillText("C",q[0]-4,q[1]+4)),p.globalAlpha=1);window.requestAnimationFrame(G)})()})();

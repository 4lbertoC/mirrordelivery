var W={};
(function(b){function e(b,d){return d?p(b&255)+e(b>>8,d-1):""}var v=this.sa=b||44100,u=2*v,p=String.fromCharCode,t;this.La=function(b){var d=Audio,p=btoa,C="",w=b.length;for(l=0;l<w;l++)var g=32767*b[l]|0,g=-32768>g?-32768:32767<g?32767:g,g=g+(0>g?65536:0),C=C+String.fromCharCode(g&255,g>>8);b=C;b=["RIFF",36+(t=b.length),"WAVEfmt ",16,1,1,v,u,2,16,"data",t,b];C="";for(l=0;l<b.length;l++)C+="s"=="s4s4224422s4s"[l]?b[l]:e(b[l],"s4s4224422s4s".charCodeAt(l)-48);return new d("data:audio/wav;base64,"+p(C))};
var g,l,G=Math.sin,d=2*Math.PI;this.filter=function(b,d,e,p,w,t,v,u,z,G){e=e?e:1;p=p?p:b.length;g=b.slice(0);for(l=e;l<p;l++)g[l]=d(b,g,e,p,l,w,t,v,u,z,G);return g};this.filters={Ua:function(b,d,e,p,w,g){return d[w-1]+g*(b[w]-d[w-1])},Va:function(b,d,e,p,g,l){return d[g-1]+l*(p-g)/(p-e)*(b[g]-d[g-1])},Ta:function(b,d,e,p,g,l){return l*(d[g-1]+b[g]-b[g-1])}};this.ua=function(b,e,p,g,t,u,z,G,X){e=e*d/v;var M=Array(b|0);for(l=0;l<b;l++)M[l]=p(l*e,g,t,u,z,G,X);return M};var z=0;this.B={Na:function(b){4>
b%d&&(z=2*Math.random()-1);return z},Wa:Math.random,Ra:Math.sin,Sa:function(b){return G(b)+0.5*G(b/2)+0.3*G(b/4)},Qa:function(b){return 2*(b/d-(b/d+0.5|0))},va:function(b,d){return G(b)>d?1:G(b)<d?-1:d}}}).apply(W);var ma={};
(function(){this.X=[];this.T={square:W.B.va,saw:W.B.Qa,sine:W.B.Ra,noise:W.B.Na,synth:W.B.Sa};this.Ha=function(){var b=[],e;for(e in this.T)b.push(e);return b};this.Ia=function(){function b(b,t,g,l,u){void 0===u&&(u=(g-t)/1E3);b={name:b,id:b.replace(/ /g,""),min:t,max:g,step:u,Ga:l,type:"range",group:v};e.push(b)}var e=[],v=0,u=this.Ha();(function(b,t,g){b={name:b,id:b.replace(/ /g,""),options:t,Ga:g,type:"option",group:v};e.push(b)})("Generator",u,u[0]);b("SuperSamplingQuality",0,16,0,1);b("MasterVolume",
0,1,0.4);v++;b("AttackTime",0,1,0.1);b("SustainTime",0,2,0.3);b("SustainPunch",0,3,2);b("DecayTime",0,2,1);v++;b("MinFrequency",20,2400,0,1);b("StartFrequency",20,2400,440,1);b("MaxFrequency",20,2400,2E3,1);b("Slide",-1,1,0);b("DeltaSlide",-1,1,0);v++;b("VibratoDepth",0,1,0);b("VibratoFrequency",0.01,48,8);b("VibratoDepth Slide",-0.3,1,0);b("VibratoFrequencySlide",-1,1,0);v++;b("ChangeAmount",-1,1,0);b("ChangeSpeed",0,1,0.1);v++;b("SquareDuty",0,0.5,0);b("SquareDutySweep",-1,1,0);v++;b("RepeatSpeed",
0,0.8,0);v++;b("PhaserOffset",-1,1,0);b("PhaserSweep",-1,1,0);v++;b("LPFilterCutoff",0,1,1);b("LPFilterCutoffSweep",-1,1,0);b("LPFilterResonance",0,1,0);b("HPFilterCutoff",0,1,0);b("HPFilterCutoffSweep",-1,1,0);return e};this.ua=function(b){var e=2*Math.PI,v=Math.sin,u=Math.pow,p=Math.abs,t=W.sa,g=b.SuperSamplingQuality|0;1>g&&(g=1);for(var t=t*g,l=[{A:0,N:1,time:b.AttackTime},{A:1+b.SustainPunch,N:1,time:b.SustainTime},{A:1,N:0,time:b.DecayTime}],G=l.length,d=0;d<G;d++)l[d].K=1+(l[d].time*t|0);for(var z=
void 0,$=0,ea=-1,la=0,C=-1,w=0,d=0;d<G;d++)w+=l[d].K;w<t/2&&(w=t/2);var fa=Array(w/g|0),I=0,L=0,X=ma.T[b.Generator];void 0===X&&(X=this.T.va);var M=0,M=b.SquareDuty,na=b.SquareDutySweep/t,N=0,J=b.StartFrequency*e/t,ga=1+64*u(b.Slide,3)/t,T=u(b.DeltaSlide,3)/(1E3*t);void 0!==g&&(T/=g);b.MinFrequency>b.StartFrequency&&(b.MinFrequency=b.StartFrequency);b.MaxFrequency<b.StartFrequency&&(b.MaxFrequency=b.StartFrequency);for(var ta=b.MinFrequency*e/t,U=b.MaxFrequency*e/t,V=0,P=b.VibratoFrequency*e/t,Q=
b.VibratoDepth,ua=1+3*u(b.VibratoFrequencySlide,3)/t,aa=b.VibratoDepthSlide/t,Y=0,ha=b.ChangeSpeed*t,F=u(b.ChangeAmount,2),F=0<b.ChangeAmount?1+10*F:1-0.9*F,c=Array(1024),d=0;1024>d;d++)c[d]=0;var S=0,m=1020*u(b.PhaserOffset,2),q=4E3*u(b.PhaserSweep,3)/t,ia=1E-5<p(q)||1E-5<p(m),ya=0.0010<b.HPFilterCutoff||0.999>b.LPFilterCutoff,B=0,E=0,D=u(b.LPFilterCutoff,3)/10,r=1+b.HPFilterCutoffSweep/1E4,H=5/(1+20*u(b.LPFilterResonance,2))*(0.01+b.LPFilterCutoff);0.8<H&&(H=0.8);var H=1-H,ja=0.999>b.LPFilterCutoff,
x=0,O=u(b.HPFilterCutoff,2)/10,A=1+b.HPFilterCutoffSweep/1E4,ba=0,ca=w;0<b.RepeatSpeed&&(ca=u(1-b.RepeatSpeed,2)*t+32);for(var va=b.MasterVolume,oa=0,d=0;d<w;d++)I=X(N,M,0),M+=na,0>M?M=0:0.5<M&&(M=0.5),ba>ca&&(N=0,J=b.StartFrequency*e/t,ga=1+3*u(b.Slide,3)/t,T=u(b.DeltaSlide,3)/(1E3*t),void 0!==g&&(T/=g),Y=0,ha=b.ChangeSpeed*t,F=1+(b.ChangeAmount|0)/12,ba=0),ba+=1,N+=J,ga+=T,J*=ga,Y>ha&&(J*=F,ha=w),Y+=1,J>U?J=U:J<ta&&(J=ta),V+=P,z=J*v(V)*Q,N+=z,P*=ua,aa&&(Q+=aa,0>Q?aa=Q=0:1<Q&&(Q=1,aa=0)),ya&&(0.0010<
p(O)&&(O*=A,1E-5>O?O=1E-5:0.1<O&&(O=0.1)),z=B,D*=r,0>D?D=0:0.1<D&&(D=0.1),ja?(E+=(I-B)*D,E*=H):(B=I,E=0),B+=E,x+=B-z,I=x*=1-O),ia&&(m+=q,0>m&&(m=-m,q=-q),1023<m&&(m=1023,q=0),c[S]=I,I+=c[S-(m|0)+1024&1023],S=S+1&1023),d>C&&(ea+=1,z=ea<G?l[ea]:{A:0,N:0,K:w},$=z.A,la=(z.N-z.A)/(z.K+1),C+=z.K),I*=$,$+=la,I*=va,1<g?(L+=I,0===(d+1)%g&&(fa[oa]=L/g,oa+=1,L=0)):fa[d]=I;b=t/100|0;e=Array(b);for(d=0;d<b;d++)e[d]=0;return e.concat(fa).concat(e)};this.X=this.Ia()}).apply(ma);var za={};(function(){this.ta=function(b){b=ma.ua(this.Fa(b));return W.La(b)};this.Fa=function(b){for(var e={},v=ma.X.length,u=0;u<v;u++)e[ma.X[u].id]=b[u];return e}}).apply(za);(function(){var b,e,v,u,p,t,g,l,G,d;function z(a,b,d,h){var f=new Image;f.width=b||16;f.height=d||16;f.onload=h;f.src=a;return f}function $(a){var b=document.createElement("canvas"),d=z("img/man2.png",32,32,function(){var h=b.getContext("2d");a&&(h.translate(32,0),h.scale(-1,1));h.drawImage(d,0,0)});b.width=32;b.height=32;return b}function ea(){var a=y[m],a={name:"CustomLevel"+ya++,p:a.p.slice(),o:a.o.slice(),l:a.l.slice(),k:a.k&&a.k.slice(),map:a.map,d:a.d.slice(),j:a.j,I:!0};y.push(a);m=y.length-
1}function la(){s.e&&0<Aa.length&&(Ba[Aa.shift()].play(),setTimeout(la,200))}function C(a,b){pa[a]=za.ta(b)}function w(a){pa[a]&&(pa[a].pause(),pa[a].currentTime=0,pa[a].play())}function fa(a,b,d,h,f){var e=a.fillColor,c=a.textAlign;a.fillStyle="black";f&&(a.textAlign=f);for(b=b.slice();0<b.length;)a.fillText(b.shift(),d,h),h+=10;a.fillStyle=e;a.textAlign=c}function I(a){var b=a.l,d,h,f,e;qa.u=b;for(var c=K.length=0;c<a.d.length;c++)d=a.d[c],h=Object.create(qa),h.size=d,f=document.createElement("canvas"),
f.width=ca+d,f.height=ca+d,e=f.getContext("2d"),e.fillStyle="yellow",e.fillRect(0,0,ca+d,ca+d),e.fillStyle="black",e.fillText(d,5,10),h.b=f,f=b[0]+16*c,d=b[1]-d,h.position=[f,d],h.u=[f,d],K.push(h)}function L(b){b=s.s=y[b]||y[m];s.e=!1;a.position=b.p.slice();p=b.o.slice();a.w=0;a.M=0;a.c=void 0;a.d=ba;a.n=!1;a.t=!1;a.a=!1;a.m=!1;a.h=!0;t=Ca;g=0;s.time=0;s.g=!1;B=0;b.k?(e=b.k.slice(),v=[b.k[0]+15,b.k[1]+23],d=v.slice()):v=e=null;R="4444444444444444444444444444444444444444"+b.map+"4444444444444444444444444444444444444444";
R=R.split("");I(b);da.length=0;Z.length=0;wa.width=E;wa.height=D;var c=wa.getContext("2d");c.fillStyle="rgba(0,0,0,0.7)";c.fillRect(0,0,E,D);c.fillStyle="#fff";c.font="20px courier";c.textAlign="center";c.fillText(s.s.name,E/2,D/2-50);c.fillText("Delivery Boy "+s.aa+" - "+s.ca+" Crow",E/2,D/2);c.font="15px courier";c.fillText("Select level with arrows",E/2,D/2+80);c.fillText("Click the crow to start!",E/2,D/2+100);c.fillText(b.I?"E: edit   D: delete   J: insert/copy JSON   S: share":"E: edit",E/2,
D/2+120);c.beginPath();c.arc(p[0],p[1],16,0,360);c.lineWidth=1;c.strokeStyle="#fff";c.stroke();Aa=Da.slice();window.localStorage&&(window.localStorage.na=JSON.stringify(y))}function X(){s.aa+=1;F.style.cursor="auto";w(A.ra);L(m)}function M(){s.ca+=1;F.style.cursor="auto";w(A.ha);L(m)}function na(a){return[a.clientX-s.ba.left,a.clientY-s.ba.top]}function N(){return Math.max(1,a.speed+a.L-(void 0!==a.c?K[a.c].size:0))}function J(a,b){return Math.round(a[0]/r)===Math.round(b[0]/r)&&Math.round(a[1]/r)===
Math.round(b[1]/r)}function ga(){var b=a.c,d=void 0!==b?K[b]:void 0;if(void 0===d){for(b=0;b<K.length;b++)if(J(a.position,K[b].position)){a.c=b;w(A.Q);return}P(x.v)&&(a.w=Fa,w(A.v))}else a.c=void 0,w(A.Q),P(x.ia)&&void 0!==d&&(K.splice(b,1),0>=K.length?X():w(A.ea))}function T(){var b=a.H,d=N();a.a||(b=0);b=Math.min(d,b+d/5);a.H=b;return P(x.i)?d/3:b}function ta(b){var c=N(),g=a.Ka,h=a.position[0],f=a.position[1],n=ra.da;if(s.e||s.g){if(s.g)if(n[k.q]&&!a.a)B=(B+O-1)%O,a.a=!0;else if(n[k.r]&&!a.a)B=
(B+1)%O,a.a=!0;else if(n[k.ja]&&!a.a)e instanceof Array?d=v=e=null:(e=[32,32],v=[e[0]+15,e[1]+23],d=v.slice()),a.a=!0;else if(n[k.P]&&!a.a){a.a=!0;try{var l=JSON.parse(prompt("Set crates",JSON.stringify(y[m].d)));if(l instanceof Array){for(c=0;c<l.length;c++)"number"===!typeof c&&alert("Crates not valid"),l[c]=Math.max(1,Math.min(5,l[c]));y[m].d=l;I(y[m])}}catch(q){alert("Crates not valid: "+q.message)}n[k.P]=void 0}else if(n[k.V]&&!a.a){a.a=!0;if(c=prompt("Set name",y[m].name))y[m].name=c;n[k.V]=
!1}else n[k.Z]&&!a.a?(a.a=!0,b=+prompt("Set time",y[m].j),!isNaN(b)&&0<b&&(y[m].j=b),n[k.Z]=!1):n[k.q]||(n[k.r]||n[k.ja]||n[k.P]||n[k.V]||n[k.Z])||(a.a=!1);else s.e&&(!n[k.la]||a.t||a.m||a.n?n[k.F]&&!a.n?(a.n=!0,0<a.w&&(a.w--,a.L=Ga,a.M=b+Ha,l=Object.create(Ia),l.position=[a.position[0]+4,a.position[1]-7],da.push(l),w(A.qa))):n[k.la]||(n[k.F]||!a.n)||(a.n=!1):(a.n=!0,ga()),n[k.$]?P(x.i)?(a.position[1]=Math.min(D-r,f-g),a.a=!0):a.t||a.m||(a.f=a.Ja,a.H=c,a.t=!0,a.m=!0,w(A.ma)):!n[k.$]&&a.t&&(a.t=!1),
n[k.q]&&(a.position[0]=Math.max(r,h-T()),a.a=!0,a.h=!1),n[k.r]&&(a.position[0]=Math.min(E-2*r,h+T()),a.a=!0,a.h=!0),n[k.ga]&&((P(x.i)||U(x.i))&&!U(x.G))&&(a.position[1]=Math.min(D,f+g),a.a=!0),n[k.q]||(n[k.$]||n[k.r]||n[k.ga])||(a.a=!1));n[k.Aa]&&(F.style.cursor="auto",s.g&&(y[m].map=R.join("").substring(H,H*ja-H),y[m].p=a.position.slice(),y[m].o=p.slice(),e instanceof Array&&(y[m].k=e.slice()),y[m].l=qa.u.slice()),L(m))}else if(n[k.q]&&!a.a)m=(m+y.length-1)%y.length,L(m),a.a=!0;else if(n[k.r]&&!a.a)m=
(m+1)%y.length,L(m),a.a=!0;else if(n[k.F]&&!a.a)y[m].I||(ea(),L(m)),s.g=!0;else if(n[k.xa]&&!a.a)a.a=!0,y[m].I&&(y.splice(m,1),m--,L(m));else if(n[k.U]&&y[m].I&&!a.a){if(g=c=prompt("LEVEL JSON",JSON.stringify(y[m])))a:{try{JSON.parse(c);g=!0;break a}catch(t){alert("Level not valid: "+t.message)}g=!1}g&&(y[m]=JSON.parse(c),L(m));n[k.U]=void 0}else n[k.pa]&&!a.a?(a.a=!0,n=new XMLHttpRequest,n.onload=function(){console.log(this.responseText)},n.open("post","http://127.0.0.1:3000/addLevel",!0),n.send(JSON.stringify(y[m]))):
n[k.q]||(n[k.r]||n[k.F]||n[k.U]||n[k.pa])||(a.a=!1)}function U(b){return J(a.position,[a.position[0],a.position[1]+r/2])||R[H*Math.round(a.position[1]/r)+Math.round(a.position[0]/r-1)]!==b&&R[H*Math.round(a.position[1]/r)+Math.round(a.position[0]/r)]!==b?!1:!0}function V(a,b){return R[H*Math.round(a[1]/r-1)+Math.round(a[0]/r-0.5)]===b?!0:!1}function P(b){return V(a.position,b)}function Q(a,b){return Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)}function ua(){return void 0!==a.c?K[a.c]:void 0}function aa(){var b=
ua();b&&(w(A.oa),a.c=void 0,b.position=b.u.slice(),a.d--,0>=a.d&&M())}function Y(){var b=ua();b&&a.f>oa-b.size&&aa()}function ha(a,b,d){var e=null,f="#00deff";a===x.G?e=sa.Ea.b:a===x.Y?e=sa.Ca.b:a===x.Da?f="#000":a===x.ia?f="#0f0":a===x.W?e=sa.Ba.b:a===x.i?e=sa.za.b:a===x.v&&(e=sa.ya.b);c.fillStyle=f;c.fillRect(b,d,r,r);null!==e&&c.drawImage(e,b,d,r,r)}window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;
var F=document.getElementById("c"),c=F.getContext("2d"),S=0,m=0,q=[0,0],ia=!1,ya=1,B=0,E=640,D=400,r=16,H=E/r,ja=D/r,x={EMPTY:"0",G:"1",i:"2",Y:"3",Da:"4",ia:"5",W:"6",v:"7"},O=12,A={ma:0,oa:1,fa:2,wa:3,Q:4,ea:5,ra:6,ha:7,qa:8,R:9,v:10,ka:11},ba=10,ca=12,va=[1,-6],oa=12,Ga=3,Ha=5E3,Fa=3,Ca=10,Da="023123467".split(""),k={q:37,$:38,r:39,ga:40,F:69,la:32,Aa:27,xa:68,U:74,ja:71,P:67,V:78,Z:84,pa:83},a={position:null,speed:4,H:0,L:0,M:0,Ka:2,Ja:-7,t:!1,m:!1,a:!1,n:!1,f:0,images:{D:$(),J:$(!0)},Xa:!1,c:void 0,
w:0,d:ba,h:!0};p=null;b=z("img/crow2.png");l=3;G=!1;g=0;t=Ca;var R=[],sa={za:{b:z("img/ladder.png")},Ba:{b:z("img/nest.png")},ya:{b:z("img/dispenser.png")},Ca:{b:z("img/roof.gif")},Ea:{b:z("img/wall.gif")}},qa={b:null,size:1,position:null,u:[0,0]},K=[],Ia={b:z("img/crumbs.png"),position:null},da=[],Ja={b:z("img/shot.png"),position:null,speed:6},Z=[],s={e:!1,ba:F.getBoundingClientRect(),time:0,aa:0,ca:0,s:null,g:!1},wa=document.createElement("canvas");d=null;e=[80,53];u=z("img/granny.png");v=[95,78];
var xa={name:"Tutorial 1",p:[33,370],o:[E-24,24],l:[53,365],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555000000000000000000000000000000000000555500000000000000000000000000000000000055551111111111111111111111111111111111111111",
d:[1],j:3E4,C:{O:["PLAYER 1","ARROWS: move/jump","SPACEBAR: grab/release crate","Leave crate into the green zone."],S:["PLAYER 2","MOUSE: move","LClick: shoot","RClick: recharge from nest","Shoot boy to make his crate fall."]}},ka={name:"Tutorial 2",p:[33,370],o:[E-24,24],l:[53,365],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033333300000000000000000000000000000333330000000000000000000000000000000000005555000000000000000000000000000000000000555500000000007000000000000000000000000055551111111111111111111111111111111111111111",
d:[3],j:3E4,C:{O:["SPACEBAR: buy candies when not holding a crate.","E: use candy","Candies give a speed boost."],S:["Roofs block shots.","Don't touch the roofs or the boy.","RClick: eat candy crumbs to get 5 shots."]}},Ka={name:"Tutorial 3",p:[33,370],o:[E-24,24],l:[53,365],k:[100,227],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000333333300000000000000000000000000000000055555500000000000000000000000000000000005555550000000000000000000000000000000000555555000000000200000000000000033330000011111111111111120000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000700200033333300000000021111111100011111111120000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020001111111111111111111111111111111111111111",
d:[2,3],j:6E4,C:{O:["ARROWS: climb ladder","Crates will break if you fall from too high."],S:["Don't get shot!","Hide in the nest."]}},La={name:"Level 5",p:[75,370],o:[E-24,24],l:[83,365],k:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000000000000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000000000200000000200000000000000000207000000000020000000000333330000000000011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
d:[1,2,3],j:3E5},y=window.localStorage&&window.localStorage.na&&JSON.parse(window.localStorage.na)||[xa,ka,Ka,La],ra={da:{},Pa:function(a){ra.da[a.keyCode]=void 0},Oa:function(a){ra.da[a.keyCode]=S}};window.addEventListener("keyup",ra.Pa,!1);window.addEventListener("keydown",ra.Oa,!1);for(var xa=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ba={},ka=0;ka<xa.length;ka++)Ba[ka]=za.ta(["synth",0,0.4,0,0.208,0,0.12,20,xa[ka],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var Aa=Da.slice(),
pa={};C(A.ma,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);C(A.oa,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);C(A.ea,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);C(A.qa,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);C(A.fa,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,
-0.592,0,0.094,0.066,1,0,0,0.28,0]);C(A.ha,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);C(A.ra,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);C(A.Q,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);C(A.wa,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);C(A.R,["square",
0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);C(A.v,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);C(A.ka,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);L(m);F.addEventListener("click",function(){if(s.g)if(8===B)a.position[0]=q[0],a.position[1]=q[1];else if(9===B)p[0]=q[0],p[1]=q[1];else if(10===B&&e)e[0]=q[0],e[1]=q[1],v=[e[0]+15,e[1]+23],d=v.slice();else{if(11===
B){qa.u[0]=q[0];qa.u[1]=q[1];for(var b=0;b<K.length;b++){var c=K[b];c.position[0]=q[0]+16*b;c.position[1]=q[1]-c.size}}}else s.e?0<l&&g<S&&(l--,w(A.fa),b=Object.create(Ja),b.position=p.slice(),Z.push(b)):q[0]>p[0]-16&&(q[0]<p[0]+16&&q[1]>p[1]-16&&q[1]<p[1]+16)&&(s.e=!0,s.time=S+s.s.j,la(),F.style.cursor="none")});F.addEventListener("mousedown",function(a){1===a.which&&(ia=!0);s.g&&(ia&&8>B)&&(a=Math.floor(q[1]/r),0<a&&a<ja-1&&(R[H*a+Math.floor(q[0]/r)]=""+B))});F.addEventListener("mouseup",function(a){1===
a.which&&(ia=!1)});F.addEventListener("mousemove",function(a){var b=na(a);q=[b[0],b[1]];s.e?p=na(a).slice():s.g&&ia&&8>B&&(a=Math.floor(q[1]/r),0<a&&a<ja-1&&(R[H*a+Math.floor(q[0]/r)]=""+B))});F.addEventListener("contextmenu",function(a){a.preventDefault();if(s.e&&g<S)if(a=na(a),R[H*Math.round(p[1]/r-0.5)+Math.round(p[0]/r-0.5)]===x.W&&3>l)w(A.R),l++;else{var b;for(b=0;b<da.length;b++)if(J(a,da[b].position)){l=Math.max(l,5);w(A.R);da.splice(b,1);break}}});(function Ea(k){ta(k);S=k;if(s.e){s.ba=F.getBoundingClientRect();
a.f>r/2&&(a.f+a.position[1]>a.Ma&&a.f)&&(a.f=r/2,Y());if(P(x.i)||U(x.i)||U(x.G)||a.position[1]>D-r){if(U(x.i)||0<a.f)Y(),a.f=0,a.H=0,a.m=!1;P(x.i)||U(x.i)||0!==a.f||(a.position[1]=a.position[1]-a.position[1]%r+1)}else Y(),a.f+=1,a.m=!0;a.position[1]+=a.f;for(var h=a.position[0],f=a.position[1];f<D-r&&!V([h,f],x.G);)f+=r;f-=f%r;a.Ma=f;void 0!==a.c&&(K[a.c].position[0]=a.position[0]+va[0],K[a.c].position[1]=a.position[1]+va[1]);a.M<k&&0<a.L&&(a.L=0);for(h=0;h<Z.length;h++)if(f=Z[h],f.position[1]+=f.speed,
J(a.position,f.position))aa(),Z.splice(h,1),h--;else if(f.position[1]>D||V(f.position,x.Y))Z.splice(h,1),h--;s.time<k&&M();G=Math.pow(7*N()+75,2)>=Q(p,a.position);if(e){var h=V(p,x.W)?v:p,f=Math.atan((h[1]-d[1])/(h[0]-d[0])),n=d[0]>h[0]?-1:1;if(3<Math.abs(h[0]-d[0])||3<Math.abs(h[1]-d[1]))d[0]+=1*Math.cos(f)*n,d[1]+=1*Math.sin(f)*n}(Math.pow(7*N()+25,2)>=Q(p,a.position)||V(p,x.Y)||e&&3>Math.sqrt(Q(d,p)))&&g<k&&(g=k+5E3,w(A.ka),l=0,t--,0>=t&&X())}c.fillStyle="black";c.fillRect(0,0,E,D);for(h=0;h<H;h++)for(f=
0;f<ja;f++)ha(R[H*f+h],h*r,f*r);for(f=0;f<K.length;f++)f!==a.c&&(h=K[f],c.drawImage(h.b,h.position[0]-8,h.position[1]-8));for(f=0;f<da.length;f++)h=da[f],c.drawImage(h.b,h.position[0]-8,h.position[1]-8);for(f=0;f<Z.length;f++)h=Z[f],c.drawImage(h.b,h.position[0]-8,h.position[1]-8);e&&c.drawImage(u,e[0],e[1]);s.s.C&&(fa(c,s.s.C.O,120,330),fa(c,s.s.C.S,620,70,"right"));s.e?a.m?c.drawImage(a.h?a.images.D:a.images.J,a.h?0:16,0,16,32,a.position[0]-8,a.position[1]-24,16,32):a.a?c.drawImage(a.h?a.images.D:
a.images.J,1>Math.floor(k/100)%2?0:17,0,15,32,a.position[0]-8,a.position[1]-24,16,32):c.drawImage(a.h?a.images.D:a.images.J,a.h?17:0,0,15,32,a.position[0]-8,a.position[1]-24,16,32):c.drawImage(a.h?a.images.D:a.images.J,a.h?17:0,0,15,32,a.position[0]-8,a.position[1]-24,16,32);void 0!==a.c&&(h=K[a.c],c.drawImage(h.b,a.h?h.position[0]-16-h.size:h.position[0]+2,h.position[1]-10));G&&(c.beginPath(),c.arc(a.position[0],a.position[1],7*N()+25,0,360),c.lineWidth=2,c.strokeStyle="#f09",c.stroke());s.e?g>k&&
0===Math.floor(k/100)%2||c.drawImage(b,3>Math.floor(k/100)%6?1:17,0,15,16,p[0]-8,p[1]-8,16,16):c.drawImage(b,0,0,16,16,p[0]-8,p[1]-8,16,16);e&&(c.fillStyle="red",c.fillRect(d[0]-1,d[1]-1,2,2),c.beginPath(),c.arc(d[0],d[1],5,0,360),c.lineWidth=2,c.strokeStyle="red",c.stroke());s.e?(c.fillStyle="#00deff",c.fillText("BOY",10,396),c.fillStyle="red",c.fillText("CROW",600,12),c.fillStyle="white",c.fillText("SPEED: "+N()+"   BOOST: "+Math.max(0,Math.ceil((a.M-k)/1E3))+"   TIME: "+Math.max(0,Math.ceil((s.time-
k)/1E3))+"   CANDIES: "+a.w+"   CRATES: "+a.d,50,396),c.fillText("SHOTS: "+l+"   STUN: "+Math.max(0,Math.ceil((g-k)/1E3))+"   HEALTH: "+t,410,12)):s.g&&(c.fillStyle="white",c.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+y[m].j+")   N: NAME ("+y[m].name+")",12,12));s.e||s.g||c.drawImage(wa,0,0);s.g&&(c.globalAlpha=0.6,8>B?(ha(""+B,q[0]-q[0]%r,q[1]-q[1]%r),c.strokeStyle="#000",c.strokeRect(q[0]-q[0]%r,q[1]-q[1]%r,r,r)):8===B?c.drawImage(a.images.D,17,0,15,32,q[0]-8,q[1]-24,16,32):
9===B?c.drawImage(b,0,0,16,16,q[0]-8,q[1]-8,16,16):10===B?c.drawImage(u,q[0],q[1]):11===B&&(c.fillStyle="yellow",c.fillRect(q[0]-8,q[1]-8,16,16),c.fillStyle="#000",c.fillText("C",q[0]-4,q[1]+4)),c.globalAlpha=1);window.requestAnimationFrame(Ea)})()})();

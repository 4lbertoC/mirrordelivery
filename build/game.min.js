/* MirrorDelivery 1.3.3 http://github.com/4lbertoC/mirrordelivery */var pa={};
(function(a){function y(a,k){return k?c(a&255)+y(a>>8,k-1):""}var n=this.xa=a||44100,s=2*n,c=String.fromCharCode,k;this.Pa=function(a){var K=Audio,h=btoa,I="",Q=a.length;for(m=0;m<Q;m++)var c=32767*a[m]|0,c=-32768>c?-32768:32767<c?32767:c,c=c+(0>c?65536:0),I=I+String.fromCharCode(c&255,c>>8);a=I;a=["RIFF",36+(k=a.length),"WAVEfmt ",16,1,1,n,s,2,16,"data",k,a];I="";for(m=0;m<a.length;m++)I+="s"=="s4s4224422s4s"[m]?a[m]:y(a[m],"s4s4224422s4s".charCodeAt(m)-48);return new K("data:audio/wav;base64,"+h(I))};
var B,m,D=Math.sin,h=2*Math.PI;this.filter=function(a,k,c,n,h,y,s,v,D,S){c=c?c:1;n=n?n:a.length;B=a.slice(0);for(m=c;m<n;m++)B[m]=k(a,B,c,n,m,h,y,s,v,D,S);return B};this.filters={Wa:function(a,c,k,n,h,m){return c[h-1]+m*(a[h]-c[h-1])},Xa:function(a,c,k,n,h,m){return c[h-1]+m*(n-h)/(n-k)*(a[h]-c[h-1])},Va:function(a,c,k,n,h,m){return m*(c[h-1]+a[h]-a[h-1])}};this.za=function(a,c,k,y,s,v,B,D,ka){c=c*h/n;var S=Array(a|0);for(m=0;m<a;m++)S[m]=k(m*c,y,s,v,B,D,ka);return S};var v=0;this.N={Qa:function(a){4>
a%h&&(v=2*Math.random()-1);return v},Ya:Math.random,Sa:Math.sin,Ta:function(a){return D(a)+0.5*D(a/2)+0.3*D(a/4)},Ra:function(a){return 2*(a/h-(a/h+0.5|0))},Ca:function(a,c){return D(a)>c?1:D(a)<c?-1:c}}}).apply(pa);var La={};
(function(){this.ea=[];this.ba={square:pa.N.Ca,saw:pa.N.Ra,sine:pa.N.Sa,noise:pa.N.Qa,synth:pa.N.Ta};this.La=function(){var a=[],y;for(y in this.ba)a.push(y);return a};this.Ma=function(){function a(a,k,s,m,D){void 0===D&&(D=(s-k)/1E3);a={name:a,id:a.replace(/ /g,""),min:k,max:s,step:D,Ka:m,type:"range",group:n};y.push(a)}var y=[],n=0,s=this.La();(function(a,k,s){a={name:a,id:a.replace(/ /g,""),options:k,Ka:s,type:"option",group:n};y.push(a)})("Generator",s,s[0]);a("SuperSamplingQuality",0,16,0,1);
a("MasterVolume",0,1,0.4);n++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);n++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);n++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);n++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);n++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);
n++;a("RepeatSpeed",0,0.8,0);n++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);n++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return y};this.za=function(a){var y=2*Math.PI,n=Math.sin,s=Math.pow,c=Math.abs,k=pa.xa,B=a.SuperSamplingQuality|0;1>B&&(B=1);for(var k=k*B,m=[{M:0,Y:1,time:a.AttackTime},{M:1+a.SustainPunch,Y:1,time:a.SustainTime},{M:1,Y:0,time:a.DecayTime}],D=m.length,h=0;h<D;h++)m[h].X=
1+(m[h].time*k|0);for(var v=void 0,G=0,K=-1,Fa=0,I=-1,Q=0,h=0;h<D;h++)Q+=m[h].X;Q<k/2&&(Q=k/2);var Ga=Array(Q/B|0),E=0,qa=0,ka=La.ba[a.Generator];void 0===ka&&(ka=this.ba.Ca);var S=0,S=a.SquareDuty,Ta=a.SquareDutySweep/k,ga=0,U=a.StartFrequency*y/k,ba=1+64*s(a.Slide,3)/k,X=s(a.DeltaSlide,3)/(1E3*k);void 0!==B&&(X/=B);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var ya=a.MinFrequency*y/k,la=a.MaxFrequency*
y/k,Ha=0,Ma=a.VibratoFrequency*y/k,$=a.VibratoDepth,ra=1+3*s(a.VibratoFrequencySlide,3)/k,za=a.VibratoDepthSlide/k,ha=0,Ia=a.ChangeSpeed*k,ma=s(a.ChangeAmount,2),ma=0<a.ChangeAmount?1+10*ma:1-0.9*ma,Aa=Array(1024),h=0;1024>h;h++)Aa[h]=0;var Ba=0,ca=1020*s(a.PhaserOffset,2),na=4E3*s(a.PhaserSweep,3)/k,L=1E-5<c(na)||1E-5<c(ca),N=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,t=0,T=0,ia=s(a.LPFilterCutoff,3)/10,H=1+a.HPFilterCutoffSweep/1E4,da=5/(1+20*s(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);
0.8<da&&(da=0.8);var da=1-da,Ua=0.999>a.LPFilterCutoff,sa=0,Y=s(a.HPFilterCutoff,2)/10,z=1+a.HPFilterCutoffSweep/1E4,Ca=0,u=Q;0<a.RepeatSpeed&&(u=s(1-a.RepeatSpeed,2)*k+32);for(var Va=a.MasterVolume,Na=0,h=0;h<Q;h++)E=ka(ga,S,0),S+=Ta,0>S?S=0:0.5<S&&(S=0.5),Ca>u&&(ga=0,U=a.StartFrequency*y/k,ba=1+3*s(a.Slide,3)/k,X=s(a.DeltaSlide,3)/(1E3*k),void 0!==B&&(X/=B),ha=0,Ia=a.ChangeSpeed*k,ma=1+(a.ChangeAmount|0)/12,Ca=0),Ca+=1,ga+=U,ba+=X,U*=ba,ha>Ia&&(U*=ma,Ia=Q),ha+=1,U>la?U=la:U<ya&&(U=ya),Ha+=Ma,v=
U*n(Ha)*$,ga+=v,Ma*=ra,za&&($+=za,0>$?za=$=0:1<$&&($=1,za=0)),N&&(0.0010<c(Y)&&(Y*=z,1E-5>Y?Y=1E-5:0.1<Y&&(Y=0.1)),v=t,ia*=H,0>ia?ia=0:0.1<ia&&(ia=0.1),Ua?(T+=(E-t)*ia,T*=da):(t=E,T=0),t+=T,sa+=t-v,E=sa*=1-Y),L&&(ca+=na,0>ca&&(ca=-ca,na=-na),1023<ca&&(ca=1023,na=0),Aa[Ba]=E,E+=Aa[Ba-(ca|0)+1024&1023],Ba=Ba+1&1023),h>I&&(K+=1,v=K<D?m[K]:{M:0,Y:0,X:Q},G=v.M,Fa=(v.Y-v.M)/(v.X+1),I+=v.X),E*=G,G+=Fa,E*=Va,1<B?(qa+=E,0===(h+1)%B&&(Ga[Na]=qa/B,Na+=1,qa=0)):Ga[h]=E;a=k/100|0;y=Array(a);for(h=0;h<a;h++)y[h]=
0;return y.concat(Ga).concat(y)};this.ea=this.Ma()}).apply(La);var gb={};(function(){this.ya=function(a){a=La.za(this.Ja(a));return pa.Pa(a)};this.Ja=function(a){for(var y={},n=La.ea.length,s=0;s<n;s++)y[La.ea[s].id]=a[s];return y}}).apply(gb);(function(){var a,y,n,s;function c(f,b,a){f.addEventListener?f.addEventListener(b,a,!1):f.attachEvent?f.attachEvent("on"+b,a):f["on"+b]=a}function k(f,b,a,O,d,e){var c=da[f].frame,k=da[f].g;f=da[f].frames;O=e?f[Math.floor(e*O/1E3)%f.length]:f[O];d?p.drawImage(Wa,mb-(c.x+O.x)-O.a,c.y+O.y,O.a,O.b,b+k.x,a+k.y,O.a,O.b):p.drawImage(ta,c.x+O.x,c.y+O.y,O.a,O.b,b+k.x,a+k.y,O.a,O.b)}function B(f,b,a,O,d){var c=da[f].frame;f=da[f].g;p.drawImage(ta,c.x,c.y,O||c.a,d||c.b,b+f.x,a+f.y,f.a,f.b)}function m(f){var b=
f.clientX-e.W.left;f=f.clientY-e.W.top;b=Math.max(0,Math.min(b,L-1));f=Math.max(0,Math.min(f,N-1));return[b,f]}function D(f,b,a,d,c,e,k){var h=f.fillStyle,n=f.textAlign,p=f.font;f.fillStyle=c;f.font=k;f.textAlign=e;for(b=b.slice();0<b.length;)f.fillText(b.shift(),a,d),d+=10;f.fillStyle=h;f.font=p;f.textAlign=n}function h(f){ea.style.cursor=f?"auto":"none"}function v(f,b){if(sa)try{Oa[f]=gb.ya(b)}catch(a){}}function G(f){if(sa)try{Oa[f]&&(Oa[f].pause(),Oa[f].currentTime=0,Oa[f].play())}catch(b){}}
function K(f,b){var a=document.getElementById(f);c(a,Pa,function(){W.Q({keyCode:b})});c(a,Xa,function(){W.R({keyCode:b})})}function Fa(f,b,a){f=document.getElementById(f);c(f,Pa,b);c(f,Xa,a)}function I(f,b,a,d){var c=Object.create(yb);c.position=b;c.text=[f];c.color=a;c.time=ua+Na;c.Aa=d||!1;Qa.push(c)}function Q(f,b,a,d,c){var e=Object.create(zb);e.position=f;e.e=b;e.color=a;e.time=ua+Ab;e.size=d;e.speed=c;Ra.push(e)}function Ga(f){var b=f[r.Z],a,d,c,e;Ya.T=b;for(var k=P.length=0;k<f[r.m].length;k++)a=
f[r.m][k],d=Object.create(Ya),d.size=a,c=document.createElement("canvas"),c.width=Ja+a,c.height=Ja+a,e=c.getContext("2d"),e.fillStyle="#ea0",e.strokeStyle="#330",e.fillRect(0,0,Ja+a,Ja+a),e.strokeRect(0,0,Ja+a,Ja+a),e.fillStyle="#000",e.fillText(a,5,10),d.ha=c,c=b[0]+16*k,a=b[1]-a,d.position=[c,a],d.T=[c,a],P.push(d)}function E(f){f=e.l=A[f]||A[w];b.position=f[r.da].slice();b.p=0;b.q=0;b.ia=0;b.c=void 0;b.L=nb;b.s=!1;b.B=!1;b.t=!1;b.d=!1;b.r=!1;d.O=ob;d.h=0;d.C=0;d.position=f[r.U].slice();d.e=f[r.U].slice();
a=f[r.F].slice();y=[f[r.F][0]+15,f[r.F][1]+23];n=y.slice();s=1;J.position=J.e=null;e.time=0;qa(u.i);R=0;Da.length=0;va.length=0;Qa.length=0;Ra.length=0;ja="4444444444444444444444444444444444444444"+f[r.ca]+"4444444444444444444444444444444444444444";ja=ja.split("");Ka=null;Ga(f);Za=Y.slice();window.localStorage&&(window.localStorage.sa=JSON.stringify(A))}function qa(b){e.state=b;if(aa){var a=document.getElementsByClassName("edit");b="btn edit"+(b===u.f?"":" h");for(var c=0;c<a.length;c++)a[c].setAttribute("class",
b)}}function ka(b){qa(u.j);e.time=ua+e.l[r.K];sa&&($a=b+Ca);h()}function S(b){e.fa+=1;h(!0);G(z.wa);ab=!0;E(w);bb=b+pb}function Ta(b){e.ga+=1;h(!0);G(z.oa);ab=!1;E(w);bb=b+pb}function ga(b,a){return Math.round(b[0]/t)===Math.round(a[0]/t)&&Math.round(b[1]/t)===Math.round(a[1]/t)}function U(b,a){return Math.atan((a[1]-b[1])/(a[0]-b[0]))}function ba(b,a){return b&&a&&Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))}function X(b,a){return ja[T*Math.floor(a/t)+Math.floor(b/t)]}function ya(b,a,c,
d,e){var k=a,h=X(b,k);c=b+c;topRight=X(c,k);bottomRight=X(c,a+d);bottomLeft=X(b,a);return h===e||topRight===e||bottomRight===e||bottomLeft===e}function la(b,a,c,d,e){a+=d;d=X(b,a);bottomLeft=X(b+c,a);return d===e||bottomLeft===e}function Ha(){h(!0);e.state===u.f&&(A[w][r.ca]=ja.join("").substring(T,T*ia-T),A[w][r.da]=b.position.slice(),A[w][r.U]=d.position.slice(),A[w][r.F]=a.slice(),A[w][r.Z]=Ya.T.slice());E(w)}function Ma(){var a=b.q,c=$();if(b.d)a=b.q;else if(b.t)a=Math.min(c,a+c/25);else if(a*=
Math.min(0.2*c,0.8),0.2>a||ra(F.n))a=0;b.q=a;if(b.S&&!b.d)for(var d=2*c;0<d--;)Q(b.position.slice(),[b.position[0]-Math.floor(64*Math.random()-32),b.position[1]-Math.ceil(20*Math.random()-5)],"#04f",Math.ceil(2*Math.random()),Math.ceil(5*Math.random()));return ra(F.n)?c/2:a}function $(){return Math.max(1,b.speed+b.S-(void 0!==b.c?P[b.c].size:0))}function ra(a){return ya(b.position[0]-8,b.position[1]-32,16,32,a)||ya(b.position[0],b.position[1]-8,0,0,a)}function za(b){b.preventDefault();if(e.state===
u.f)hb=!hb;else if(e.state===u.j&&d.C<ua){b=m(b);var a=d.h;if((la(d.position[0]-8,d.position[1]-8,16,16,F.v)||ya(d.position[0],d.position[1],0,0,F.v))&&d.h<Bb)G(z.aa),d.h++,I("+"+(d.h-a)+"\u21a1",[d.position[0]-4,d.position[1]-4],"#0c0");else{var c;for(c=0;c<Da.length;c++)if(ga(b,Da[c].position)){d.h=Math.max(d.h,Cb);I("+"+(d.h-a)+"\u21a1",[d.position[0]-4,d.position[1]-4],"#0c0");G(z.aa);Da.splice(c,1);break}}}}function ha(){if(e.state===u.f)if(R<Ea){var f=T*Math.floor(x[1]/t)+Math.floor(x[0]/t);
f<ja.length&&(ja[f]=""+R)}else if(R===wa.ta)b.position=x.slice();else if(R===wa.u)d.position=x.slice();else if(R===wa.D)a=x.slice(),y=[a[0]+15,a[1]+23],n=y.slice();else{if(R===wa.m)for(Ya.T=x.slice(),f=0;f<P.length;f++){var c=P[f];c.position[0]=x[0]+16*f;c.position[1]=x[1]-c.size}}else e.state!==u.i||aa?0<d.h&&d.C<ua&&(d.h--,G(z.na),f=Object.create(Db),f.position=d.position.slice(),va.push(f)):x[0]>d.position[0]-16&&(x[0]<d.position[0]+16&&x[1]>d.position[1]-16&&x[1]<d.position[1]+16)&&ka(ua)}function Ia(b){for(var a=
60;0<a--;)Q(d.position.slice(),[d.position[0]-Math.floor(128*Math.random()-64),d.position[1]+Math.ceil(128*Math.random()-64)],"#000",Math.ceil(3*Math.random()),Math.ceil(2*Math.random()));d.C=b+Eb;G(z.qa);d.h=0;d.O--;I("-1\u2665",[d.position[0]-4,d.position[1]-4],"#c00");0>=d.O?S(b):d.O<qb&&ma(b);ib=b+Va}function ma(b){if(!Ka){Ka=[];for(var a=0;a<ja.length;a++)ja[a]===F.w&&Ka.push(a);G(z.ka)}a=Ka[Math.floor(Math.random()*Ka.length)]+1;a=[a%T*t,Math.floor(a/T)*t];J.e=[a[0]-6,a[1]-10];J.position?G(z.la):
(J.position=J.e.slice(),I("meow...",[J.position[0],J.position[1]-4],"#ccc",!0));J.Ba=b+Fb;s+=0.05}function Aa(f,c){for(var d=60;0<d--;)Q(b.position.slice(),[b.position[0]-Math.floor(128*Math.random()-64),b.position[1]-16-Math.ceil(128*Math.random()-64)],"#ea0",Math.ceil(3*Math.random()),Math.ceil(4*Math.random()));I(0.5<Math.random()?"My mirrors!":"Be careful!",[a[0]+4,a[1]],"#ccc",!0);G(z.ua);b.c=void 0;f.position=f.T.slice();b.L--;I("-1\u25fc",[b.position[0]-4,b.position[1]-32],"#c00");ib=c+Va;
0>=b.L?Ta(c):b.L<qb&&ma(c)}function Ba(b){var a=b||A[w];b=[b?a[r.I]:"CustomLevel"+Gb++,a[r.da].slice(),a[r.U].slice(),a[r.Z].slice(),a[r.F].slice(),a[r.K],a[r.ca],a[r.m].slice(),null,!0];A.push(b);e.state===u.i&&(w=A.length-1,E(w))}function ca(a,b,c){var d=null,e=J.position?"#c29":"#00deff";a===F.w?d=H.w:a===F.J?d=H.J:a===F.Ia?e="#000":a===F.pa?e="#0f0":a===F.v?d=H.v:a===F.n?d=H.n:a===F.o&&(d=H.o);p.fillStyle=e;p.fillRect(b,c,t,t);null!==d&&B(d,b,c,t,t)}function na(a,b){if(a.position&&a.e){var c=
U(a.position,a.e),d=a.position[0]>a.e[0]?-1:1,e=Math.abs(a.position[0]-a.e[0]),k=Math.abs(a.position[1]-a.e[1]);if(3<e||3<k){var h=Math.cos(c)*d*b,c=Math.sin(c)*d*b;Math.abs(h)>e&&(h=e*h/Math.abs(h));Math.abs(c)>k&&(c=k*c/Math.abs(c));a.position[0]+=h;a.position[1]+=c;return!0}return!1}}var L=640,N=400,t=16,T=L/t,ia=N/t,H={u:0,Ga:1,o:2,D:3,n:4,H:5,v:6,J:7,Ha:8,w:9,Da:10,Ea:11},da=[{frame:{x:30,y:0,a:30,b:14},g:{x:1,y:1,a:30,b:14},frames:[{x:1,y:1,a:15,b:11},{x:17,y:1,a:15,b:13}]},{frame:{x:14,y:40,
a:14,b:8},g:{x:1,y:7,a:14,b:8}},{frame:{x:32,y:14,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:24,a:14,b:24},g:{x:1,y:7,a:14,b:24}},{frame:{x:16,y:48,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:0,a:30,b:24},g:{x:1,y:3,a:30,b:24},frames:[{x:0,y:0,a:15,b:24},{x:16,y:0,a:13,b:24}]},{frame:{x:48,y:14,a:16,b:10},g:{x:0,y:10,a:16,b:10}},{frame:{x:14,y:24,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:31,y:32,a:6,b:14},g:{x:4,y:1,a:6,b:14}},{frame:{x:0,y:48,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:36,
y:32,a:11,b:13},g:{x:0,y:0,a:12,b:13}},{frame:{x:49,y:25,a:15,b:16},g:{x:0,y:0,a:15,b:16}}],Ua=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],sa=!(!window.btoa||!window.atob),Y="023123467".split(""),z={ra:0,ua:1,na:2,Fa:3,$:4,ma:5,wa:6,oa:7,ja:8,aa:9,o:10,qa:11,ka:12,la:13,va:14},Ca=200,u={i:0,j:1,f:2},Va=500,Na=1500,Ab=1500,pb=2E3,F={EMPTY:"0",w:"1",n:"2",J:"3",Ia:"4",pa:"5",v:"6",o:"7"},Ea=8,wa={ta:Ea+0,u:Ea+1,D:Ea+2,m:Ea+3},jb=Ea+4,Bb=3,Cb=5,Eb=5E3,ob=10,qb=4,Fb=2E3,nb=10,Ja=12,
rb=[1,-6],r={I:0,da:1,U:2,Z:3,F:4,K:5,ca:6,m:7,G:8,V:9},ea=document.getElementById("C"),p=ea.getContext("2d"),ta=new Image,Wa=document.createElement("canvas"),mb=0,cb=document.createElement("canvas"),M=cb.getContext("2d"),Oa=[],sb={},Za=null,$a=0,x=null,db=!1,Z=!1,W={P:{},R:function(a){W.P[a.keyCode]=void 0},Q:function(a){W.P[a.keyCode]=ua}},aa=!1,Sa=document.getElementById("o"),oa=Sa.getBoundingClientRect(),tb=[100,100],kb=!1,xa=null,Pa=null,Xa=null,ub=null,ua=0,e={state:u.i,W:ea.getBoundingClientRect(),
time:0,fa:0,ga:0,l:null},ib=0,bb=0,ab=void 0,yb={position:null,text:void 0,color:"#0f0",time:0,Aa:!1},Qa=[],ja=[],Ka=null,R=0,hb=!1,b={position:null,speed:4,q:0,S:0,ia:0,Oa:2,Na:-6.8,A:!1,B:!1,d:!1,t:!1,s:!1,k:0,c:void 0,p:0,L:nb,Ua:!1},d={position:null,e:null,h:0,C:0,O:ob};n=y=a=null;s=1;var J={position:null,e:null,Ba:0},Ya={ha:null,size:1,position:null,T:[0,0]},P=[],Hb={position:null},Da=[],Db={position:null,speed:6},va=[],zb={position:null,e:null,color:"#000",size:2,time:0,speed:2},Ra=[],vb=[["Tutorial",
[33,370],[L-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000550000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,[(aa?"I":"SPACEBAR")+": grab/release crate"]],[500,340,["UP/DOWN: Climb"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(aa?"I":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(aa?"analogPad":"Mouse")+": move"]],[390,80,["Hide from granny in nest"]],[390,130,[(aa?"A":"RClick")+": eat from nest or crumbs",(aa?"S":"LClick")+
": shoot!"]],[150,70,["Don't touch roofs or Luke"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000111000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300033000000000000000000000000000000000000000000000000000000000000000000000000550000020000000000000200000000000000000055020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000700001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000000000000000000033000000000330000000000000055000000000000000000000000000000000000005500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000600000000000000112110000002020000060000111000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[96,316],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 4",[75,370],[L-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000600000000000000000000000000000000000000011055000000000000000000000003333000000000005500000000000000002000000000000000000001111110010011001111211110011110000000000000000000003300000000000000000100000000000000000000000000700000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330112100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010101010111000020200000000211111111111111000000033311001111011100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011121111001111112011111002000000000000000000000000303030200000000000000000000000000007000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[1,2,3]]],A=window.localStorage&&window.localStorage.sa&&JSON.parse(window.localStorage.sa)||vb,Gb=A.length-vb.length+1,w=0;(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e})})();if("ontouchstart"in document.documentElement||
window.navigator.msMaxTouchPoints)for(var aa=!0,Pa=window.navigator.msMaxTouchPoints?"MSPointerDown":"touchstart",Xa=window.navigator.msMaxTouchPoints?"MSPointerUp":"touchend",ub=window.navigator.msMaxTouchPoints?"MSPointerMove":"touchmove",lb=document.getElementsByClassName("btn"),eb=0;eb<lb.length;eb++)-1===lb[eb].getAttribute("class").indexOf("edit")&&lb[eb].setAttribute("class","btn");ta.onload=function(){Wa.width=mb=ta.naturalWidth;Wa.height=ta.naturalHeight;var a=Wa.getContext("2d");a.translate(ta.naturalWidth,
0);a.scale(-1,1);a.drawImage(ta,0,0)};ta.src="imgmap.png";cb.width=L;cb.height=N;for(var fb=0;fb<Ua.length;fb++)sb[fb]=gb.ya(["synth",0,0.1,0,0.208,0,0.12,20,Ua[fb],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);Za=Y.slice();v(z.ra,["square",0,0.3,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);v(z.ua,["noise",0,0.3,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);v(z.ma,["square",0,0.3,0,0.098,0.504,0.282,20,1582,2400,
0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);v(z.ja,["saw",0,0.3,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);v(z.na,["saw",0,0.3,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);v(z.oa,["synth",0,0.3,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);v(z.wa,["synth",0,0.3,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);v(z.$,["noise",0,0.3,
0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);v(z.Fa,["noise",0,0.3,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);v(z.aa,["square",0,0.3,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);v(z.o,["square",0,0.3,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);v(z.qa,["noise",0,0.3,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,
0,0,0,0,1,0,0,0,0]);v(z.ka,["synth",0,0.3,0,0.44,0.579,1.004,20,1793,2400,-0.202,0,0,8.6962,0.5346,0.666,-0.298,0.671,0,0,0,0,0,1,0,0,0,0]);v(z.la,["noise",0,0.127,0.043,0.124,0,0.282,20,2400,20,1,-1,0,0.01,-0.3,-1,0.956,0.272,0,0.68,0,-0.998,-1,1,1,0,0,-0.998]);v(z.va,["noise",0,0.126,0,0.07,0,0.232,2400,2400,2400,-1,-1,0,0.01,-0.3,-1,-1,0,0,-1,0,0.0040,0,1,1,0,0,-1]);window.addEventListener("keyup",W.R,!1);window.addEventListener("keydown",W.Q,!1);if(aa){c(ea,Pa,function(){e.state===u.i&&ka()});
Fa("s",function(){e.state===u.i?W.Q({keyCode:68}):ha()},function(){W.R({keyCode:68})});Fa("a",function(a){e.state===u.i?W.Q({keyCode:74}):za(a)},function(){W.R({keyCode:74})});Fa("i",function(){W.Q({keyCode:e.state===u.i?73:32})},function(){W.R({keyCode:e.state===u.i?73:32})});K("x",27);K("e",69);K("l",37);K("u",38);K("r",39);K("d",40);K("c",67);K("t",84);K("n",78);var wb=function(a){a.preventDefault();xa=a.changedTouches||a;oa=Sa.getBoundingClientRect();kb=!0};c(Sa,Pa,wb);c(Sa,ub,wb);c(Sa,Xa,function(a){a.preventDefault();
kb=!1});c(document.body,"contextmenu",function(a){a.preventDefault()})}else c(ea,"click",ha),c(ea,"contextmenu",za),c(ea,"mousedown",function(a){1===a.which&&(db=!0);e.state===u.f&&db&&ha()}),c(ea,"mouseup",function(a){1===a.which&&(db=!1)}),c(ea,"mousemove",function(a){var b=m(a);x=[b[0],b[1]];e.state===u.j?(a=m(a),d.e=a.slice()):e.state===u.f&&db&&ha()});E(w);(function xb(c){var h=c;if(!(bb>h)){$();var m=b.Oa,v=b.position[0],K=b.position[1],q=W.P;if(e.state===u.i)if(q[37]&&!Z)w=(w+A.length-1)%A.length,
E(w);else if(q[39]&&!Z)w=(w+1)%A.length,E(w);else if(q[69]&&!Z)A[w][r.V]||Ba(),qa(u.f),q[69]=void 0;else if(q[68]&&!Z)A[w][r.V]&&(A.splice(w,1),w--,E(w)),q[68]=void 0;else if(q[74]&&A[w][r.V]&&!Z)m=prompt("Data",JSON.stringify(A[w])),q[74]=void 0;else{if(q[73]){if(m=prompt("Data"))try{Ba(JSON.parse(m))}catch(X){alert("Error!")}q[73]=void 0}}else{if(e.state===u.f)if(q[37]&&!Z)R=(R+jb-1)%jb;else if(q[39]&&!Z)R=(R+1)%jb;else if(q[67]&&!Z){try{var V=JSON.parse(prompt("Crates",JSON.stringify(A[w][r.m])));
if(V instanceof Array){for(m=0;m<V.length;m++)"number"===!typeof m&&alert("Error!"),V[m]=Math.max(1,Math.min(5,V[m]));A[w][r.m]=V;Ga(A[w])}}catch(da){alert("Error!")}q[67]=void 0}else q[78]&&!Z?((m=prompt("Name",A[w][r.I]))&&(A[w][r.I]=m),q[78]=!1):q[84]&&!Z?(h=+prompt("Time",A[w][r.K]),!isNaN(h)&&0<h&&(A[w][r.K]=h),q[84]=!1):q[69]&&!Z&&(Ha(),q[69]=void 0);else if(e.state===u.j){if(!q[32]||b.B||b.d||b.s)q[69]&&!b.s?(b.s=!0,0<b.p&&(b.p--,b.S=3,b.ia=h+5E3,V=Object.create(Hb),V.position=[b.position[0]+
4,b.position[1]-7],Da.push(V),G(z.ja))):q[32]||(q[69]||!b.s)||(b.s=!1);else{b.s=!0;a:{var V=h,h=b.c,Y=void 0!==h?P[h]:void 0;if(void 0===Y){for(V=0;V<P.length;V++)if(ga(b.position,P[V].position)){b.c=V;G(z.$);break a}ra(F.o)&&3>b.p&&(I("+"+(3-b.p)+"\u00a7",[b.position[0]-4,b.position[1]-32],"#0c0"),b.p=3,G(z.o))}else if(b.c=void 0,G(z.$),ra(F.pa)&&void 0!==Y){P.splice(h,1);for(h=60;0<h--;)Q(b.position.slice(),[b.position[0]-Math.floor(128*Math.random()-64),b.position[1]-16-Math.ceil(128*Math.random()-
64)],"#0c0",Math.ceil(4*Math.random()),Math.ceil(6*Math.random()));I(0.5<Math.random()?"Thank you!":"Good boy!",[a[0]+4,a[1]],"#ccc",!0);0>=P.length?S(V):G(z.ma)}}}q[38]?ra(F.n)?(b.position[1]=Math.min(N-t,K-m),b.A=!0):b.B||b.d||(b.k=b.Na,b.B=!0,b.d=!0,b.A=!1,G(z.ra)):!q[38]&&b.B?(b.B=!1,b.A=!1):q[40]&&ra(F.n)?(b.position[1]=Math.min(N,K+m),b.A=!0):b.A=!1;q[37]&&!b.d?(b.t=!0,b.r=!0):q[39]&&!b.d?(b.t=!0,b.r=!1):b.t=!1;if(b.t||0<b.q)b.position[0]=Math.min(L-t,Math.max(t,v+(b.r?-1:1)*Ma()))}q[27]&&Ha()}Z=
!1;for(var fa in W.P)Z=Z||!!W.P[fa]}ua=c;try{$a<c&&e.state===u.j&&0<Za.length&&(sb[Za.shift()].play(),$a+=Ca)}catch(ka){}if(kb&&xa){var C;if(xa.clientX)C=xa;else if(xa instanceof TouchList)for(fa=0;fa<xa.length;fa++)if(q=xa[fa],q.clientX>=oa.left&&q.clientX<oa.left+oa.width&&q.clientY>=oa.top&&q.clientY<oa.top+oa.height){C=xa[fa];break}if(C){C=[C.clientX-oa.left,C.clientY-oa.top];q=U(tb,C);fa=ba(tb,C)/12.5;var l;e.state===u.j?l=d.position:e.state===u.f&&(l=x);l&&(l[0]+=(e.state===u.f?Math.round(Math.cos(q)):
Math.cos(q))*(100>C[0]?-fa:fa),l[1]+=(e.state===u.f?Math.round(Math.sin(q)):Math.sin(q))*(100>C[0]?-fa:fa),l[0]=Math.max(0,Math.min(l[0],L-1)),l[1]=Math.max(0,Math.min(l[1],N-1)));hb&&ha()}}if(e.state===u.j){e.W=ea.getBoundingClientRect();C=2;var g;l=0;if(!b.d&&la(b.position[0]-4,b.position[1],8,0,F.w))g=b.position[1]-b.position[1]%t;else for(;C<=b.k;){if(la(b.position[0]-4,b.position[1]+C,8,0,F.w)){g=b.position[1]+C-(b.position[1]+C)%t;break}C+=t}if(g){b.position[1]=g;b.d&&(b.q/=2,g=void 0!==b.c&&
P[b.c])&&(C=13-g.size,l=g.size,b.k>C&&Aa(g,c));b.d=!1;if(b.k>10-2*l){for(g=3*b.k;0<g--;)Q(b.position.slice(),[b.position[0]-Math.floor(64*Math.random()-32),b.position[1]+Math.ceil(10*Math.random()-5)],"#dda",Math.ceil(2*Math.random()),Math.ceil(5*Math.random()));G(z.va)}b.k=0}else la(b.position[0]-4,b.position[1]-32,8,16,F.n)?(b.d=!1,b.k=0):(b.k+=0.6,b.d=!0,b.position[1]+=b.k);void 0!==b.c&&(P[b.c].position[0]=b.position[0]+rb[0],P[b.c].position[1]=b.position[1]+rb[1]);b.ia<c&&0<b.S&&(b.S=0);for(g=
0;g<va.length;g++)if(l=va[g],l.position[1]+=l.speed,ga(b.position,l.position)&&void 0!==b.c)Aa(P[b.c],c),va.splice(g,1),g--;else if(l.position[1]>N||la(l.position[0],l.position[1],0,0,F.J))va.splice(g,1),g--;e.time<c&&Ta(c);na(d,16);J.position&&(void 0!==b.c&&15>ba(b.position,J.position)&&Aa(P[b.c],c),15>ba(d.position,J.position)&&Ia(c),J.Ba<c&&ma(c),na(J,16));g=la(d.position[0],d.position[1],0,0,F.v)?y:d.position;l=U(n,g);C=n[0]>g[0]?-1:1;if(3<Math.abs(g[0]-n[0])||3<Math.abs(g[1]-n[1]))n[0]+=Math.cos(l)*
C*s,n[1]+=Math.sin(l)*C*s;(7*$()+25>=ba(d.position,b.position)||ya(d.position[0],d.position[1],0,0,F.J)||3>ba(n,d.position))&&d.C<c&&Ia(c)}e.W=ea.getBoundingClientRect();p.fillStyle="#000";p.fillRect(0,0,L,N);q=C=0;ib>c&&(C=Math.floor(6*Math.random()-3),q=Math.floor(6*Math.random()-3));for(g=0;g<T;g++)for(l=0;l<ia;l++)ca(ja[T*l+g],g*t+C,l*t+q);for(l=0;l<P.length;l++)l!==b.c&&(g=P[l],p.drawImage(g.ha,g.position[0]-8,g.position[1]-8));for(l=0;l<Da.length;l++)g=Da[l],B(H.Ga,g.position[0]-8,g.position[1]-
8);for(l=0;l<va.length;l++)g=va[l],B(H.Ha,g.position[0]-8,g.position[1]-8);B(H.D,a[0],a[1]);if(e.l[r.G])for(g=0;g<e.l[r.G].length;g++)D(p,e.l[r.G][g][2],e.l[r.G][g][0],e.l[r.G][g][1],"#000");J.position&&B(5<ba(J.position,J.e)?H.Ea:H.Da,J.position[0]-8,J.position[1]);e.state===u.j?b.d?k(H.H,b.position[0]-8,b.position[1]-24,0,b.r):b.t||b.A?k(H.H,b.position[0]-8,b.position[1]-24,10,b.r,c):k(H.H,b.position[0]-8,b.position[1]-24,1,b.r):k(H.H,b.position[0]-8,b.position[1]-24,1);void 0!==b.c&&(g=P[b.c],
p.drawImage(g.ha,b.r?g.position[0]+2:g.position[0]-15-g.size,g.position[1]-10));7*$()+75>=ba(d.position,b.position)&&(p.beginPath(),p.arc(b.position[0],b.position[1],7*$()+25,0,360),p.lineWidth=2,p.strokeStyle="#f09",p.stroke());e.state===u.j?d.C>c&&0===Math.floor(c/100)%2||k(H.u,d.position[0]-8,d.position[1]-8,2,!1,c):k(H.u,d.position[0]-8,d.position[1]-8,0);p.fillStyle="red";p.fillRect(n[0]-1,n[1]-1,2,2);p.beginPath();p.arc(n[0],n[1],5,0,360);p.lineWidth=2;p.strokeStyle="red";p.stroke();p.fillStyle=
"white";e.state===u.j?(l=Math.max(0,Math.ceil((e.time-c)/1E3)),g=l%60,l=Math.floor(l/60),10>g&&(g="0"+g),p.fillText("\u00a7 "+b.p+"   \u25fc "+b.L+"   \u2699 "+l+":"+g,50,396),p.fillText("\u21a1 "+d.h+"   \u2665 "+d.O,540,12),p.fillStyle="#00deff",p.fillText("LUKE",10,396),p.fillStyle="red",p.fillText("CROW",600,12)):e.state===u.f&&p.fillText("< > CHANGE BLOCK   C: CRATES   T: TIME ("+A[w][r.K]+")   N: NAME ("+A[w][r.I]+")"+(aa?"   S: PAINT   A: TOGGLE PAINT   analogPad: MOVE":""),12,12);for(l=0;l<
Ra.length;l++)if(g=Ra[l],p.fillStyle=g.color,p.fillRect(g.position[0],g.position[1],g.size,g.size),!na(g,g.speed)||g.time<c)Ra.splice(l,1),l--;for(l=0;l<Qa.length;l++)g=Qa[l],g.time<c?(Qa.splice(l,1),l--):(D(p,g.text,g.position[0]+1,g.position[1]+1,"#000","center","14px sans-serif"),D(p,g.text,g.position[0],g.position[1],g.color,"center","14px sans-serif"),g.Aa||(g.position[1]-=0.5));e.state===u.i&&(g=e.l,M.clearRect(0,0,L,N),M.fillStyle="rgba(0,0,0,0.7)",M.fillRect(0,0,L,N),M.fillStyle="#fff",M.textAlign=
"center",M.font="20px courier",M.fillText(e.l[r.I],L/2,N/2-50),D(M,["Luke "+e.fa],L/2-50,N/2,!0===ab?"#0f0":"#fff","right"),D(M,[e.ga+" Crow"],L/2+50,N/2,!1===ab?"#0f0":"#fff","left"),M.font="15px courier",M.fillText("A 13kB game by Alberto Congiu",L/2,12),bb<c&&(M.fillText("Click the "+(aa?"screen":"crow")+" to start",L/2,N/2+60),M.fillText("< >: Select level",L/2,N/2+100),M.fillText(g[r.V]?"E: EDIT   "+(aa?"S":"D")+": DELETE   "+(aa?"A":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",L/2,N/2+
120)),M.beginPath(),M.arc(d.position[0],d.position[1],16,0,360),M.lineWidth=2,M.strokeStyle="#fff",M.stroke(),p.drawImage(cb,0,0));e.state===u.f&&(p.globalAlpha=0.6,R<Ea?(ca(""+R,x[0]-x[0]%t,x[1]-x[1]%t),p.strokeStyle="#000",p.strokeRect(x[0]-x[0]%t,x[1]-x[1]%t,t,t)):R===wa.ta?k(H.H,x[0]-8,x[1]-24,1):R===wa.u?k(H.u,x[0]-8,x[1]-8,0):R===wa.D?B(H.D,x[0],x[1]):R===wa.m&&(p.fillStyle="#ea0",p.strokeStyle="#330",p.fillRect(x[0]-8,x[1]-8,16,16),p.strokeRect(x[0]-8,x[1]-8,16,16),p.fillStyle="#000",p.fillText("C",
x[0]-4,x[1]+4)),p.globalAlpha=1);window.requestAnimationFrame(xb)})()})();

(function(){var a={Z:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ia:function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(a){var e=Error("DOM Exception 5");e.code=e.bb=5;e.name=e.description="INVALID_CHARACTER_ERR";e.toString=function(){return"Error: "+e.name+": "+e.message};return e}},Na:function(d,e){var c=a.ALPHA.indexOf(d.charAt(e));if(-1===c)throw a.ia();return c},Ha:function(d){d=""+d;var e=a.Na,c,v,f,g=d.length;if(0===g)return d;if(0!==
g%4)throw a.ia();c=0;d.charAt(g-1)===a.Z&&(c=1,d.charAt(g-2)===a.Z&&(c=2),g-=4);var l=[];for(v=0;v<g;v+=4)f=e(d,v)<<18|e(d,v+1)<<12|e(d,v+2)<<6|e(d,v+3),l.push(String.fromCharCode(f>>16,f>>8&255,f&255));switch(c){case 1:f=e(d,v)<<18|e(d,v+1)<<12|e(d,v+2)<<6;l.push(String.fromCharCode(f>>16,f>>8&255));break;case 2:f=e(d,v)<<18|e(d,v+1)<<12,l.push(String.fromCharCode(f>>16))}return l.join("")},Ma:function(d,e){var c=d.charCodeAt(e);if(255<c)throw a.ia();return c},Ja:function(d){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");
var e=a.Z,c=a.ALPHA,v=a.Ma,f,g,l=[];d=""+d;var A=d.length-d.length%3;if(0===d.length)return d;for(f=0;f<A;f+=3)g=v(d,f)<<16|v(d,f+1)<<8|v(d,f+2),l.push(c.charAt(g>>18)),l.push(c.charAt(g>>12&63)),l.push(c.charAt(g>>6&63)),l.push(c.charAt(g&63));switch(d.length-A){case 1:g=v(d,f)<<16;l.push(c.charAt(g>>18)+c.charAt(g>>12&63)+e+e);break;case 2:g=v(d,f)<<16|v(d,f+1)<<8,l.push(c.charAt(g>>18)+c.charAt(g>>12&63)+c.charAt(g>>6&63)+e)}return l.join("")}};window.btoa=a.Ja;window.atob=a.Ha})();var $={};
(function(a){function d(a,c){return c?v(a&255)+d(a>>8,c-1):""}var e=this.wa=a||44100,c=2*e,v=String.fromCharCode,f;this.Qa=function(a){var g=Audio,v=btoa,k="",B=a.length;for(l=0;l<B;l++)var L=32767*a[l]|0,L=-32768>L?-32768:32767<L?32767:L,L=L+(0>L?65536:0),k=k+String.fromCharCode(L&255,L>>8);a=k;a=["RIFF",36+(f=a.length),"WAVEfmt ",16,1,1,e,c,2,16,"data",f,a];k="";for(l=0;l<a.length;l++)k+="s"=="s4s4224422s4s"[l]?a[l]:d(a[l],"s4s4224422s4s".charCodeAt(l)-48);return new g("data:audio/wav;base64,"+v(k))};
var g,l,A=Math.sin,k=2*Math.PI;this.filter=function(a,c,d,e,f,v,k,A,D,C){d=d?d:1;e=e?e:a.length;g=a.slice(0);for(l=d;l<e;l++)g[l]=c(a,g,d,e,l,f,v,k,A,D,C);return g};this.filters={$a:function(a,c,d,e,f,g){return c[f-1]+g*(a[f]-c[f-1])},ab:function(a,c,d,e,f,g){return c[f-1]+g*(e-f)/(e-d)*(a[f]-c[f-1])},Za:function(a,c,d,e,f,g){return g*(c[f-1]+a[f]-a[f-1])}};this.za=function(a,c,d,f,g,v,A,D,T){c=c*k/e;var C=Array(a|0);for(l=0;l<a;l++)C[l]=d(l*c,f,g,v,A,D,T);return C};var D=0;this.I={Sa:function(a){4>
a%k&&(D=2*Math.random()-1);return D},cb:Math.random,Wa:Math.sin,Xa:function(a){return A(a)+0.5*A(a/2)+0.3*A(a/4)},Va:function(a){return 2*(a/k-(a/k+0.5|0))},Aa:function(a,c){return A(a)>c?1:A(a)<c?-1:c}}}).apply($);var sa={};
(function(){this.$=[];this.W={square:$.I.Aa,saw:$.I.Va,sine:$.I.Wa,noise:$.I.Sa,synth:$.I.Xa};this.Ka=function(){var a=[],d;for(d in this.W)a.push(d);return a};this.La=function(){function a(a,c,g,l,A){void 0===A&&(A=(g-c)/1E3);a={name:a,id:a.replace(/ /g,""),min:c,max:g,step:A,Ia:l,type:"range",group:e};d.push(a)}var d=[],e=0,c=this.Ka();(function(a,c,g){a={name:a,id:a.replace(/ /g,""),options:c,Ia:g,type:"option",group:e};d.push(a)})("Generator",c,c[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);e++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);e++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);e++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);e++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);e++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);e++;a("RepeatSpeed",
0,0.8,0);e++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);e++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return d};this.za=function(a){var d=2*Math.PI,e=Math.sin,c=Math.pow,v=Math.abs,f=$.wa,g=a.SuperSamplingQuality|0;1>g&&(g=1);for(var f=f*g,l=[{H:0,S:1,time:a.AttackTime},{H:1+a.SustainPunch,S:1,time:a.SustainTime},{H:1,S:0,time:a.DecayTime}],A=l.length,k=0;k<A;k++)l[k].P=1+(l[k].time*f|0);for(var D=
void 0,fa=0,G=-1,K=0,la=-1,B=0,k=0;k<A;k++)B+=l[k].P;B<f/2&&(B=f/2);var L=Array(B/g|0),M=0,aa=0,T=sa.W[a.Generator];void 0===T&&(T=this.W.Aa);var C=0,C=a.SquareDuty,ma=a.SquareDutySweep/f,ba=0,P=a.StartFrequency*d/f,na=1+64*c(a.Slide,3)/f,S=c(a.DeltaSlide,3)/(1E3*f);void 0!==g&&(S/=g);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var ca=a.MinFrequency*d/f,Y=a.MaxFrequency*d/f,ga=0,oa=a.VibratoFrequency*d/f,
Z=a.VibratoDepth,ta=1+3*c(a.VibratoFrequencySlide,3)/f,ha=a.VibratoDepthSlide/f,J=0,q=a.ChangeSpeed*f,U=c(a.ChangeAmount,2),U=0<a.ChangeAmount?1+10*U:1-0.9*U,u=Array(1024),k=0;1024>k;k++)u[k]=0;var t=0,Q=1020*c(a.PhaserOffset,2),ia=4E3*c(a.PhaserSweep,3)/f,E=1E-5<v(ia)||1E-5<v(Q),R=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,F=0,n=0,H=c(a.LPFilterCutoff,3)/10,pa=1+a.HPFilterCutoffSweep/1E4,w=5/(1+20*c(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<w&&(w=0.8);var w=1-w,ua=0.999>a.LPFilterCutoff,
x=0,V=c(a.HPFilterCutoff,2)/10,qa=1+a.HPFilterCutoffSweep/1E4,ja=0,za=B;0<a.RepeatSpeed&&(za=c(1-a.RepeatSpeed,2)*f+32);for(var Da=a.MasterVolume,va=0,k=0;k<B;k++)M=T(ba,C,0),C+=ma,0>C?C=0:0.5<C&&(C=0.5),ja>za&&(ba=0,P=a.StartFrequency*d/f,na=1+3*c(a.Slide,3)/f,S=c(a.DeltaSlide,3)/(1E3*f),void 0!==g&&(S/=g),J=0,q=a.ChangeSpeed*f,U=1+(a.ChangeAmount|0)/12,ja=0),ja+=1,ba+=P,na+=S,P*=na,J>q&&(P*=U,q=B),J+=1,P>Y?P=Y:P<ca&&(P=ca),ga+=oa,D=P*e(ga)*Z,ba+=D,oa*=ta,ha&&(Z+=ha,0>Z?ha=Z=0:1<Z&&(Z=1,ha=0)),R&&
(0.0010<v(V)&&(V*=qa,1E-5>V?V=1E-5:0.1<V&&(V=0.1)),D=F,H*=pa,0>H?H=0:0.1<H&&(H=0.1),ua?(n+=(M-F)*H,n*=w):(F=M,n=0),F+=n,x+=F-D,M=x*=1-V),E&&(Q+=ia,0>Q&&(Q=-Q,ia=-ia),1023<Q&&(Q=1023,ia=0),u[t]=M,M+=u[t-(Q|0)+1024&1023],t=t+1&1023),k>la&&(G+=1,D=G<A?l[G]:{H:0,S:0,P:B},fa=D.H,K=(D.S-D.H)/(D.P+1),la+=D.P),M*=fa,fa+=K,M*=Da,1<g?(aa+=M,0===(k+1)%g&&(L[va]=aa/g,va+=1,aa=0)):L[k]=M;a=f/100|0;d=Array(a);for(k=0;k<a;k++)d[k]=0;return d.concat(L).concat(d)};this.$=this.La()}).apply(sa);var Ea={};(function(){this.ya=function(a){a=sa.za(this.Ga(a));return $.Qa(a)};this.Ga=function(a){for(var d={},e=sa.$.length,c=0;c<e;c++)d[sa.$[c].id]=a[c];return d}}).apply(Ea);(function(){var a,d,e,c,v,f,g,l;function A(a,b,c,h,d){var e=O[a].frame;a=O[a].k;q.drawImage(da,e.x,e.y,h||e.b,d||e.c,b+a.x,c+a.y,a.b,a.c)}function k(a,b,c,h,d,e){var f=O[a].frame,g=O[a].k;a=O[a].frames;h=e?a[Math.floor(e*h/1E3)%a.length]:a[h];d?q.drawImage(Aa,Ga-(f.x+h.x)-h.b,f.y+h.y,h.b,h.c,b+g.x,c+g.y,h.b,h.c):q.drawImage(da,f.x+h.x,f.y+h.y,h.b,h.c,b+g.x,c+g.y,h.b,h.c)}function D(){var a=y[u],a={name:"CustomLevel"+ia++,s:a.s.slice(),r:a.r.slice(),o:a.o.slice(),j:a.j&&a.j.slice(),map:a.map,e:a.e.slice(),
l:a.l,O:!0};y.push(a);u=y.length-1}function fa(){s.g&&0<Fa.length&&(Ha[Fa.shift()].play(),setTimeout(fa,200))}function G(a,b){wa[a]=Ea.ya(b)}function K(a){wa[a]&&(wa[a].pause(),wa[a].currentTime=0,wa[a].play())}function la(a){var b=a.o,c,e,d,f;xa.F=b;for(var g=N.length=0;g<a.e.length;g++)c=a.e[g],e=Object.create(xa),e.size=c,d=document.createElement("canvas"),d.width=qa+c,d.height=qa+c,f=d.getContext("2d"),f.fillStyle="yellow",f.fillRect(0,0,qa+c,qa+c),f.fillStyle="black",f.fillText(c,5,10),e.ga=
d,d=b[0]+16*g,c=b[1]-c,e.position=[d,c],e.F=[d,c],N.push(e)}function B(W){W=s.n=y[W]||y[u];s.g=!1;b.position=W.s.slice();c=W.r.slice();b.G=0;b.R=0;b.d=void 0;b.e=V;b.q=!1;b.D=!1;b.a=!1;b.p=!1;b.C=!1;v=Ia;f=0;s.time=0;s.i=!1;E=0;W.j?(a=W.j.slice(),d=[W.j[0]+15,W.j[1]+23],e=d.slice()):d=a=null;X="4444444444444444444444444444444444444444"+W.map+"4444444444444444444444444444444444444444";X=X.split("");la(W);ka.length=0;ea.length=0;Ba.width=R;Ba.height=F;var I=Ba.getContext("2d");I.fillStyle="rgba(0,0,0,0.7)";
I.fillRect(0,0,R,F);I.fillStyle="#fff";I.font="20px courier";I.textAlign="center";I.fillText(s.n.name,R/2,F/2-50);I.fillText("Delivery Boy "+s.da+" - "+s.fa+" Crow",R/2,F/2);I.font="15px courier";I.fillText("Select level with arrows",R/2,F/2+80);I.fillText("Click the crow to start!",R/2,F/2+100);I.fillText(W.O?"E: edit   D: delete   J: insert/copy JSON   S: share":"E: edit",R/2,F/2+120);I.beginPath();I.arc(c[0],c[1],16,0,360);I.lineWidth=1;I.strokeStyle="#fff";I.stroke();Fa=Ja.slice()}function L(){s.da+=
1;J.style.cursor="auto";K(x.va);B(u)}function M(){s.fa+=1;J.style.cursor="auto";K(x.na);B(u)}function aa(a){return[a.clientX-s.ea.left,a.clientY-s.ea.top]}function T(){return Math.max(1,b.speed+b.Q-(void 0!==b.d?N[b.d].size:0))}function C(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}function ma(a,b){return Math.round(a[0]/n)===Math.round(b[0]/n)&&Math.round(a[1]/n)===Math.round(b[1]/n)}function ba(){var a=b.d,c=void 0!==a?N[a]:void 0;if(void 0===
c){for(a=0;a<N.length;a++)if(ma(b.position,N[a].position)){b.d=a;K(x.U);return}Y(w.m)&&(b.G=Ka,K(x.m))}else b.d=void 0,K(x.U),Y(w.oa)&&void 0!==c&&(N.splice(a,1),0>=N.length?L():K(x.ja))}function P(){var a=b.N,c=T();b.a||(a=0);a=Math.min(c,a+c/5);b.N=a;return Y(w.f)?c/3:a}function na(f){var g=T(),l=b.Pa,h=b.position[0],r=b.position[1],p=ya.ha;if(s.g||s.i){if(s.i)if(p[m.u]&&!b.a)E=(E+ua-1)%ua,b.a=!0;else if(p[m.A]&&!b.a)E=(E+1)%ua,b.a=!0;else if(p[m.t]&&!b.a)a instanceof Array?e=d=a=null:(a=[32,32],
d=[a[0]+15,a[1]+23],e=d.slice()),b.a=!0;else if(p[m.T]&&!b.a){b.a=!0;try{var k=JSON.parse(prompt("Set crates",JSON.stringify(y[u].e)));if(k instanceof Array){for(g=0;g<k.length;g++)"number"===!typeof g&&alert("Crates not valid"),k[g]=Math.max(1,Math.min(5,k[g]));y[u].e=k;la(y[u])}}catch(q){alert("Crates not valid: "+q.message)}p[m.T]=void 0}else if(p[m.Y]&&!b.a){b.a=!0;if(g=prompt("Set name",y[u].name))y[u].name=g;p[m.Y]=!1}else p[m.ba]&&!b.a?(b.a=!0,f=+prompt("Set time",y[u].l),!isNaN(f)&&0<f&&(y[u].l=
f),p[m.ba]=!1):p[m.u]||(p[m.A]||p[m.t]||p[m.T]||p[m.Y]||p[m.ba])||(b.a=!1);else s.g&&(!p[m.qa]||b.D||b.p||b.q?p[m.L]&&!b.q?(b.q=!0,0<b.G&&(b.G--,b.Q=Da,b.R=f+va,k=Object.create(La),k.position=[b.position[0]+4,b.position[1]-7],ka.push(k),K(x.ua))):p[m.qa]||(p[m.L]||!b.q)||(b.q=!1):(b.q=!0,ba()),p[m.ca]?Y(w.f)?(b.position[1]=Math.min(F-n,r-l),b.a=!0):b.D||b.p||(b.h=b.Oa,b.N=g,b.D=!0,b.p=!0,K(x.ra)):!p[m.ca]&&b.D&&(b.D=!1),p[m.u]&&(b.position[0]=Math.max(n,h-P()),b.a=!0,b.C=!0),p[m.A]&&(b.position[0]=
Math.min(R-2*n,h+P()),b.a=!0,b.C=!1),p[m.ma]&&((Y(w.f)||S(w.f))&&!S(w.M))&&(b.position[1]=Math.min(F,r+l),b.a=!0),p[m.u]||(p[m.ca]||p[m.A]||p[m.ma])||(b.a=!1));p[m.Ea]&&(J.style.cursor="auto",s.i&&(y[u].map=X.join("").substring(H,H*pa-H),y[u].s=b.position.slice(),y[u].r=c.slice(),a instanceof Array&&(y[u].j=a.slice()),y[u].o=xa.F.slice()),B(u))}else if(p[m.u]&&!b.a)u=(u+y.length-1)%y.length,B(u),b.a=!0;else if(p[m.A]&&!b.a)u=(u+1)%y.length,B(u),b.a=!0;else if(p[m.L]&&!b.a)y[u].O||(D(),B(u)),s.i=!0;
else if(p[m.Ca]&&!b.a)b.a=!0,y[u].O&&(y.splice(u,1),u--,B(u));else if(p[m.X]&&y[u].O&&!b.a){if(l=g=prompt("LEVEL JSON",JSON.stringify(y[u])))a:{try{JSON.parse(g);l=!0;break a}catch(t){alert("Level not valid: "+t.message)}l=!1}l&&(y[u]=JSON.parse(g),B(u));p[m.X]=void 0}else p[m.aa]&&!b.a?(b.a=!0,g=new XMLHttpRequest,g.onload=function(){prompt("Your level share url",this.responseText);p[m.aa]=void 0},g.open("post","http://127.0.0.1:3000/addLevel",!0),g.send(JSON.stringify(y[u]))):p[m.u]||(p[m.A]||p[m.L]||
p[m.X]||p[m.aa])||(b.a=!1)}function S(a){return ma(b.position,[b.position[0],b.position[1]+n/2])||X[H*Math.round(b.position[1]/n)+Math.round(b.position[0]/n-1)]!==a&&X[H*Math.round(b.position[1]/n)+Math.round(b.position[0]/n)]!==a?!1:!0}function ca(a,b){return X[H*Math.round(a[1]/n-1)+Math.round(a[0]/n-0.5)]===b?!0:!1}function Y(a){return ca(b.position,a)}function ga(a,b){return Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)}function oa(){return void 0!==b.d?N[b.d]:void 0}function Z(){var a=oa();a&&
(K(x.sa),b.d=void 0,a.position=a.F.slice(),b.e--,0>=b.e&&M())}function ta(){var a=oa();a&&b.h>za-a.size&&Z()}function ha(a,b,c){var d=null,e="#00deff";a===w.M?d=z.xa:a===w.B?d=z.B:a===w.Fa?e="#000":a===w.oa?e="#0f0":a===w.w?d=z.w:a===w.f?d=z.f:a===w.m&&(d=z.m);q.fillStyle=e;q.fillRect(b,c,n,n);null!==d&&A(d,b,c,n,n)}(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=
window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();var J=document.getElementById("c"),q=J.getContext("2d"),U=0,u=0,t=[0,0],Q=!1,ia=1,E=0,R=640,F=400,n=16,H=R/n,pa=F/n,w={EMPTY:"0",M:"1",f:"2",B:"3",Fa:"4",
oa:"5",w:"6",m:"7"},ua=12,x={ra:0,sa:1,ka:2,Ba:3,U:4,ja:5,va:6,na:7,ua:8,V:9,m:10,pa:11},V=10,qa=12,ja=[1,-6],za=12,Da=3,va=5E3,Ka=3,Ia=10,Ja="023123467".split(""),m={u:37,ca:38,A:39,ma:40,L:69,qa:32,Ea:27,Ca:68,X:74,t:71,T:67,Y:78,ba:84,aa:83},z={K:0,la:1,m:2,t:3,f:4,v:5,w:6,B:7,ta:8,xa:9},O={};O[z.K]={frame:{x:30,y:0,b:30,c:14},k:{x:1,y:1,b:30,c:14},frames:[{x:1,y:1,b:15,c:13},{x:17,y:1,b:15,c:13}]};O[z.la]={frame:{x:14,y:40,b:14,c:8},k:{x:1,y:7,b:14,c:8}};O[z.m]={frame:{x:32,y:14,b:16,c:16},k:{x:0,
y:0,b:16,c:16}};O[z.t]={frame:{x:0,y:24,b:14,c:24},k:{x:1,y:7,b:14,c:24}};O[z.f]={frame:{x:16,y:48,b:16,c:16},k:{x:0,y:0,b:16,c:16}};O[z.v]={frame:{x:0,y:0,b:30,c:24},k:{x:1,y:3,b:30,c:24},frames:[{x:0,y:0,b:15,c:24},{x:15,y:0,b:15,c:24}]};O[z.w]={frame:{x:48,y:14,b:16,c:10},k:{x:0,y:10,b:16,c:10}};O[z.B]={frame:{x:14,y:24,b:16,c:16},k:{x:0,y:0,b:16,c:16}};O[z.ta]={frame:{x:30,y:30,b:6,c:14},k:{x:4,y:1,b:6,c:14}};O[z.xa]={frame:{x:0,y:48,b:16,c:16},k:{x:0,y:0,b:16,c:16}};var da=new Image,Aa=document.createElement("canvas"),
Ga=0;da.onload=function(){Aa.width=Ga=da.naturalWidth;Aa.height=da.naturalHeight;var a=Aa.getContext("2d");a.translate(da.naturalWidth,0);a.scale(-1,1);a.drawImage(da,0,0)};da.src="img/imgmap.png";var b={position:null,speed:4,N:0,Q:0,R:0,Pa:2,Oa:-7,D:!1,p:!1,a:!1,q:!1,h:0,eb:!1,d:void 0,G:0,e:V,Ya:!0};c=null;g=3;l=!1;f=0;v=Ia;var X=[],xa={ga:null,size:1,position:null,F:[0,0]},N=[],La={position:null},ka=[],Ma={position:null,speed:6},ea=[],s={g:!1,ea:J.getBoundingClientRect(),time:0,da:0,fa:0,n:null,
i:!1},Ba=document.createElement("canvas");e=null;a=[80,53];d=[95,78];var Ca={name:"Tutorial",s:[33,370],r:[R-24,55],o:[300,365],j:[20,70],map:"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
e:[1],l:3E6,J:[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,["SPACE: buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[580,30,["PLAYER 2"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,["RClick: eat from nest or candy crumbs","LClick: shoot!"]],[140,60,["Don't touch roofs or the boy"]]]},
ra={name:"Level 1",s:[25,366],r:[616,24],o:[41,364],j:[513,180],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
e:[1,2],l:6E4},Na={name:"Level 2",s:[28,143],r:[600,296],o:[588,365],j:[51,50],map:"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
e:[1,2],l:12E4},Oa={name:"Level 5",s:[75,370],r:[R-24,24],o:[83,365],j:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000000000000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000000000200000000200000000000000000207000000000020000000000333330000000000011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
e:[1,2,3],l:3E5},y=window.localStorage&&window.localStorage.Da&&JSON.parse(window.localStorage.Da)||[Ca,ra,Na,Oa],ya={ha:{},Ua:function(a){ya.ha[a.keyCode]=void 0},Ta:function(a){ya.ha[a.keyCode]=U}};window.addEventListener("keyup",ya.Ua,!1);window.addEventListener("keydown",ya.Ta,!1);for(var Ca=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ha={},ra=0;ra<Ca.length;ra++)Ha[ra]=Ea.ya(["synth",0,0.4,0,0.208,0,0.12,20,Ca[ra],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var Fa=Ja.slice(),
wa={};G(x.ra,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);G(x.sa,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);G(x.ja,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);G(x.ua,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);G(x.ka,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,
-0.592,0,0.094,0.066,1,0,0,0.28,0]);G(x.na,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);G(x.va,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);G(x.U,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);G(x.Ba,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);G(x.V,["square",
0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);G(x.m,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);G(x.pa,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);B(u);C(J,"click",function(){if(s.i)if(8===E)b.position[0]=t[0],b.position[1]=t[1];else if(9===E)c[0]=t[0],c[1]=t[1];else if(10===E&&a)a[0]=t[0],a[1]=t[1],d=[a[0]+15,a[1]+23],e=d.slice();else{if(11===E){xa.F[0]=
t[0];xa.F[1]=t[1];for(var k=0;k<N.length;k++){var l=N[k];l.position[0]=t[0]+16*k;l.position[1]=t[1]-l.size}}}else s.g?0<g&&f<U&&(g--,K(x.ka),k=Object.create(Ma),k.position=c.slice(),ea.push(k)):t[0]>c[0]-16&&(t[0]<c[0]+16&&t[1]>c[1]-16&&t[1]<c[1]+16)&&(s.g=!0,s.time=U+s.n.l,fa(),J.style.cursor="none")});C(J,"mousedown",function(a){1===a.which&&(Q=!0);s.i&&(Q&&8>E)&&(a=Math.floor(t[1]/n),0<a&&a<pa-1&&(X[H*a+Math.floor(t[0]/n)]=""+E))});C(J,"mouseup",function(a){1===a.which&&(Q=!1)});C(J,"mousemove",
function(a){var b=aa(a);t=[b[0],b[1]];s.g?c=aa(a).slice():s.i&&Q&&8>E&&(a=Math.floor(t[1]/n),0<a&&a<pa-1&&(X[H*a+Math.floor(t[0]/n)]=""+E))});C(J,"contextmenu",function(a){a.preventDefault();if(s.g&&f<U)if(a=aa(a),X[H*Math.round(c[1]/n-0.5)+Math.round(c[0]/n-0.5)]===w.w&&3>g)K(x.V),g++;else{var b;for(b=0;b<ka.length;b++)if(ma(a,ka[b].position)){g=Math.max(g,5);K(x.V);ka.splice(b,1);break}}});(function I(m){na(m);U=m;if(s.g){s.ea=J.getBoundingClientRect();b.h>n/2&&(b.h+b.position[1]>b.Ra&&b.h)&&(b.h=
n/2,ta());if(Y(w.f)||S(w.f)||S(w.M)||b.position[1]>F-n){if(S(w.f)||0<b.h)ta(),b.h=0,b.N=0,b.p=!1;Y(w.f)||S(w.f)||0!==b.h||(b.position[1]=b.position[1]-b.position[1]%n+1)}else ta(),b.h+=1,b.p=!0;b.position[1]+=b.h;for(var h=b.position[0],r=b.position[1];r<F-n&&!ca([h,r],w.M);)r+=n;r-=r%n;b.Ra=r;void 0!==b.d&&(N[b.d].position[0]=b.position[0]+ja[0],N[b.d].position[1]=b.position[1]+ja[1]);b.R<m&&0<b.Q&&(b.Q=0);for(h=0;h<ea.length;h++)if(r=ea[h],r.position[1]+=r.speed,ma(b.position,r.position))Z(),ea.splice(h,
1),h--;else if(r.position[1]>F||ca(r.position,w.B))ea.splice(h,1),h--;s.time<m&&M();l=Math.pow(7*T()+75,2)>=ga(c,b.position);if(a){var h=ca(c,w.w)?d:c,r=Math.atan((h[1]-e[1])/(h[0]-e[0])),p=e[0]>h[0]?-1:1;if(3<Math.abs(h[0]-e[0])||3<Math.abs(h[1]-e[1]))e[0]+=1*Math.cos(r)*p,e[1]+=1*Math.sin(r)*p}(Math.pow(7*T()+25,2)>=ga(c,b.position)||ca(c,w.B)||a&&3>Math.sqrt(ga(e,c)))&&f<m&&(f=m+5E3,K(x.pa),g=0,v--,0>=v&&L())}q.fillStyle="black";q.fillRect(0,0,R,F);for(h=0;h<H;h++)for(r=0;r<pa;r++)ha(X[H*r+h],
h*n,r*n);for(r=0;r<N.length;r++)r!==b.d&&(h=N[r],q.drawImage(h.ga,h.position[0]-8,h.position[1]-8));for(r=0;r<ka.length;r++)h=ka[r],A(z.la,h.position[0]-8,h.position[1]-8);for(r=0;r<ea.length;r++)h=ea[r],A(z.ta,h.position[0]-8,h.position[1]-8);a&&A(z.t,a[0],a[1]);if(s.n.J)for(h=0;h<s.n.J.length;h++){var r=q,B=s.n.J[h][2],p=s.n.J[h][0],C=s.n.J[h][1],D=r.fillColor,G=r.textAlign;r.fillStyle="black";for(B=B.slice();0<B.length;)r.fillText(B.shift(),p,C),C+=10;r.fillStyle=D;r.textAlign=G}s.g?b.p?k(z.v,
b.position[0]-8,b.position[1]-24,0,b.C):b.a?k(z.v,b.position[0]-8,b.position[1]-24,10,b.C,m):k(z.v,b.position[0]-8,b.position[1]-24,1,b.C):k(z.v,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(h=N[b.d],q.drawImage(h.ga,b.C?h.position[0]+2:h.position[0]-16-h.size,h.position[1]-10));l&&(q.beginPath(),q.arc(b.position[0],b.position[1],7*T()+25,0,360),q.lineWidth=2,q.strokeStyle="#f09",q.stroke());s.g?f>m&&0===Math.floor(m/100)%2||k(z.K,c[0]-8,c[1]-8,2,!1,m):k(z.K,c[0]-8,c[1]-8,0);a&&(q.fillStyle=
"red",q.fillRect(e[0]-1,e[1]-1,2,2),q.beginPath(),q.arc(e[0],e[1],5,0,360),q.lineWidth=2,q.strokeStyle="red",q.stroke());s.g?(q.fillStyle="#00deff",q.fillText("BOY",10,396),q.fillStyle="red",q.fillText("CROW",600,12),q.fillStyle="white",q.fillText("SPEED: "+T()+"   BOOST: "+Math.max(0,Math.ceil((b.R-m)/1E3))+"   TIME: "+Math.max(0,Math.ceil((s.time-m)/1E3))+"   CANDIES: "+b.G+"   CRATES: "+b.e,50,396),q.fillText("SHOTS: "+g+"   STUN: "+Math.max(0,Math.ceil((f-m)/1E3))+"   HEALTH: "+v,410,12)):s.i&&
(q.fillStyle="white",q.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+y[u].l+")   N: NAME ("+y[u].name+")",12,12));s.g||s.i||q.drawImage(Ba,0,0);s.i&&(q.globalAlpha=0.6,8>E?(ha(""+E,t[0]-t[0]%n,t[1]-t[1]%n),q.strokeStyle="#000",q.strokeRect(t[0]-t[0]%n,t[1]-t[1]%n,n,n)):8===E?k(z.v,t[0]-8,t[1]-24,1):9===E?k(z.K,t[0]-8,t[1]-8,0):10===E?A(z.t,t[0],t[1]):11===E&&(q.fillStyle="yellow",q.fillRect(t[0]-8,t[1]-8,16,16),q.fillStyle="#000",q.fillText("C",t[0]-4,t[1]+4)),q.globalAlpha=1);window.requestAnimationFrame(I)})()})();

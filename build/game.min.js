var Y={};
(function(a){function m(a,e){return e?l(a&255)+m(a>>8,e-1):""}var w=this.ea=a||44100,p=2*w,l=String.fromCharCode,k;this.wa=function(a){var e=Audio,l=btoa,s="",J=a.length;for(c=0;c<J;c++)var y=32767*a[c]|0,y=-32768>y?-32768:32767<y?32767:y,y=y+(0>y?65536:0),s=s+String.fromCharCode(y&255,y>>8);a=s;a=["RIFF",36+(k=a.length),"WAVEfmt ",16,1,1,w,p,2,16,"data",k,a];s="";for(c=0;c<a.length;c++)s+="s"=="s4s4224422s4s"[c]?a[c]:m(a[c],"s4s4224422s4s".charCodeAt(c)-48);return new e("data:audio/wav;base64,"+l(s))};
var t,c,H=Math.sin,e=2*Math.PI;this.filter=function(a,e,l,s,k,y,m,p,w,n){l=l?l:1;s=s?s:a.length;t=a.slice(0);for(c=l;c<s;c++)t[c]=e(a,t,l,s,c,k,y,m,p,w,n);return t};this.filters={Fa:function(a,e,l,c,k,m){return e[k-1]+m*(a[k]-e[k-1])},Ga:function(a,e,l,k,c,m){return e[c-1]+m*(k-c)/(k-l)*(a[c]-e[c-1])},Ea:function(a,e,l,k,c,m){return m*(e[c-1]+a[c]-a[c-1])}};this.ga=function(a,l,k,m,t,p,n,H,P){l=l*e/w;var B=Array(a|0);for(c=0;c<a;c++)B[c]=k(c*l,m,t,p,n,H,P);return B};var n=0;this.v={ya:function(a){4>
a%e&&(n=2*Math.random()-1);return n},Ha:Math.random,Ca:Math.sin,Da:function(a){return H(a)+0.5*H(a/2)+0.3*H(a/4)},Ba:function(a){return 2*(a/e-(a/e+0.5|0))},ha:function(a,e){return H(a)>e?1:H(a)<e?-1:e}}}).apply(Y);var ma={};
(function(){this.Q=[];this.O={square:Y.v.ha,saw:Y.v.Ba,sine:Y.v.Ca,noise:Y.v.ya,synth:Y.v.Da};this.sa=function(){var a=[],m;for(m in this.O)a.push(m);return a};this.ta=function(){function a(a,k,t,c,p){void 0===p&&(p=(t-k)/1E3);a={name:a,id:a.replace(/ /g,""),min:k,max:t,step:p,ra:c,type:"range",group:w};m.push(a)}var m=[],w=0,p=this.sa();(function(a,k,p){a={name:a,id:a.replace(/ /g,""),options:k,ra:p,type:"option",group:w};m.push(a)})("Generator",p,p[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);w++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);w++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);w++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);w++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);w++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);w++;a("RepeatSpeed",
0,0.8,0);w++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);w++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return m};this.ga=function(a){var m=2*Math.PI,w=Math.sin,p=Math.pow,l=Math.abs,k=Y.ea,t=a.SuperSamplingQuality|0;1>t&&(t=1);for(var k=k*t,c=[{u:0,J:1,time:a.AttackTime},{u:1+a.SustainPunch,J:1,time:a.SustainTime},{u:1,J:0,time:a.DecayTime}],H=c.length,e=0;e<H;e++)c[e].G=1+(c[e].time*k|0);for(var n=
void 0,aa=0,ba=-1,x=0,s=-1,J=0,e=0;e<H;e++)J+=c[e].G;J<k/2&&(J=k/2);var y=Array(J/t|0),F=0,ca=0,P=ma.O[a.Generator];void 0===P&&(P=this.O.ha);var B=0,B=a.SquareDuty,ha=a.SquareDutySweep/k,X=0,C=a.StartFrequency*m/k,T=1+64*p(a.Slide,3)/k,K=p(a.DeltaSlide,3)/(1E3*k);void 0!==t&&(K/=t);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var ia=a.MinFrequency*m/k,na=a.MaxFrequency*m/k,ja=0,da=a.VibratoFrequency*m/k,
U=a.VibratoDepth,L=1+3*p(a.VibratoFrequencySlide,3)/k,g=a.VibratoDepthSlide/k,V=0,u=a.ChangeSpeed*k,z=p(a.ChangeAmount,2),z=0<a.ChangeAmount?1+10*z:1-0.9*z,W=Array(1024),e=0;1024>e;e++)W[e]=0;var ka=0,E=1020*p(a.PhaserOffset,2),A=4E3*p(a.PhaserSweep,3)/k,G=1E-5<l(A)||1E-5<l(E),h=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,D=0,R=0,r=p(a.LPFilterCutoff,3)/10,v=1+a.HPFilterCutoffSweep/1E4,Z=5/(1+20*p(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<Z&&(Z=0.8);var Z=1-Z,la=0.999>a.LPFilterCutoff,
ea=0,N=p(a.HPFilterCutoff,2)/10,qa=1+a.HPFilterCutoffSweep/1E4,fa=0,b=J;0<a.RepeatSpeed&&(b=p(1-a.RepeatSpeed,2)*k+32);for(var O=a.MasterVolume,Q=0,e=0;e<J;e++)F=P(X,B,0),B+=ha,0>B?B=0:0.5<B&&(B=0.5),fa>b&&(X=0,C=a.StartFrequency*m/k,T=1+3*p(a.Slide,3)/k,K=p(a.DeltaSlide,3)/(1E3*k),void 0!==t&&(K/=t),V=0,u=a.ChangeSpeed*k,z=1+(a.ChangeAmount|0)/12,fa=0),fa+=1,X+=C,T+=K,C*=T,V>u&&(C*=z,u=J),V+=1,C>na?C=na:C<ia&&(C=ia),ja+=da,n=C*w(ja)*U,X+=n,da*=L,g&&(U+=g,0>U?g=U=0:1<U&&(U=1,g=0)),h&&(0.0010<l(N)&&
(N*=qa,1E-5>N?N=1E-5:0.1<N&&(N=0.1)),n=D,r*=v,0>r?r=0:0.1<r&&(r=0.1),la?(R+=(F-D)*r,R*=Z):(D=F,R=0),D+=R,ea+=D-n,F=ea*=1-N),G&&(E+=A,0>E&&(E=-E,A=-A),1023<E&&(E=1023,A=0),W[ka]=F,F+=W[ka-(E|0)+1024&1023],ka=ka+1&1023),e>s&&(ba+=1,n=ba<H?c[ba]:{u:0,J:0,G:J},aa=n.u,x=(n.J-n.u)/(n.G+1),s+=n.G),F*=aa,aa+=x,F*=O,1<t?(ca+=F,0===(e+1)%t&&(y[Q]=ca/t,Q+=1,ca=0)):y[e]=F;a=k/100|0;m=Array(a);for(e=0;e<a;e++)m[e]=0;return m.concat(y).concat(m)};this.Q=this.ta()}).apply(ma);var ta={};(function(){this.fa=function(a){a=ma.ga(this.qa(a));return Y.wa(a)};this.qa=function(a){for(var m={},w=ma.Q.length,p=0;p<w;p++)m[ma.Q[p].id]=a[p];return m}}).apply(ta);(function(){var a,m,w,p,l,k,t,c,H,e;function n(b,a,e,d){var c=new Image;c.width=a||16;c.height=e||16;c.onload=d;c.src=b;return c}function aa(b){var a=document.createElement("canvas"),e=n("img/man2.png",32,32,function(){var d=a.getContext("2d");b&&(d.translate(32,0),d.scale(-1,1));d.drawImage(e,0,0)});a.width=32;a.height=32;return a}function ba(){0<ua.length&&(va[ua.shift()].play(),setTimeout(ba,200))}function x(b,a){oa[b]=ta.fa(a)}function s(b){oa[b]&&(oa[b].pause(),oa[b].currentTime=0,oa[b].play())}
function J(b,a,e,d,c){var k=b.fillColor,g=b.textAlign;b.fillStyle="black";c&&(b.textAlign=c);for(a=a.slice();0<a.length;)b.fillText(a.shift(),e,d),d+=10;b.fillStyle=k;b.textAlign=g}function y(a){a=q.n=I[a]||I[u];var c=a.m;q.g=!1;b.position=a.r.slice();l=a.q.slice();b.t=0;b.I=0;b.c=void 0;b.d=Z;b.l=!1;b.p=!1;b.a=!1;b.k=!1;b.f=!0;k=qa;t=0;q.time=0;q.i=!1;a.j?(m=a.j.slice(),w=[a.j[0]+15,a.j[1]+23],e=w.slice()):w=m=null;O="4444444444444444444444444444444444444444"+a.map+"4444444444444444444444444444444444444444";
O=O.split("");for(var g,d,h,p,r=M.length=0;r<a.d.length;r++)g=a.d[r],d=Object.create(ya),d.size=g,h=document.createElement("canvas"),h.width=la+g,h.height=la+g,p=h.getContext("2d"),p.fillStyle="yellow",p.fillRect(0,0,la+g,la+g),p.fillStyle="black",p.fillText(g,5,10),d.b=h,h=c[0]+16*r,g=c[1]-g,d.position=[h,g],d.ia=[h,g],M.push(d);ga.length=0;$.length=0;ra.width=A;ra.height=G;c=ra.getContext("2d");c.fillStyle="rgba(0,0,0,0.7)";c.fillRect(0,0,A,G);c.fillStyle="#fff";c.font="20px courier";c.textAlign=
"center";c.fillText(q.n.name,A/2,G/2-50);c.fillText("Delivery Boy "+q.S+" - "+q.U+" Crow",A/2,G/2);c.font="15px courier";c.fillText("Select level with arrows",A/2,G/2+80);c.fillText("Click the crow to start!",A/2,G/2+100);c.fillText(a.C?"N: new   E: edit   D: delete   J: insert/copy JSON":"E: edit",A/2,G/2+120);c.beginPath();c.arc(l[0],l[1],16,0,360);c.lineWidth=1;c.strokeStyle="#fff";c.stroke();ua=fa.slice()}function F(){q.S+=1;L.style.cursor="auto";s(v.da);y(u)}function ca(){q.U+=1;L.style.cursor=
"auto";s(v.Y);y(u)}function P(b){return[b.clientX-q.T.left,b.clientY-q.T.top]}function B(){return Math.max(1,b.speed+b.H-(void 0!==b.c?M[b.c].size:0))}function ha(b,a){return Math.round(b[0]/h)===Math.round(a[0]/h)&&Math.round(b[1]/h)===Math.round(a[1]/h)}function X(){var a=b.B,c=B();b.a||(a=0);a=Math.min(c,a+c/5);b.B=a;return K(r.h)?c/3:a}function C(a){return ha(b.position,[b.position[0],b.position[1]+h/2])||O[D*Math.round(b.position[1]/h)+Math.round(b.position[0]/h-1)]!==a&&O[D*Math.round(b.position[1]/
h)+Math.round(b.position[0]/h)]!==a?!1:!0}function T(b,a){return O[D*Math.round(b[1]/h-1)+Math.round(b[0]/h-0.5)]===a?!0:!1}function K(a){return T(b.position,a)}function ia(b,a){return Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2)}function na(){return void 0!==b.c?M[b.c]:void 0}function ja(){var a=na();a&&(s(v.ba),b.c=void 0,a.position=a.ia.slice(),b.d--,0>=b.d&&ca())}function da(){var a=na();a&&b.e>N-a.size&&ja()}function U(a,b,c){var d=null,e="#00deff";a===r.A?d=Q.pa.b:a===r.R?d=Q.na.b:a===r.oa?e=
"#000":a===r.Z?e="#0f0":a===r.P?d=Q.ma.b:a===r.h?d=Q.la.b:a===r.s&&(d=Q.ka.b);g.fillStyle=e;g.fillRect(b,c,h,h);null!==d&&g.drawImage(d,b,c,h,h)}window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var L=document.getElementById("c"),g=L.getContext("2d"),V=0,u=0,z=[0,0],W=!1,ka=1,E=0,A=640,G=400,h=16,D=A/h,R=G/h,r={EMPTY:"0",A:"1",h:"2",R:"3",oa:"4",Z:"5",P:"6",s:"7"},v={aa:0,ba:1,X:2,ja:3,L:4,
W:5,da:6,Y:7,ca:8,M:9,s:10,$:11},Z=10,la=12,ea=[1,-6],N=12,qa=10,fa="023123467".split(""),b={position:null,speed:4,B:0,H:0,I:0,va:2,ua:-7,p:!1,k:!1,a:!1,l:!1,e:0,images:{D:aa(),F:aa(!0)},Ia:!1,c:void 0,t:0,d:Z,f:!0};l=null;a=n("img/crow2.png");c=3;H=!1;t=0;k=qa;var O=[],Q={la:{b:n("img/ladder.png")},ma:{b:n("img/nest.png")},ka:{b:n("img/dispenser.png")},na:{b:n("img/roof.gif")},pa:{b:n("img/wall.gif")}},ya={b:null,size:1,position:null,ia:null},M=[],za={b:n("img/crumbs.png"),position:null},ga=[],Aa=
{b:n("img/shot.png"),position:null,speed:6},$=[],q={g:!1,T:L.getBoundingClientRect(),time:0,S:0,U:0,n:null,i:!1},ra=document.createElement("canvas");e=null;m=[80,53];p=n("img/granny.png");w=[95,78];var I=[{name:"Tutorial 1",r:[33,370],q:[A-24,24],m:[53,365],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555000000000000000000000000000000000000555500000000000000000000000000000000000055551111111111111111111111111111111111111111",
d:[1],o:3E4,w:{K:["PLAYER 1","ARROWS: move/jump","SPACEBAR: grab/release crate","Leave crate into the green zone."],N:["PLAYER 2","MOUSE: move","LClick: shoot","RClick: recharge from nest","Shoot boy to make his crate fall."]}},{name:"Tutorial 2",r:[33,370],q:[A-24,24],m:[53,365],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033333300000000000000000000000000000333330000000000000000000000000000000000005555000000000000000000000000000000000000555500000000007000000000000000000000000055551111111111111111111111111111111111111111",
d:[3],o:3E4,w:{K:["SPACEBAR: buy candies when not holding a crate.","E: use candy","Candies give a speed boost."],N:["Roofs block shots.","Don't touch the roofs or the boy.","RClick: eat candy crumbs to get 5 shots."]}},{name:"Tutorial 3",r:[33,370],q:[A-24,24],m:[53,365],j:[100,227],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000333333300000000000000000000000000000000055555500000000000000000000000000000000005555550000000000000000000000000000000000555555000000000200000000000000033330000011111111111111120000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000700200033333300000000021111111100011111111120000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020001111111111111111111111111111111111111111",
d:[2,3],o:6E4,w:{K:["ARROWS: climb ladder","Crates will break if you fall from too high."],N:["Don't get shot!","Hide in the nest."]}},{name:"Level 5",r:[75,370],q:[A-24,24],m:[83,365],j:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000000000000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000000000200000000200000000000000000207000000000020000000000333330000000000011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
d:[1,2,3],o:3E5}],pa={V:{},Aa:function(a){pa.V[a.keyCode]=void 0},za:function(a){pa.V[a.keyCode]=V}};window.addEventListener("keyup",pa.Aa,!1);window.addEventListener("keydown",pa.za,!1);for(var wa=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],va={},sa=0;sa<wa.length;sa++)va[sa]=ta.fa(["synth",0,0.4,0,0.208,0,0.12,20,wa[sa],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var ua=fa.slice(),oa={};x(v.aa,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,
0,0,0,0.783,0,0,0,0]);x(v.ba,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);x(v.W,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);x(v.ca,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);x(v.X,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);x(v.Y,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,
0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);x(v.da,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);x(v.L,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);x(v.ja,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);x(v.M,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);
x(v.s,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);x(v.$,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);y(u);L.addEventListener("click",function(){if(!q.g)z[0]>l[0]-16&&(z[0]<l[0]+16&&z[1]>l[1]-16&&z[1]<l[1]+16)&&(q.g=!0,q.time=V+q.n.o,ba(),L.style.cursor="none");else if(0<c&&t<V){c--;s(v.X);var a=Object.create(Aa);a.position=l.slice();$.push(a)}});L.addEventListener("mousedown",function(a){1===a.which&&
(W=!0);q.i&&W&&(a=Math.floor(z[1]/h),0<a&&a<R-1&&(O[D*a+Math.floor(z[0]/h)]=""+E))});L.addEventListener("mouseup",function(a){1===a.which&&(W=!1)});L.addEventListener("mousemove",function(a){var b=P(a);z=[b[0],b[1]];q.g?l=P(a).slice():q.i&&W&&(a=Math.floor(z[1]/h),0<a&&a<R-1&&(O[D*a+Math.floor(z[0]/h)]=""+E))});L.addEventListener("contextmenu",function(a){a.preventDefault();if(q.g&&t<V)if(a=P(a),O[D*Math.round(l[1]/h-0.5)+Math.round(l[0]/h-0.5)]===r.P&&3>c)s(v.M),c++;else{var b;for(b=0;b<ga.length;b++)if(ha(a,
ga[b].position)){c=Math.max(c,5);s(v.M);ga.splice(b,1);break}}});(function xa(n){var d=B(),x=b.va,N=b.position[0],P=b.position[1],f=pa.V;if(q.g||q.i){if(q.i)f[37]&&!b.a&&(E=(E+8-1)%8,b.a=!0),f[39]&&!b.a&&(E=(E+1)%8,b.a=!0),f[37]||f[39]||(b.a=!1);else if(q.g){if(!f[32]||b.p||b.k||b.l)f[69]&&!b.l?(b.l=!0,0<b.t&&(b.t--,b.H=3,b.I=n+5E3,S=Object.create(za),S.position=[b.position[0]+4,b.position[1]-7],ga.push(S),s(v.ca))):f[32]||(f[69]||!b.l)||(b.l=!1);else{b.l=!0;a:{var S=b.c,Q=void 0!==S?M[S]:void 0;
if(void 0===Q){for(S=0;S<M.length;S++)if(ha(b.position,M[S].position)){b.c=S;s(v.L);break a}K(r.s)&&(b.t=3,s(v.s))}else b.c=void 0,s(v.L),K(r.Z)&&void 0!==Q&&(M.splice(S,1),0>=M.length?F():s(v.W))}}f[38]?K(r.h)?(b.position[1]=Math.min(G-h,P-x),b.a=!0):b.p||b.k||(b.e=b.ua,b.B=d,b.p=!0,b.k=!0,s(v.aa)):!f[38]&&b.p&&(b.p=!1);f[37]&&(b.position[0]=Math.max(h,N-X()),b.a=!0,b.f=!1);f[39]&&(b.position[0]=Math.min(A-2*h,N+X()),b.a=!0,b.f=!0);f[40]&&((K(r.h)||C(r.h))&&!C(r.A))&&(b.position[1]=Math.min(G,P+
x),b.a=!0);f[37]||(f[38]||f[39]||f[40])||(b.a=!1)}f[27]&&(L.style.cursor="auto",I[u].map=O.join("").substring(D,D*R-D),y(u))}else{f[37]&&!b.a&&(u=(u+I.length-1)%I.length,y(u),b.a=!0);f[39]&&!b.a&&(u=(u+1)%I.length,y(u),b.a=!0);f[69]&&!b.a&&(I[u].C||(d=I[u],d={name:"CustomLevel"+ka++,r:d.r.slice(),q:d.q.slice(),m:d.m.slice(),j:d.j&&d.j.slice(),map:d.map,d:d.d.slice(),o:d.o,C:!0},I.push(d),u=I.length-1,y(u)),q.i=!0);f[68]&&!b.a&&(b.a=!0,I[u].C&&(I.splice(u,1),u--,y(u)));if(f[74]&&I[u].C&&!b.a){if(x=
d=prompt("LEVEL JSON",JSON.stringify(I[u])))a:{try{JSON.parse(d);x=!0;break a}catch(W){alert("Level not valid: "+W.message)}x=!1}x&&(I[u]=JSON.parse(d),y(u));f[74]=void 0}f[37]||(f[39]||f[69]||f[74])||(b.a=!1)}V=n;if(q.g){q.T=L.getBoundingClientRect();b.e>h/2&&(b.e+b.position[1]>b.xa&&b.e)&&(b.e=h/2,da());if(K(r.h)||C(r.h)||C(r.A)||b.position[1]>G-h){if(C(r.h)||0<b.e)da(),b.e=0,b.B=0,b.k=!1;K(r.h)||C(r.h)||0!==b.e||(b.position[1]=b.position[1]-b.position[1]%h+1)}else da(),b.e+=1,b.k=!0;b.position[1]+=
b.e;f=b.position[0];for(d=b.position[1];d<G-h&&!T([f,d],r.A);)d+=h;d-=d%h;b.xa=d;void 0!==b.c&&(M[b.c].position[0]=b.position[0]+ea[0],M[b.c].position[1]=b.position[1]+ea[1]);b.I<n&&0<b.H&&(b.H=0);for(f=0;f<$.length;f++)if(d=$[f],d.position[1]+=d.speed,ha(b.position,d.position))ja(),$.splice(f,1),f--;else if(d.position[1]>G||T(d.position,r.R))$.splice(f,1),f--;q.time<n&&ca();H=Math.pow(7*B()+75,2)>=ia(l,b.position);m&&(f=T(l,r.P)?w:l,d=Math.atan((f[1]-e[1])/(f[0]-e[0])),x=e[0]>f[0]?-1:1,3<Math.abs(f[0]-
e[0])||3<Math.abs(f[1]-e[1]))&&(e[0]+=1*Math.cos(d)*x,e[1]+=1*Math.sin(d)*x);(Math.pow(7*B()+25,2)>=ia(l,b.position)||T(l,r.R)||m&&3>Math.sqrt(ia(e,l)))&&t<n&&(t=n+5E3,s(v.$),c=0,k--,0>=k&&F())}g.fillStyle="black";g.fillRect(0,0,A,G);for(f=0;f<D;f++)for(d=0;d<R;d++)U(O[D*d+f],f*h,d*h);for(d=0;d<M.length;d++)d!==b.c&&(f=M[d],g.drawImage(f.b,f.position[0]-8,f.position[1]-8));for(d=0;d<ga.length;d++)f=ga[d],g.drawImage(f.b,f.position[0]-8,f.position[1]-8);for(d=0;d<$.length;d++)f=$[d],g.drawImage(f.b,
f.position[0]-8,f.position[1]-8);m&&g.drawImage(p,m[0],m[1]);q.n.w&&(J(g,q.n.w.K,120,330),J(g,q.n.w.N,620,70,"right"));q.g?b.k?g.drawImage(b.f?b.images.D:b.images.F,b.f?0:16,0,16,32,b.position[0]-8,b.position[1]-24,16,32):b.a?g.drawImage(b.f?b.images.D:b.images.F,1>Math.floor(n/100)%2?0:16,0,16,32,b.position[0]-8,b.position[1]-24,16,32):g.drawImage(b.f?b.images.D:b.images.F,b.f?16:0,0,16,32,b.position[0]-8,b.position[1]-24,16,32):g.drawImage(b.f?b.images.D:b.images.F,b.f?16:0,0,16,32,b.position[0]-
8,b.position[1]-24,16,32);void 0!==b.c&&(f=M[b.c],g.drawImage(f.b,b.f?f.position[0]-16-f.size:f.position[0]+2,f.position[1]-10));H&&(g.beginPath(),g.arc(b.position[0],b.position[1],7*B()+25,0,360),g.lineWidth=2,g.strokeStyle="#f09",g.stroke());q.g?t>n&&0===Math.floor(n/100)%2||g.drawImage(a,3>Math.floor(n/100)%6?0:16,0,16,16,l[0]-8,l[1]-8,16,16):g.drawImage(a,0,0,16,16,l[0]-8,l[1]-8,16,16);m&&(g.fillStyle="red",g.fillRect(e[0]-1,e[1]-1,2,2),g.beginPath(),g.arc(e[0],e[1],5,0,360),g.lineWidth=2,g.strokeStyle=
"red",g.stroke());g.fillStyle="#00deff";g.fillText("BOY",10,396);g.fillStyle="red";g.fillText("CROW",600,12);g.fillStyle="white";g.fillText("SPEED: "+B()+"   BOOST: "+Math.max(0,Math.ceil((b.I-n)/1E3))+"   TIME: "+Math.max(0,Math.ceil((q.time-n)/1E3))+"   CANDIES: "+b.t+"   CRATES: "+b.d,50,396);g.fillText("SHOTS: "+c+"   STUN: "+Math.max(0,Math.ceil((t-n)/1E3))+"   HEALTH: "+k,410,12);q.i&&g.fillText("< > CHANGE BLOCK",12,12);q.g||q.i||g.drawImage(ra,0,0);q.i&&(U(""+E,z[0]-z[0]%h,z[1]-z[1]%h),g.strokeStyle=
"#000",g.strokeRect(z[0]-z[0]%h,z[1]-z[1]%h,h,h));window.requestAnimationFrame(xa)})()})();

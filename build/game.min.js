/* http://github.com/4lbertoC/mirrordelivery */var qa={};
(function(a){function y(a,c){return c?T(a&255)+y(a>>8,c-1):""}var A=this.pa=a||44100,v=2*A,T=String.fromCharCode,s;this.Fa=function(a){var c=Audio,d=btoa,q="",l=a.length;for(g=0;g<l;g++)var t=32767*a[g]|0,t=-32768>t?-32768:32767<t?32767:t,t=t+(0>t?65536:0),q=q+String.fromCharCode(t&255,t>>8);a=q;a=["RIFF",36+(s=a.length),"WAVEfmt ",16,1,1,A,v,2,16,"data",s,a];q="";for(g=0;g<a.length;g++)q+="s"=="s4s4224422s4s"[g]?a[g]:y(a[g],"s4s4224422s4s".charCodeAt(g)-48);return new c("data:audio/wav;base64,"+d(q))};
var c,g,u=Math.sin,l=2*Math.PI;this.filter=function(a,d,l,q,s,t,u,v,A,y){l=l?l:1;q=q?q:a.length;c=a.slice(0);for(g=l;g<q;g++)c[g]=d(a,c,l,q,g,s,t,u,v,A,y);return c};this.filters={La:function(a,c,l,g,d,t){return c[d-1]+t*(a[d]-c[d-1])},Ma:function(a,c,d,l,g,t){return c[g-1]+t*(l-g)/(l-d)*(a[g]-c[g-1])},Ka:function(a,c,g,l,d,t){return t*(c[d-1]+a[d]-a[d-1])}};this.ra=function(a,c,d,s,u,t,v,y,T){c=c*l/A;var I=Array(a|0);for(g=0;g<a;g++)I[g]=d(g*c,s,u,t,v,y,T);return I};var d=0;this.F={Ga:function(a){4>
a%l&&(d=2*Math.random()-1);return d},Na:Math.random,Ia:Math.sin,Ja:function(a){return u(a)+0.5*u(a/2)+0.3*u(a/4)},Ha:function(a){return 2*(a/l-(a/l+0.5|0))},sa:function(a,c){return u(a)>c?1:u(a)<c?-1:c}}}).apply(qa);var Ea={};
(function(){this.Z=[];this.W={square:qa.F.sa,saw:qa.F.Ha,sine:qa.F.Ia,noise:qa.F.Ga,synth:qa.F.Ja};this.Ba=function(){var a=[],y;for(y in this.W)a.push(y);return a};this.Ca=function(){function a(a,s,c,g,u){void 0===u&&(u=(c-s)/1E3);a={name:a,id:a.replace(/ /g,""),min:s,max:c,step:u,Aa:g,type:"range",group:A};y.push(a)}var y=[],A=0,v=this.Ba();(function(a,s,c){a={name:a,id:a.replace(/ /g,""),options:s,Aa:c,type:"option",group:A};y.push(a)})("Generator",v,v[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);A++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);A++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);A++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);A++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);A++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);A++;a("RepeatSpeed",
0,0.8,0);A++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);A++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return y};this.ra=function(a){var y=2*Math.PI,A=Math.sin,v=Math.pow,T=Math.abs,s=qa.pa,c=a.SuperSamplingQuality|0;1>c&&(c=1);for(var s=s*c,g=[{D:0,R:1,time:a.AttackTime},{D:1+a.SustainPunch,R:1,time:a.SustainTime},{D:1,R:0,time:a.DecayTime}],u=g.length,l=0;l<u;l++)g[l].O=1+(g[l].time*s|0);
for(var d=void 0,X=0,ca=-1,Aa=0,q=-1,H=0,l=0;l<u;l++)H+=g[l].O;H<s/2&&(H=s/2);var t=Array(H/c|0),O=0,da=0,Ba=Ea.W[a.Generator];void 0===Ba&&(Ba=this.W.sa);var I=0,I=a.SquareDuty,La=a.SquareDutySweep/s,ha=0,V=a.StartFrequency*y/s,ia=1+64*v(a.Slide,3)/s,ja=v(a.DeltaSlide,3)/(1E3*s);void 0!==c&&(ja/=c);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var Fa=a.MinFrequency*y/s,ra=a.MaxFrequency*y/s,Ca=0,wa=a.VibratoFrequency*
y/s,Z=a.VibratoDepth,Ga=1+3*v(a.VibratoFrequencySlide,3)/s,W=a.VibratoDepthSlide/s,ka=0,la=a.ChangeSpeed*s,ea=v(a.ChangeAmount,2),ea=0<a.ChangeAmount?1+10*ea:1-0.9*ea,J=Array(1024),l=0;1024>l;l++)J[l]=0;var ma=0,$=1020*v(a.PhaserOffset,2),K=4E3*v(a.PhaserSweep,3)/s,P=1E-5<T(K)||1E-5<T($),B=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,Q=0,na=0,D=v(a.LPFilterCutoff,3)/10,xa=1+a.HPFilterCutoffSweep/1E4,oa=5/(1+20*v(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<oa&&(oa=0.8);var oa=1-oa,Ha=0.999>
a.LPFilterCutoff,ya=0,x=v(a.HPFilterCutoff,2)/10,E=1+a.HPFilterCutoffSweep/1E4,aa=0,fa=H;0<a.RepeatSpeed&&(fa=v(1-a.RepeatSpeed,2)*s+32);for(var Ia=a.MasterVolume,r=0,l=0;l<H;l++)O=Ba(ha,I,0),I+=La,0>I?I=0:0.5<I&&(I=0.5),aa>fa&&(ha=0,V=a.StartFrequency*y/s,ia=1+3*v(a.Slide,3)/s,ja=v(a.DeltaSlide,3)/(1E3*s),void 0!==c&&(ja/=c),ka=0,la=a.ChangeSpeed*s,ea=1+(a.ChangeAmount|0)/12,aa=0),aa+=1,ha+=V,ia+=ja,V*=ia,ka>la&&(V*=ea,la=H),ka+=1,V>ra?V=ra:V<Fa&&(V=Fa),Ca+=wa,d=V*A(Ca)*Z,ha+=d,wa*=Ga,W&&(Z+=W,0>
Z?W=Z=0:1<Z&&(Z=1,W=0)),B&&(0.0010<T(x)&&(x*=E,1E-5>x?x=1E-5:0.1<x&&(x=0.1)),d=Q,D*=xa,0>D?D=0:0.1<D&&(D=0.1),Ha?(na+=(O-Q)*D,na*=oa):(Q=O,na=0),Q+=na,ya+=Q-d,O=ya*=1-x),P&&($+=K,0>$&&($=-$,K=-K),1023<$&&($=1023,K=0),J[ma]=O,O+=J[ma-($|0)+1024&1023],ma=ma+1&1023),l>q&&(ca+=1,d=ca<u?g[ca]:{D:0,R:0,O:H},X=d.D,Aa=(d.R-d.D)/(d.O+1),q+=d.O),O*=X,X+=Aa,O*=Ia,1<c?(da+=O,0===(l+1)%c&&(t[r]=da/c,r+=1,da=0)):t[l]=O;a=s/100|0;y=Array(a);for(l=0;l<a;l++)y[l]=0;return y.concat(t).concat(y)};this.Z=this.Ca()}).apply(Ea);var Wa={};(function(){this.qa=function(a){a=Ea.ra(this.za(a));return qa.Fa(a)};this.za=function(a){for(var y={},A=Ea.Z.length,v=0;v<A;v++)y[Ea.Z[v].id]=a[v];return y}}).apply(Wa);(function(){var a,y,A,v,T,s,c,g,u,l;function d(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}function X(a,b,c,R,n,d){var e=xa[a].frame,g=xa[a].g;a=xa[a].frames;R=d?a[Math.floor(d*R/1E3)%a.length]:a[R];n?p.drawImage(Ma,Za-(e.x+R.x)-R.b,e.y+R.y,R.b,R.c,b+g.x,c+g.y,R.b,R.c):p.drawImage(sa,e.x+R.x,e.y+R.y,R.b,R.c,b+g.x,c+g.y,R.b,R.c)}function ca(a,b,c,e,n){var d=xa[a].frame;a=xa[a].g;p.drawImage(sa,d.x,d.y,e||d.b,n||d.c,b+a.x,c+a.y,a.b,a.c)}function Aa(a){var b=
a.clientX-e.L.left;a=a.clientY-e.L.top;b=Math.max(0,Math.min(b,K-1));a=Math.max(0,Math.min(a,P-1));return[b,a]}function q(a,b){if(Ha)try{Ja[a]=Wa.qa(b)}catch(c){}}function H(){if(Ha)try{e.state===r.h&&0<Na.length&&($a[Na.shift()].play(),setTimeout(H,200))}catch(a){}}function t(a){if(Ha)try{Ja[a]&&(Ja[a].pause(),Ja[a].currentTime=0,Ja[a].play())}catch(b){}}function O(a){a=a||C[w];a=["CustomLevel"+gb++,a[m.Y].slice(),a[m.V].slice(),a[m.S].slice(),a[m.m]&&a[m.m].slice(),a[m.B],a[m.X],a[m.j].slice(),
null,!0];C.push(a);e.state===r.f&&(w=C.length-1,I(w))}function da(){return Math.max(1,b.speed+b.P-(void 0!==b.d?S[b.d].size:0))}function Ba(a){var b=a[m.S],c,d,n,e;Oa.I=b;for(var g=S.length=0;g<a[m.j].length;g++)c=a[m.j][g],d=Object.create(Oa),d.size=c,n=document.createElement("canvas"),n.width=Pa+c,n.height=Pa+c,e=n.getContext("2d"),e.fillStyle="yellow",e.fillRect(0,0,Pa+c,Pa+c),e.fillStyle="black",e.fillText(c,5,10),d.ca=n,n=b[0]+16*g,c=b[1]-c,d.position=[n,c],d.I=[n,c],S.push(d)}function I(F){F=
e.k=C[F]||C[w];ia(r.f);b.position=F[m.Y].slice();a=F[m.V].slice();b.C=0;b.Q=0;b.d=void 0;b.M=ab;b.p=!1;b.t=!1;b.a=!1;b.i=!1;b.o=!1;y=bb;v=A=0;l=null;e.time=0;ia(r.f);M=0;F[m.m]?(c=F[m.m].slice(),g=[F[m.m][0]+15,F[m.m][1]+23],u=g.slice()):g=c=null;ga="4444444444444444444444444444444444444444"+F[m.X]+"4444444444444444444444444444444444444444";ga=ga.split("");Da=null;Ba(F);za.length=0;ta.length=0;Qa.width=K;Qa.height=P;var L=Qa.getContext("2d");L.fillStyle="rgba(0,0,0,0.7)";L.fillRect(0,0,K,P);L.fillStyle=
"#fff";L.font="20px courier";L.textAlign="center";L.fillText(e.k[m.K],K/2,P/2-50);L.fillText("Delivery Boy "+e.aa+" - "+e.ba+" Crow",K/2,P/2);L.font="15px courier";L.fillText("Click the "+(ba?"screen":"crow")+" to start!",K/2,P/2+60);L.fillText("< >: Select level",K/2,P/2+100);L.fillText(F[m.J]?"E: EDIT   "+(ba?"1":"D")+": DELETE   "+(ba?"2":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",K/2,P/2+120);L.beginPath();L.arc(a[0],a[1],16,0,360);L.lineWidth=1;L.strokeStyle="#fff";L.stroke();Na=ya.slice();
window.localStorage&&(window.localStorage.ka=JSON.stringify(C))}function La(){ia(r.h);e.time=Ka+e.k[m.B];H();U.style.cursor="none"}function ha(){e.aa+=1;U.style.cursor="auto";t(x.oa);I(w)}function V(){e.ba+=1;U.style.cursor="auto";t(x.ga);I(w)}function ia(a){e.state=a;if(ba){var b=document.getElementsByClassName("edit");a="btn edit"+(a===r.e?"":" h");for(var c=0;c<b.length;c++)b[c].setAttribute("class",a)}}function ja(){U.style.cursor="auto";e.state===r.e&&(C[w][m.X]=ga.join("").substring(Q,Q*na-
Q),C[w][m.Y]=b.position.slice(),C[w][m.V]=a.slice(),C[w][m.m]=c?c.slice():void 0,C[w][m.S]=Oa.I.slice());I(w)}function Fa(b){b.preventDefault();if(e.state===r.e)Xa=!Xa;else if(e.state===r.h&&v<Ka)if(b=Aa(b),(la(a[0]-8,a[1]-8,16,16,E.s)||ka(a[0],a[1],0,0,E.s))&&A<hb)t(x.U),A++;else{var c;for(c=0;c<za.length;c++)if(wa(b,za[c].position)){A=Math.max(A,ib);t(x.U);za.splice(c,1);break}}}function ra(){if(e.state===r.e)if(M<aa){var F=Q*Math.floor(z[1]/B)+Math.floor(z[0]/B);F<ga.length&&(ga[F]=""+M)}else if(M===
fa.la)b.position=z.slice();else if(M===fa.r)a=z.slice();else if(M===fa.u&&c)c=z.slice(),g=[c[0]+15,c[1]+23],u=g.slice();else{if(M===fa.j)for(Oa.I=z.slice(),F=0;F<S.length;F++){var d=S[F];d.position[0]=z[0]+16*F;d.position[1]=z[1]-d.size}}else e.state!==r.f||ba?0<A&&v<Ka&&(A--,t(x.fa),F=Object.create(jb),F.position=a.slice(),ta.push(F)):z[0]>a[0]-16&&(z[0]<a[0]+16&&z[1]>a[1]-16&&z[1]<a[1]+16)&&La()}function Ca(){var a=b.N,c=da();b.a||(a=0);a=Math.min(c,a+c/7);b.N=a;return ea(E.n)?c/2:a}function wa(a,
b){return Math.round(a[0]/B)===Math.round(b[0]/B)&&Math.round(a[1]/B)===Math.round(b[1]/B)}function Z(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function Ga(a,b){return Math.atan((b[1]-a[1])/(b[0]-a[0]))}function W(a,b){return ga[Q*Math.floor(b/B)+Math.floor(a/B)]}function ka(a,b,c,d,e){var g=b,l=W(a,g);c=a+c;topRight=W(c,g);bottomRight=W(c,b+d);bottomLeft=W(a,b);return l===e||topRight===e||bottomRight===e||bottomLeft===e}function la(a,b,c,d,e){b+=d;d=W(a,b);bottomLeft=W(a+
c,b);return d===e||bottomLeft===e}function ea(a){return ka(b.position[0]-8,b.position[1]-32,16,32,a)||ka(b.position[0],b.position[1]-8,0,0,a)}function J(a,b){function c(){Y.G({keyCode:b})}function e(){Y.H({keyCode:b})}var g=document.getElementById(a);d(g,"touchstart",c);d(g,"touchend",e);d(g,"MSPointerDown",c);d(g,"MSPointerUp",e)}function ma(a,b,c){a=document.getElementById(a);d(a,"touchstart",b);d(a,"touchend",c);d(a,"MSPointerDown",b);d(a,"MSPointerUp",c)}function $(a,b,c){var d=null,e="#00deff";
a===E.$?d=D.ya:a===E.A?d=D.A:a===E.xa?e="#000":a===E.ha?e="#0f0":a===E.s?d=D.s:a===E.n?d=D.n:a===E.l&&(d=D.l);p.fillStyle=e;p.fillRect(b,c,B,B);null!==d&&ca(d,b,c,B,B)}var K=640,P=400,B=16,Q=K/B,na=P/B,D={r:0,va:1,l:2,u:3,n:4,w:5,s:6,A:7,wa:8,ya:9,ta:10},xa=[{frame:{x:30,y:0,b:30,c:14},g:{x:1,y:1,b:30,c:14},frames:[{x:1,y:1,b:15,c:13},{x:17,y:1,b:15,c:13}]},{frame:{x:14,y:40,b:14,c:8},g:{x:1,y:7,b:14,c:8}},{frame:{x:32,y:14,b:16,c:16},g:{x:0,y:0,b:16,c:16}},{frame:{x:0,y:24,b:14,c:24},g:{x:1,y:7,
b:14,c:24}},{frame:{x:16,y:48,b:16,c:16},g:{x:0,y:0,b:16,c:16}},{frame:{x:0,y:0,b:30,c:24},g:{x:1,y:3,b:30,c:24},frames:[{x:0,y:0,b:15,c:24},{x:15,y:0,b:15,c:24}]},{frame:{x:48,y:14,b:16,c:10},g:{x:0,y:10,b:16,c:10}},{frame:{x:14,y:24,b:16,c:16},g:{x:0,y:0,b:16,c:16}},{frame:{x:31,y:30,b:6,c:14},g:{x:4,y:1,b:6,c:14}},{frame:{x:0,y:48,b:16,c:16},g:{x:0,y:0,b:16,c:16}},{frame:{x:36,y:32,b:11,c:13},g:{x:0,y:0,b:12,c:13}}],oa=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ha=window.btoa&&
window.atob,ya="023123467".split(""),x={ja:0,ma:1,fa:2,ua:3,T:4,ea:5,oa:6,ga:7,na:8,U:9,l:10,ia:11},E={EMPTY:"0",$:"1",n:"2",A:"3",xa:"4",ha:"5",s:"6",l:"7"},aa=8,fa={la:aa+0,r:aa+1,u:aa+2,j:aa+3},Ia=aa+4,r={f:0,h:1,e:2},ab=10,Pa=12,cb=[1,-6],hb=3,ib=5,bb=10,m={K:0,Y:1,V:2,S:3,m:4,B:5,X:6,j:7,v:8,J:9};(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+
"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();var ba=!1;if("ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints)for(var ba=!0,Ya=document.getElementsByClassName("btn"),Ra=0;Ra<Ya.length;Ra++)-1===
Ya[Ra].getAttribute("class").indexOf("edit")&&Ya[Ra].setAttribute("class","btn");var U=document.getElementById("C"),p=U.getContext("2d"),sa=new Image,Ma=document.createElement("canvas"),Za=0,Qa=document.createElement("canvas"),Ka=0,z=[0,0],Sa=!1,Y={da:{},H:function(a){Y.da[a.keyCode]=void 0},G:function(a){Y.da[a.keyCode]=Ka}},Ja=[],$a={},Na,M=0,Xa=!1,b={position:null,speed:4,N:0,P:0,Q:0,Ea:2,Da:-7,t:!1,i:!1,a:!1,p:!1,q:0,d:void 0,C:0,M:ab,o:!1};T=a=null;A=0;s=!1;v=0;y=bb;l=null;var ga=[],Da=null,
Oa={ca:null,size:1,position:null,I:[0,0]},S=[],kb={position:null},za=[],jb={position:null,speed:6},ta=[];u=g=c=null;var e={state:r.f,L:U.getBoundingClientRect(),time:0,aa:0,ba:0,k:null},db=[["Tutorial",[33,370],[K-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(ba?"S":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(ba?"DPad":"Mouse")+": move"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,[(ba?"2":"RClick")+": eat from nest or candy crumbs",(ba?"1":"LClick")+
": shoot!"]],[140,60,["Don't touch roofs or the boy"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[96,316],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 4",[75,370],[K-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000303030200000000200000000000000000207000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[1,2,3]]],C=window.localStorage&&window.localStorage.ka&&JSON.parse(window.localStorage.ka)||db,gb=C.length-db.length+1,w=0;sa.onload=function(){Ma.width=Za=sa.naturalWidth;Ma.height=sa.naturalHeight;var a=Ma.getContext("2d");a.translate(sa.naturalWidth,0);a.scale(-1,1);a.drawImage(sa,0,0)};sa.src="img/imgmap.png";window.addEventListener("keyup",Y.H,!1);window.addEventListener("keydown",Y.G,!1);if(ba){var eb=function(){e.state===r.f&&La()};d(U,"touchstart",eb);d(U,"MSPointerDown",eb);ma("s",function(){e.state===
r.f?Y.G({keyCode:68}):ra()},function(){Y.H({keyCode:68})});ma("e",function(a){e.state===r.f?Y.G({keyCode:74}):Fa(a)},function(){Y.H({keyCode:74})});var ua=document.getElementById("o"),pa=ua.getBoundingClientRect(),fb=[100,100],Ta=!1,va,Ua=function(a){a.preventDefault();va=a.changedTouches||a;pa=ua.getBoundingClientRect();Ta=!0};d(ua,"touchstart",Ua);d(ua,"MSPointerDown",Ua);d(ua,"touchmove",Ua);d(ua,"MSPointerMove",Ua);d(ua,"touchend",function(a){a.preventDefault();Ta=!1});d(ua,"MSPointerUp",function(a){a.preventDefault();
Ta=!1});ma("p",function(){Y.G({keyCode:e.state===r.f?73:32})},function(){Y.H({keyCode:e.state===r.f?73:32})});J("a",69);J("l",37);J("u",38);J("r",39);J("d",40);J("g",71);J("c",67);J("t",84);J("n",78);d(document.body,"contextmenu",function(a){a.preventDefault()})}else d(U,"click",ra),d(U,"contextmenu",Fa),d(U,"mousedown",function(a){1===a.which&&(Sa=!0);e.state===r.e&&Sa&&ra()}),d(U,"mouseup",function(a){1===a.which&&(Sa=!1)}),d(U,"mousemove",function(a){var b=Aa(a);z=[b[0],b[1]];e.state===r.h?T=Aa(a).slice():
e.state===r.e&&Sa&&ra()});for(var Va=0;Va<oa.length;Va++)$a[Va]=Wa.qa(["synth",0,0.4,0,0.208,0,0.12,20,oa[Va],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);Na=ya.slice();q(x.ja,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);q(x.ma,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);q(x.ea,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);q(x.na,["saw",
0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);q(x.fa,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);q(x.ga,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);q(x.oa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);q(x.T,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,
0,0,0,0,0,1,0,0,0,0]);q(x.ua,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);q(x.U,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);q(x.l,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);q(x.ia,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);I(w);(function L(d){var q=d,n=da(),J=b.Ea,H=
b.position[0],W=b.position[1],f=Y.da;if(e.state===r.f)if(f[37]&&!b.a)w=(w+C.length-1)%C.length,I(w),b.a=!0;else if(f[39]&&!b.a)w=(w+1)%C.length,I(w),b.a=!0;else if(f[69]&&!b.a)b.a=!0,C[w][m.J]||O(),ia(r.e),f[69]=void 0;else if(f[68]&&!b.a)b.a=!0,C[w][m.J]&&(C.splice(w,1),w--,I(w)),f[68]=void 0;else if(f[74]&&C[w][m.J]&&!b.a)n=prompt("Level data",JSON.stringify(C[w])),f[74]=void 0;else if(f[73]){if(n=prompt("Level data"))try{O(JSON.parse(n))}catch(ma){alert("Error!")}f[73]=void 0}else f[37]||(f[39]||
f[68]||f[69]||f[74]||f[73])||(b.a=!1);else{if(e.state===r.e)if(f[37]&&!b.a)M=(M+Ia-1)%Ia,b.a=!0;else if(f[39]&&!b.a)M=(M+1)%Ia,b.a=!0;else if(f[71]&&!b.a)c instanceof Array?c=g=u=null:(c=[32,32],g=[c[0]+15,c[1]+23],u=g.slice()),b.a=!0;else if(f[67]&&!b.a){b.a=!0;try{var N=JSON.parse(prompt("Crates",JSON.stringify(C[w][m.j])));if(N instanceof Array){for(n=0;n<N.length;n++)"number"===!typeof n&&alert("Error!"),N[n]=Math.max(1,Math.min(5,N[n]));C[w][m.j]=N;Ba(C[w])}}catch(oa){alert("Error!")}f[67]=void 0}else f[78]&&
!b.a?(b.a=!0,(n=prompt("Name",C[w][m.K]))&&(C[w][m.K]=n),f[78]=!1):f[84]&&!b.a?(b.a=!0,q=+prompt("Time",C[w][m.B]),!isNaN(q)&&0<q&&(C[w][m.B]=q),f[84]=!1):f[69]&&!b.a?(b.a=!0,ja(),f[69]=void 0):f[37]||(f[39]||f[71]||f[67]||f[78]||f[84]||f[69])||(b.a=!1);else if(e.state===r.h){if(!f[32]||b.t||b.i||b.p)f[69]&&!b.p?(b.p=!0,0<b.C&&(b.C--,b.P=3,b.Q=q+5E3,N=Object.create(kb),N.position=[b.position[0]+4,b.position[1]-7],za.push(N),t(x.na))):f[32]||(f[69]||!b.p)||(b.p=!1);else a:if(b.p=!0,N=b.d,q=void 0!==
N?S[N]:void 0,void 0===q){for(N=0;N<S.length;N++)if(wa(b.position,S[N].position)){b.d=N;t(x.T);break a}ea(E.l)&&(b.C=3,t(x.l))}else b.d=void 0,t(x.T),ea(E.ha)&&void 0!==q&&(S.splice(N,1),0>=S.length?ha():t(x.ea));f[38]?ea(E.n)?(b.position[1]=Math.min(P-B,W-J),b.a=!0):b.t||b.i||(b.q=b.Da,b.N=n,b.t=!0,b.i=!0,t(x.ja)):!f[38]&&b.t&&(b.t=!1);f[37]&&(b.position[0]=Math.max(B,H-Ca()),b.a=!0,b.o=!0);f[39]&&(b.position[0]=Math.min(K-2*B,H+Ca()),b.a=!0,b.o=!1);f[40]&&ea(E.n)&&(b.position[1]=Math.min(P,W+J),
b.a=!0);f[37]||(f[38]||f[39]||f[40])||(b.a=!1)}f[27]&&ja()}Ka=d;if(Ta&&va){var G;if(va.clientX)G=va;else if(va instanceof Array)for(n=0;n<va.length;n++)if(f=va[n],f.clientX>=pa.left&&f.clientX<pa.left+pa.width&&f.clientY>=pa.top&&f.clientY<pa.top+pa.height){G=va[n];break}if(G){G=[G.clientX-pa.left,G.clientY-pa.top];var f=Ga(fb,G),n=Z(fb,G)/12.5,k;e.state===r.h?k=a:e.state===r.e&&(k=z);k&&(k[0]+=(e.state===r.e?Math.round(Math.cos(f)):Math.cos(f))*(100>G[0]?-n:n),k[1]+=(e.state===r.e?Math.round(Math.sin(f)):
Math.sin(f))*(100>G[0]?-n:n),k[0]=Math.max(0,Math.min(k[0],K-1)),k[1]=Math.max(0,Math.min(k[1],P-1)));Xa&&ra()}}if(e.state===r.h){e.L=U.getBoundingClientRect();k=0;for(var h;k<=b.q;){if(la(b.position[0]-8,b.position[1]+k,16,0,E.$)){h=b.position[1]+k-(b.position[1]+k)%B;break}k+=B}h?(b.position[1]=h,b.i&&(b.N=0,(h=void 0!==b.d?S[b.d]:void 0)&&b.q>12-h.size&&h&&breakCrate(h)),b.i=!1,b.q=0):la(b.position[0]-16,b.position[1]-32,16,32,E.n)?b.i=!1:(b.q+=1,b.i=!0,b.position[1]+=b.q);void 0!==b.d&&(S[b.d].position[0]=
b.position[0]+cb[0],S[b.d].position[1]=b.position[1]+cb[1]);b.Q<d&&0<b.P&&(b.P=0);for(h=0;h<ta.length;h++)if(k=ta[h],k.position[1]+=k.speed,wa(b.position,k.position))t(x.ma),b.d=void 0,(void 0).position=(void 0).I.slice(),b.M--,0>=b.M&&V(),ta.splice(h,1),h--;else if(k.position[1]>P||la(k.position[0],k.position[1],0,0,E.A))ta.splice(h,1),h--;e.time<d&&V();a&&T&&(f=Ga(a,T),n=a[0]>T[0]?-1:1,h=Math.abs(a[0]-T[0]),k=Math.abs(a[1]-T[1]),3<h||3<k)&&(G=16*Math.cos(f)*n,f=16*Math.sin(f)*n,Math.abs(G)>h&&(G=
h*G/Math.abs(G)),Math.abs(f)>k&&(f=k*f/Math.abs(f)),a[0]+=G,a[1]+=f);da();s=2>=Z(a,b.position);c&&(h=la(a[0],a[1],0,0,E.s)?g:a,k=Ga(u,h),G=u[0]>h[0]?-1:1,3<Math.abs(h[0]-u[0])||3<Math.abs(h[1]-u[1]))&&(u[0]+=1*Math.cos(k)*G,u[1]+=1*Math.sin(k)*G);if(((da(),2>=Z(a,b.position))||ka(a[0],a[1],0,0,E.A)||c&&3>Z(u,a))&&v<d){v=d+5E3;t(x.ia);A=0;y--;0>=y&&ha();if(!Da)for(Da=[],h=0;h<ga.length;h++)ga[h]===E.$&&Da.push(h);h=Da[Math.floor(Math.random()*Da.length)];h=[h%Q*B,Math.floor(h/Q)*B];l=[h[0]-6,h[1]-
10]}}e.L=U.getBoundingClientRect();p.fillStyle="black";p.fillRect(0,0,K,P);for(h=0;h<Q;h++)for(k=0;k<na;k++)$(ga[Q*k+h],h*B,k*B);for(k=0;k<S.length;k++)k!==b.d&&(h=S[k],p.drawImage(h.ca,h.position[0]-8,h.position[1]-8));for(k=0;k<za.length;k++)h=za[k],ca(D.va,h.position[0]-8,h.position[1]-8);for(k=0;k<ta.length;k++)h=ta[k],ca(D.wa,h.position[0]-8,h.position[1]-8);c&&ca(D.u,c[0],c[1]);if(e.k[m.v])for(h=0;h<e.k[m.v].length;h++){k=p;H=e.k[m.v][h][2];G=e.k[m.v][h][0];J=e.k[m.v][h][1];f=k.fillColor;n=
k.textAlign;k.fillStyle="black";for(H=H.slice();0<H.length;)k.fillText(H.shift(),G,J),J+=10;k.fillStyle=f;k.textAlign=n}l&&ca(D.ta,l[0]-8,l[1]);e.state===r.h?b.i?X(D.w,b.position[0]-8,b.position[1]-24,0,b.o):b.a?X(D.w,b.position[0]-8,b.position[1]-24,10,b.o,d):X(D.w,b.position[0]-8,b.position[1]-24,1,b.o):X(D.w,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(h=S[b.d],p.drawImage(h.ca,b.o?h.position[0]+2:h.position[0]-15-h.size,h.position[1]-10));s&&(p.beginPath(),p.arc(b.position[0],b.position[1],
7*da()+25,0,360),p.lineWidth=2,p.strokeStyle="#f09",p.stroke());e.state===r.h?v>d&&0===Math.floor(d/100)%2||X(D.r,a[0]-8,a[1]-8,2,!1,d):X(D.r,a[0]-8,a[1]-8,0);c&&(p.fillStyle="red",p.fillRect(u[0]-1,u[1]-1,2,2),p.beginPath(),p.arc(u[0],u[1],5,0,360),p.lineWidth=2,p.strokeStyle="red",p.stroke());e.state===r.h?(p.fillStyle="#00deff",p.fillText("BOY",10,396),p.fillStyle="red",p.fillText("CROW",600,12),p.fillStyle="white",p.fillText("SPEED: "+da()+"   BOOST: "+Math.max(0,Math.ceil((b.Q-d)/1E3))+"   TIME: "+
Math.max(0,Math.ceil((e.time-d)/1E3))+"   CANDIES: "+b.C+"   CRATES: "+b.M,50,396),p.fillText("SHOTS: "+A+"   STUN: "+Math.max(0,Math.ceil((v-d)/1E3))+"   HEALTH: "+y,410,12)):e.state===r.e&&(p.fillStyle="white",p.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+C[w][m.B]+")   N: NAME ("+C[w][m.K]+")"+(ba?"   1: PAINT   2: TOGGLE PAINT":""),12,12));e.state===r.f&&p.drawImage(Qa,0,0);e.state===r.e&&(p.globalAlpha=0.6,M<aa?($(""+M,z[0]-z[0]%B,z[1]-z[1]%B),p.strokeStyle="#000",p.strokeRect(z[0]-
z[0]%B,z[1]-z[1]%B,B,B)):M===fa.la?X(D.w,z[0]-8,z[1]-24,1):M===fa.r?X(D.r,z[0]-8,z[1]-8,0):M===fa.u?ca(D.u,z[0],z[1]):M===fa.j&&(p.fillStyle="yellow",p.fillRect(z[0]-8,z[1]-8,16,16),p.fillStyle="#000",p.fillText("C",z[0]-4,z[1]+4)),p.globalAlpha=1);window.requestAnimationFrame(L)})()})();

/* http://github.com/4lbertoC/mirrordelivery */var ka={};
(function(a){function t(a,c){return c?L(a&255)+t(a>>8,c-1):""}var v=this.pa=a||44100,r=2*v,L=String.fromCharCode,d;this.Ea=function(a){var c=Audio,f=btoa,h="",w=a.length;for(m=0;m<w;m++)var P=32767*a[m]|0,P=-32768>P?-32768:32767<P?32767:P,P=P+(0>P?65536:0),h=h+String.fromCharCode(P&255,P>>8);a=h;a=["RIFF",36+(d=a.length),"WAVEfmt ",16,1,1,v,r,2,16,"data",d,a];h="";for(m=0;m<a.length;m++)h+="s"=="s4s4224422s4s"[m]?a[m]:t(a[m],"s4s4224422s4s".charCodeAt(m)-48);return new c("data:audio/wav;base64,"+f(h))};
var f,m,h=Math.sin,c=2*Math.PI;this.filter=function(a,c,h,d,w,r,v,t,L,D){h=h?h:1;d=d?d:a.length;f=a.slice(0);for(m=h;m<d;m++)f[m]=c(a,f,h,d,m,w,r,v,t,L,D);return f};this.filters={Ka:function(a,c,h,f,w,d){return c[w-1]+d*(a[w]-c[w-1])},La:function(a,c,h,f,d,m){return c[d-1]+m*(f-d)/(f-h)*(a[d]-c[d-1])},Ja:function(a,c,h,f,d,m){return m*(c[d-1]+a[d]-a[d-1])}};this.ra=function(a,d,h,f,r,t,L,D,T){d=d*c/v;var M=Array(a|0);for(m=0;m<a;m++)M[m]=h(m*d,f,r,t,L,D,T);return M};var D=0;this.F={Fa:function(a){4>
a%c&&(D=2*Math.random()-1);return D},Ma:Math.random,Ha:Math.sin,Ia:function(a){return h(a)+0.5*h(a/2)+0.3*h(a/4)},Ga:function(a){return 2*(a/c-(a/c+0.5|0))},sa:function(a,c){return h(a)>c?1:h(a)<c?-1:c}}}).apply(ka);var Da={};
(function(){this.Z=[];this.W={square:ka.F.sa,saw:ka.F.Ga,sine:ka.F.Ha,noise:ka.F.Fa,synth:ka.F.Ia};this.Aa=function(){var a=[],t;for(t in this.W)a.push(t);return a};this.Ba=function(){function a(a,d,f,m,h){void 0===h&&(h=(f-d)/1E3);a={name:a,id:a.replace(/ /g,""),min:d,max:f,step:h,za:m,type:"range",group:v};t.push(a)}var t=[],v=0,r=this.Aa();(function(a,d,f){a={name:a,id:a.replace(/ /g,""),options:d,za:f,type:"option",group:v};t.push(a)})("Generator",r,r[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);v++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);v++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);v++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);v++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);v++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);v++;a("RepeatSpeed",
0,0.8,0);v++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);v++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return t};this.ra=function(a){var t=2*Math.PI,v=Math.sin,r=Math.pow,L=Math.abs,d=ka.pa,f=a.SuperSamplingQuality|0;1>f&&(f=1);for(var d=d*f,m=[{D:0,R:1,time:a.AttackTime},{D:1+a.SustainPunch,R:1,time:a.SustainTime},{D:1,R:0,time:a.DecayTime}],h=m.length,c=0;c<h;c++)m[c].O=1+(m[c].time*d|0);
for(var D=void 0,$=0,la=-1,H=0,Aa=-1,w=0,c=0;c<h;c++)w+=m[c].O;w<d/2&&(w=d/2);var P=Array(w/f|0),J=0,ua=0,T=Da.W[a.Generator];void 0===T&&(T=this.W.sa);var M=0,M=a.SquareDuty,Ha=a.SquareDutySweep/d,ca=0,Q=a.StartFrequency*t/d,va=1+64*r(a.Slide,3)/d,aa=r(a.DeltaSlide,3)/(1E3*d);void 0!==f&&(aa/=f);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var ma=a.MinFrequency*t/d,Ea=a.MaxFrequency*t/d,wa=0,na=a.VibratoFrequency*
t/d,Y=a.VibratoDepth,oa=1+3*r(a.VibratoFrequencySlide,3)/d,da=a.VibratoDepthSlide/d,ba=0,ea=a.ChangeSpeed*d,G=r(a.ChangeAmount,2),G=0<a.ChangeAmount?1+10*G:1-0.9*G,xa=Array(1024),c=0;1024>c;c++)xa[c]=0;var ya=0,E=1020*r(a.PhaserOffset,2),K=4E3*r(a.PhaserSweep,3)/d,z=1E-5<L(K)||1E-5<L(E),fa=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,ga=0,F=0,U=r(a.LPFilterCutoff,3)/10,Ia=1+a.HPFilterCutoffSweep/1E4,ha=5/(1+20*r(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<ha&&(ha=0.8);var ha=1-ha,Ja=0.999>
a.LPFilterCutoff,y=0,B=r(a.HPFilterCutoff,2)/10,ia=1+a.HPFilterCutoffSweep/1E4,V=0,Ba=w;0<a.RepeatSpeed&&(Ba=r(1-a.RepeatSpeed,2)*d+32);for(var q=a.MasterVolume,Ca=0,c=0;c<w;c++)J=T(ca,M,0),M+=Ha,0>M?M=0:0.5<M&&(M=0.5),V>Ba&&(ca=0,Q=a.StartFrequency*t/d,va=1+3*r(a.Slide,3)/d,aa=r(a.DeltaSlide,3)/(1E3*d),void 0!==f&&(aa/=f),ba=0,ea=a.ChangeSpeed*d,G=1+(a.ChangeAmount|0)/12,V=0),V+=1,ca+=Q,va+=aa,Q*=va,ba>ea&&(Q*=G,ea=w),ba+=1,Q>Ea?Q=Ea:Q<ma&&(Q=ma),wa+=na,D=Q*v(wa)*Y,ca+=D,na*=oa,da&&(Y+=da,0>Y?da=
Y=0:1<Y&&(Y=1,da=0)),fa&&(0.0010<L(B)&&(B*=ia,1E-5>B?B=1E-5:0.1<B&&(B=0.1)),D=ga,U*=Ia,0>U?U=0:0.1<U&&(U=0.1),Ja?(F+=(J-ga)*U,F*=ha):(ga=J,F=0),ga+=F,y+=ga-D,J=y*=1-B),z&&(E+=K,0>E&&(E=-E,K=-K),1023<E&&(E=1023,K=0),xa[ya]=J,J+=xa[ya-(E|0)+1024&1023],ya=ya+1&1023),c>Aa&&(la+=1,D=la<h?m[la]:{D:0,R:0,O:w},$=D.D,H=(D.R-D.D)/(D.O+1),Aa+=D.O),J*=$,$+=H,J*=q,1<f?(ua+=J,0===(c+1)%f&&(P[Ca]=ua/f,Ca+=1,ua=0)):P[c]=J;a=d/100|0;t=Array(a);for(c=0;c<a;c++)t[c]=0;return t.concat(P).concat(t)};this.Z=this.Ba()}).apply(Da);var Sa={};(function(){this.qa=function(a){a=Da.ra(this.ya(a));return ka.Ea(a)};this.ya=function(a){for(var t={},v=Da.Z.length,r=0;r<v;r++)t[Da.Z[r].id]=a[r];return t}}).apply(Sa);(function(){var a,t,v,r,L,d,f,m,h;function c(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}function D(a,b,c,d,x,h){var e=U[a].frame,f=U[a].g;a=U[a].frames;d=h?a[Math.floor(h*d/1E3)%a.length]:a[d];x?p.drawImage(Ka,Ua-(e.x+d.x)-d.b,e.y+d.y,d.b,d.c,b+f.x,c+f.y,d.b,d.c):p.drawImage(pa,e.x+d.x,e.y+d.y,d.b,d.c,b+f.x,c+f.y,d.b,d.c)}function $(a,b,c,d,x){var e=U[a].frame;a=U[a].g;p.drawImage(pa,e.x,e.y,d||e.b,x||e.c,b+a.x,c+a.y,a.b,a.c)}function la(a){var b=
a.clientX-e.L.left;a=a.clientY-e.L.top;b=Math.max(0,Math.min(b,E-1));a=Math.max(0,Math.min(a,K-1));return[b,a]}function H(a,b){if(ha)try{Fa[a]=Sa.qa(b)}catch(c){}}function Aa(){if(ha)try{e.state===q.h&&0<La.length&&(Va[La.shift()].play(),setTimeout(Aa,200))}catch(a){}}function w(a){if(ha)try{Fa[a]&&(Fa[a].pause(),Fa[a].currentTime=0,Fa[a].play())}catch(b){}}function P(a){a=a||A[s];a=["CustomLevel"+$a++,a[n.Y].slice(),a[n.V].slice(),a[n.S].slice(),a[n.m]&&a[n.m].slice(),a[n.B],a[n.X],a[n.j].slice(),
null,!0];A.push(a);e.state===q.f&&(s=A.length-1,T(s))}function J(){return Math.max(1,b.speed+b.P-(void 0!==b.d?R[b.d].size:0))}function ua(a){var b=a[n.S],c,d,e,f;Ma.I=b;for(var h=R.length=0;h<a[n.j].length;h++)c=a[n.j][h],d=Object.create(Ma),d.size=c,e=document.createElement("canvas"),e.width=Na+c,e.height=Na+c,f=e.getContext("2d"),f.fillStyle="yellow",f.fillRect(0,0,Na+c,Na+c),f.fillStyle="black",f.fillText(c,5,10),d.ba=e,e=b[0]+16*h,c=b[1]-c,d.position=[e,c],d.I=[e,c],R.push(d)}function T(Z){Z=
e.k=A[Z]||A[s];Q(q.f);b.position=Z[n.Y].slice();a=Z[n.V].slice();b.C=0;b.Q=0;b.d=void 0;b.M=Ca;b.p=!1;b.t=!1;b.a=!1;b.i=!1;b.o=!1;t=Wa;r=v=0;e.time=0;Q(q.f);N=0;Z[n.m]?(f=Z[n.m].slice(),m=[Z[n.m][0]+15,Z[n.m][1]+23],h=m.slice()):m=f=null;qa="4444444444444444444444444444444444444444"+Z[n.X]+"4444444444444444444444444444444444444444";qa=qa.split("");ua(Z);za.length=0;ra.length=0;Oa.width=E;Oa.height=K;var c=Oa.getContext("2d");c.fillStyle="rgba(0,0,0,0.7)";c.fillRect(0,0,E,K);c.fillStyle="#fff";c.font=
"20px courier";c.textAlign="center";c.fillText(e.k[n.K],E/2,K/2-50);c.fillText("Delivery Boy "+e.$+" - "+e.aa+" Crow",E/2,K/2);c.font="15px courier";c.fillText("Click the "+(X?"screen":"crow")+" to start!",E/2,K/2+60);c.fillText("< >: Select level",E/2,K/2+100);c.fillText(Z[n.J]?"E: EDIT   "+(X?"1":"D")+": DELETE   "+(X?"2":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",E/2,K/2+120);c.beginPath();c.arc(a[0],a[1],16,0,360);c.lineWidth=1;c.strokeStyle="#fff";c.stroke();La=Ja.slice();window.localStorage&&
(window.localStorage.ja=JSON.stringify(A))}function M(){Q(q.h);e.time=Ga+e.k[n.B];Aa();S.style.cursor="none"}function Ha(){e.$+=1;S.style.cursor="auto";w(y.oa);T(s)}function ca(){e.aa+=1;S.style.cursor="auto";w(y.fa);T(s)}function Q(a){e.state=a;if(X){var b=document.getElementsByClassName("edit");a="btn edit"+(a===q.e?"":" h");for(var c=0;c<b.length;c++)b[c].setAttribute("class",a)}}function va(){S.style.cursor="auto";e.state===q.e&&(A[s][n.X]=qa.join("").substring(fa,fa*ga-fa),A[s][n.Y]=b.position.slice(),
A[s][n.V]=a.slice(),A[s][n.m]=f?f.slice():void 0,A[s][n.S]=Ma.I.slice());T(s)}function aa(b){b.preventDefault();if(e.state===q.e)Ta=!Ta;else if(e.state===q.h&&r<Ga)if(b=la(b),(ba(a[0]-8,a[1]-8,16,16,B.s)||da(a[0],a[1],0,0,B.s))&&v<ab)w(y.U),v++;else{var c;for(c=0;c<za.length;c++)if(wa(b,za[c].position)){v=Math.max(v,bb);w(y.U);za.splice(c,1);break}}}function ma(){if(e.state===q.e)if(N<ia){var c=fa*Math.floor(u[1]/z)+Math.floor(u[0]/z);c<qa.length&&(qa[c]=""+N)}else if(N===V.ka)b.position=u.slice();
else if(N===V.r)a=u.slice();else if(N===V.u&&f)f=u.slice(),m=[f[0]+15,f[1]+23],h=m.slice();else{if(N===V.j)for(Ma.I=u.slice(),c=0;c<R.length;c++){var d=R[c];d.position[0]=u[0]+16*c;d.position[1]=u[1]-d.size}}else e.state!==q.f||X?0<v&&r<Ga&&(v--,w(y.ea),c=Object.create(cb),c.position=a.slice(),ra.push(c)):u[0]>a[0]-16&&(u[0]<a[0]+16&&u[1]>a[1]-16&&u[1]<a[1]+16)&&M()}function Ea(){var a=b.N,c=J();b.a||(a=0);a=Math.min(c,a+c/7);b.N=a;return ea(B.n)?c/2:a}function wa(a,b){return Math.round(a[0]/z)===
Math.round(b[0]/z)&&Math.round(a[1]/z)===Math.round(b[1]/z)}function na(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function Y(a,b){return Math.atan((b[1]-a[1])/(b[0]-a[0]))}function oa(a,b){return qa[fa*Math.floor(b/z)+Math.floor(a/z)]}function da(a,b,c,d,e){var f=b,h=oa(a,f);c=a+c;topRight=oa(c,f);bottomRight=oa(c,b+d);bottomLeft=oa(a,b);return h===e||topRight===e||bottomRight===e||bottomLeft===e}function ba(a,b,c,d,e){b+=d;d=oa(a,b);bottomLeft=oa(a+c,b);return d===e||bottomLeft===
e}function ea(a){return da(b.position[0]-8,b.position[1]-32,16,32,a)||da(b.position[0],b.position[1]-8,0,0,a)}function G(a,b){function d(){W.G({keyCode:b})}function e(){W.H({keyCode:b})}var f=document.getElementById(a);c(f,"touchstart",d);c(f,"touchend",e);c(f,"MSPointerDown",d);c(f,"MSPointerUp",e)}function xa(a,b,d){a=document.getElementById(a);c(a,"touchstart",b);c(a,"touchend",d);c(a,"MSPointerDown",b);c(a,"MSPointerUp",d)}function ya(a,b,c){var d=null,e="#00deff";a===B.ma?d=F.xa:a===B.A?d=F.A:
a===B.wa?e="#000":a===B.ga?e="#0f0":a===B.s?d=F.s:a===B.n?d=F.n:a===B.l&&(d=F.l);p.fillStyle=e;p.fillRect(b,c,z,z);null!==d&&$(d,b,c,z,z)}var E=640,K=400,z=16,fa=E/z,ga=K/z,F={r:0,ua:1,l:2,u:3,n:4,w:5,s:6,A:7,va:8,xa:9},U=[{frame:{x:30,y:0,b:30,c:14},g:{x:1,y:1,b:30,c:14},frames:[{x:1,y:1,b:15,c:13},{x:17,y:1,b:15,c:13}]},{frame:{x:14,y:40,b:14,c:8},g:{x:1,y:7,b:14,c:8}},{frame:{x:32,y:14,b:16,c:16},g:{x:0,y:0,b:16,c:16}},{frame:{x:0,y:24,b:14,c:24},g:{x:1,y:7,b:14,c:24}},{frame:{x:16,y:48,b:16,c:16},
g:{x:0,y:0,b:16,c:16}},{frame:{x:0,y:0,b:30,c:24},g:{x:1,y:3,b:30,c:24},frames:[{x:0,y:0,b:15,c:24},{x:15,y:0,b:15,c:24}]},{frame:{x:48,y:14,b:16,c:10},g:{x:0,y:10,b:16,c:10}},{frame:{x:14,y:24,b:16,c:16},g:{x:0,y:0,b:16,c:16}},{frame:{x:31,y:30,b:6,c:14},g:{x:4,y:1,b:6,c:14}},{frame:{x:0,y:48,b:16,c:16},g:{x:0,y:0,b:16,c:16}}],Ia=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],ha=window.btoa&&window.atob,Ja="023123467".split(""),y={ia:0,la:1,ea:2,ta:3,T:4,da:5,oa:6,fa:7,na:8,U:9,l:10,
ha:11},B={EMPTY:"0",ma:"1",n:"2",A:"3",wa:"4",ga:"5",s:"6",l:"7"},ia=8,V={ka:ia+0,r:ia+1,u:ia+2,j:ia+3},Ba=ia+4,q={f:0,h:1,e:2},Ca=10,Na=12,Xa=[1,-6],ab=3,bb=5,Wa=10,n={K:0,Y:1,V:2,S:3,m:4,B:5,X:6,j:7,v:8,J:9};(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||
(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();var X=!1;if("ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints)for(var X=!0,C=document.getElementsByClassName("btn"),Pa=0;Pa<C.length;Pa++)-1===C[Pa].getAttribute("class").indexOf("edit")&&C[Pa].setAttribute("class","btn");var S=document.getElementById("C"),
p=S.getContext("2d"),pa=new Image,Ka=document.createElement("canvas"),Ua=0,Oa=document.createElement("canvas"),Ga=0,u=[0,0],Qa=!1,W={ca:{},H:function(a){W.ca[a.keyCode]=void 0},G:function(a){W.ca[a.keyCode]=Ga}},Fa=[],Va={},La,N=0,Ta=!1,b={position:null,speed:4,N:0,P:0,Q:0,Da:2,Ca:-7,t:!1,i:!1,a:!1,p:!1,q:0,d:void 0,C:0,M:Ca,o:!1};L=a=null;v=0;d=!1;r=0;t=Wa;var qa=[],Ma={ba:null,size:1,position:null,I:[0,0]},R=[],db={position:null},za=[],cb={position:null,speed:6},ra=[];h=m=f=null;var e={state:q.f,
L:S.getBoundingClientRect(),time:0,$:0,aa:0,k:null},C=[["Tutorial",[33,370],[E-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(X?"S":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(X?"DPad":"Mouse")+": move"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,[(X?"2":"RClick")+": eat from nest or candy crumbs",(X?"1":"LClick")+
": shoot!"]],[140,60,["Don't touch roofs or the boy"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[96,316],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 4",[75,370],[E-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000303030200000000200000000000000000207000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[1,2,3]]],A=window.localStorage&&window.localStorage.ja&&JSON.parse(window.localStorage.ja)||C,$a=A.length-C.length+1,s=0;pa.onload=function(){Ka.width=Ua=pa.naturalWidth;Ka.height=pa.naturalHeight;var a=Ka.getContext("2d");a.translate(pa.naturalWidth,0);a.scale(-1,1);a.drawImage(pa,0,0)};pa.src="img/imgmap.png";window.addEventListener("keyup",W.H,!1);window.addEventListener("keydown",W.G,!1);if(X){C=function(){e.state===q.f&&M()};c(S,"touchstart",C);c(S,"MSPointerDown",C);xa("s",function(){e.state===
q.f?W.G({keyCode:68}):ma()},function(){W.H({keyCode:68})});xa("e",function(a){e.state===q.f?W.G({keyCode:74}):aa(a)},function(){W.H({keyCode:74})});var sa=document.getElementById("o"),ja=sa.getBoundingClientRect(),Ya=[100,100],Ra=!1,ta,C=function(a){a.preventDefault();ta=a.changedTouches;ja=sa.getBoundingClientRect();Ra=!0};c(sa,"touchstart",C);c(sa,"MSPointerDown",C);c(sa,"touchmove",C);c(sa,"MSPointerMove",C);c(sa,"touchend",function(a){a.preventDefault();Ra=!1});c(sa,"MSPointerUp",function(a){a.preventDefault();
Ra=!1});xa("p",function(){W.G({keyCode:e.state===q.f?74:32})},function(){W.H({keyCode:e.state===q.f?74:32})});G("a",69);G("l",37);G("u",38);G("r",39);G("d",40);G("g",71);G("c",67);G("t",84);G("n",78);c(document.body,"contextmenu",function(a){a.preventDefault()})}else c(S,"click",ma),c(S,"contextmenu",aa),c(S,"mousedown",function(a){1===a.which&&(Qa=!0);e.state===q.e&&Qa&&ma()}),c(S,"mouseup",function(a){1===a.which&&(Qa=!1)}),c(S,"mousemove",function(a){var b=la(a);u=[b[0],b[1]];e.state===q.h?L=la(a).slice():
e.state===q.e&&Qa&&ma()});for(C=0;C<Ia.length;C++)Va[C]=Sa.qa(["synth",0,0.4,0,0.208,0,0.12,20,Ia[C],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);La=Ja.slice();H(y.ia,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);H(y.la,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);H(y.da,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);H(y.na,["saw",0,0.4,
0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);H(y.ea,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);H(y.fa,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);H(y.oa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);H(y.T,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,
0,0,0,0,1,0,0,0,0]);H(y.ta,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);H(y.U,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);H(y.l,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);H(y.ha,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);T(s);(function Za(c){var C=c,x=J(),H=b.Da,G=b.position[0],
M=b.position[1],g=W.ca;if(e.state===q.f)if(g[37]&&!b.a)s=(s+A.length-1)%A.length,T(s),b.a=!0;else if(g[39]&&!b.a)s=(s+1)%A.length,T(s),b.a=!0;else if(g[69]&&!b.a)b.a=!0,A[s][n.J]||P(),Q(q.e),g[69]=void 0;else if(g[68]&&!b.a)b.a=!0,A[s][n.J]&&(A.splice(s,1),s--,T(s)),g[68]=void 0;else if(g[74]&&A[s][n.J]&&!b.a)x=prompt("Level data",JSON.stringify(A[s])),g[74]=void 0;else if(g[73]){if(x=prompt("Level data"))try{P(JSON.parse(x))}catch(U){alert("Error!")}g[73]=void 0}else g[37]||(g[39]||g[68]||g[69]||
g[74]||g[73])||(b.a=!1);else{if(e.state===q.e)if(g[37]&&!b.a)N=(N+Ba-1)%Ba,b.a=!0;else if(g[39]&&!b.a)N=(N+1)%Ba,b.a=!0;else if(g[71]&&!b.a)f instanceof Array?f=m=h=null:(f=[32,32],m=[f[0]+15,f[1]+23],h=m.slice()),b.a=!0;else if(g[67]&&!b.a){b.a=!0;try{var O=JSON.parse(prompt("Crates",JSON.stringify(A[s][n.j])));if(O instanceof Array){for(x=0;x<O.length;x++)"number"===!typeof x&&alert("Error!"),O[x]=Math.max(1,Math.min(5,O[x]));A[s][n.j]=O;ua(A[s])}}catch(aa){alert("Error!")}g[67]=void 0}else g[78]&&
!b.a?(b.a=!0,(x=prompt("Name",A[s][n.K]))&&(A[s][n.K]=x),g[78]=!1):g[84]&&!b.a?(b.a=!0,C=+prompt("Time",A[s][n.B]),!isNaN(C)&&0<C&&(A[s][n.B]=C),g[84]=!1):g[69]&&!b.a?(b.a=!0,va(),g[69]=void 0):g[37]||(g[39]||g[71]||g[67]||g[78]||g[84]||g[69])||(b.a=!1);else if(e.state===q.h){if(!g[32]||b.t||b.i||b.p)g[69]&&!b.p?(b.p=!0,0<b.C&&(b.C--,b.P=3,b.Q=C+5E3,O=Object.create(db),O.position=[b.position[0]+4,b.position[1]-7],za.push(O),w(y.na))):g[32]||(g[69]||!b.p)||(b.p=!1);else a:if(b.p=!0,O=b.d,C=void 0!==
O?R[O]:void 0,void 0===C){for(O=0;O<R.length;O++)if(wa(b.position,R[O].position)){b.d=O;w(y.T);break a}ea(B.l)&&(b.C=3,w(y.l))}else b.d=void 0,w(y.T),ea(B.ga)&&void 0!==C&&(R.splice(O,1),0>=R.length?Ha():w(y.da));g[38]?ea(B.n)?(b.position[1]=Math.min(K-z,M-H),b.a=!0):b.t||b.i||(b.q=b.Ca,b.N=x,b.t=!0,b.i=!0,w(y.ia)):!g[38]&&b.t&&(b.t=!1);g[37]&&(b.position[0]=Math.max(z,G-Ea()),b.a=!0,b.o=!0);g[39]&&(b.position[0]=Math.min(E-2*z,G+Ea()),b.a=!0,b.o=!1);g[40]&&ea(B.n)&&(b.position[1]=Math.min(K,M+H),
b.a=!0);g[37]||(g[38]||g[39]||g[40])||(b.a=!1)}g[27]&&va()}Ga=c;if(Ra&&ta){var I;if(ta.clientX)I=ta;else if(ta instanceof Array)for(x=0;x<ta.length;x++)if(g=ta[x],g.clientX>=ja.left&&g.clientX<ja.left+ja.width&&g.clientY>=ja.top&&g.clientY<ja.top+ja.height){I=ta[x];break}if(I){I=[I.clientX-ja.left,I.clientY-ja.top];var g=Y(Ya,I),x=na(Ya,I)/12.5,k;e.state===q.h?k=a:e.state===q.e&&(k=u);k&&(k[0]+=(e.state===q.e?Math.round(Math.cos(g)):Math.cos(g))*(100>I[0]?-x:x),k[1]+=(e.state===q.e?Math.round(Math.sin(g)):
Math.sin(g))*(100>I[0]?-x:x),k[0]=Math.max(0,Math.min(k[0],E-1)),k[1]=Math.max(0,Math.min(k[1],K-1)));Ta&&ma()}}if(e.state===q.h){e.L=S.getBoundingClientRect();k=0;for(var l;k<=b.q;){if(ba(b.position[0]-8,b.position[1]+k,16,0,B.ma)){l=b.position[1]+k-(b.position[1]+k)%z;break}k+=z}l?(b.position[1]=l,b.i&&(b.N=0,(l=void 0!==b.d?R[b.d]:void 0)&&b.q>12-l.size&&l&&breakCrate(l)),b.i=!1,b.q=0):ba(b.position[0]-16,b.position[1]-32,16,32,B.n)?b.i=!1:(b.q+=1,b.i=!0,b.position[1]+=b.q);void 0!==b.d&&(R[b.d].position[0]=
b.position[0]+Xa[0],R[b.d].position[1]=b.position[1]+Xa[1]);b.Q<c&&0<b.P&&(b.P=0);for(l=0;l<ra.length;l++)if(k=ra[l],k.position[1]+=k.speed,wa(b.position,k.position))w(y.la),b.d=void 0,(void 0).position=(void 0).I.slice(),b.M--,0>=b.M&&ca(),ra.splice(l,1),l--;else if(k.position[1]>K||ba(k.position[0],k.position[1],0,0,B.A))ra.splice(l,1),l--;e.time<c&&ca();a&&L&&(g=Y(a,L),x=a[0]>L[0]?-1:1,l=Math.abs(a[0]-L[0]),k=Math.abs(a[1]-L[1]),3<l||3<k)&&(I=16*Math.cos(g)*x,g=16*Math.sin(g)*x,Math.abs(I)>l&&
(I=l*I/Math.abs(I)),Math.abs(g)>k&&(g=k*g/Math.abs(g)),a[0]+=I,a[1]+=g);J();d=2>=na(a,b.position);f&&(l=ba(a[0],a[1],0,0,B.s)?m:a,k=Y(h,l),I=h[0]>l[0]?-1:1,3<Math.abs(l[0]-h[0])||3<Math.abs(l[1]-h[1]))&&(h[0]+=1*Math.cos(k)*I,h[1]+=1*Math.sin(k)*I);((J(),2>=na(a,b.position))||da(a[0],a[1],0,0,B.A)||f&&3>na(h,a))&&r<c&&(r=c+5E3,w(y.ha),v=0,t--,0>=t&&Ha())}e.L=S.getBoundingClientRect();p.fillStyle="black";p.fillRect(0,0,E,K);for(l=0;l<fa;l++)for(k=0;k<ga;k++)ya(qa[fa*k+l],l*z,k*z);for(k=0;k<R.length;k++)k!==
b.d&&(l=R[k],p.drawImage(l.ba,l.position[0]-8,l.position[1]-8));for(k=0;k<za.length;k++)l=za[k],$(F.ua,l.position[0]-8,l.position[1]-8);for(k=0;k<ra.length;k++)l=ra[k],$(F.va,l.position[0]-8,l.position[1]-8);f&&$(F.u,f[0],f[1]);if(e.k[n.v])for(l=0;l<e.k[n.v].length;l++){k=p;G=e.k[n.v][l][2];I=e.k[n.v][l][0];H=e.k[n.v][l][1];g=k.fillColor;x=k.textAlign;k.fillStyle="black";for(G=G.slice();0<G.length;)k.fillText(G.shift(),I,H),H+=10;k.fillStyle=g;k.textAlign=x}e.state===q.h?b.i?D(F.w,b.position[0]-8,
b.position[1]-24,0,b.o):b.a?D(F.w,b.position[0]-8,b.position[1]-24,10,b.o,c):D(F.w,b.position[0]-8,b.position[1]-24,1,b.o):D(F.w,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(l=R[b.d],p.drawImage(l.ba,b.o?l.position[0]+2:l.position[0]-15-l.size,l.position[1]-10));d&&(p.beginPath(),p.arc(b.position[0],b.position[1],7*J()+25,0,360),p.lineWidth=2,p.strokeStyle="#f09",p.stroke());e.state===q.h?r>c&&0===Math.floor(c/100)%2||D(F.r,a[0]-8,a[1]-8,2,!1,c):D(F.r,a[0]-8,a[1]-8,0);f&&(p.fillStyle="red",
p.fillRect(h[0]-1,h[1]-1,2,2),p.beginPath(),p.arc(h[0],h[1],5,0,360),p.lineWidth=2,p.strokeStyle="red",p.stroke());e.state===q.h?(p.fillStyle="#00deff",p.fillText("BOY",10,396),p.fillStyle="red",p.fillText("CROW",600,12),p.fillStyle="white",p.fillText("SPEED: "+J()+"   BOOST: "+Math.max(0,Math.ceil((b.Q-c)/1E3))+"   TIME: "+Math.max(0,Math.ceil((e.time-c)/1E3))+"   CANDIES: "+b.C+"   CRATES: "+b.M,50,396),p.fillText("SHOTS: "+v+"   STUN: "+Math.max(0,Math.ceil((r-c)/1E3))+"   HEALTH: "+t,410,12)):
e.state===q.e&&(p.fillStyle="white",p.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+A[s][n.B]+")   N: NAME ("+A[s][n.K]+")"+(X?"   1: PAINT   2: TOGGLE PAINT":""),12,12));e.state===q.f&&p.drawImage(Oa,0,0);e.state===q.e&&(p.globalAlpha=0.6,N<ia?(ya(""+N,u[0]-u[0]%z,u[1]-u[1]%z),p.strokeStyle="#000",p.strokeRect(u[0]-u[0]%z,u[1]-u[1]%z,z,z)):N===V.ka?D(F.w,u[0]-8,u[1]-24,1):N===V.r?D(F.r,u[0]-8,u[1]-8,0):N===V.u?$(F.u,u[0],u[1]):N===V.j&&(p.fillStyle="yellow",p.fillRect(u[0]-8,u[1]-
8,16,16),p.fillStyle="#000",p.fillText("C",u[0]-4,u[1]+4)),p.globalAlpha=1);window.requestAnimationFrame(Za)})()})();

/* github.com/4lbertoC/mirrordelivery */var ja={};
(function(a){function y(a,c){return c?q(a&255)+y(a>>8,c-1):""}var n=this.ta=a||44100,v=2*n,q=String.fromCharCode,c;this.Ka=function(a){var q=Audio,h=btoa,E="",Q=a.length;for(l=0;l<Q;l++)var g=32767*a[l]|0,g=-32768>g?-32768:32767<g?32767:g,g=g+(0>g?65536:0),E=E+String.fromCharCode(g&255,g>>8);a=E;a=["RIFF",36+(c=a.length),"WAVEfmt ",16,1,1,n,v,2,16,"data",c,a];E="";for(l=0;l<a.length;l++)E+="s"=="s4s4224422s4s"[l]?a[l]:y(a[l],"s4s4224422s4s".charCodeAt(l)-48);return new q("data:audio/wav;base64,"+h(E))};
var g,l,u=Math.sin,h=2*Math.PI;this.filter=function(a,c,n,E,q,h,y,v,A,u){n=n?n:1;E=E?E:a.length;g=a.slice(0);for(l=n;l<E;l++)g[l]=c(a,g,n,E,l,q,h,y,v,A,u);return g};this.filters={Qa:function(a,c,n,g,q,h){return c[q-1]+h*(a[q]-c[q-1])},Ra:function(a,c,n,g,q,h){return c[q-1]+h*(g-q)/(g-n)*(a[q]-c[q-1])},Pa:function(a,c,n,q,g,h){return h*(c[g-1]+a[g]-a[g-1])}};this.va=function(a,c,g,q,y,v,A,u,ca){c=c*h/n;var R=Array(a|0);for(l=0;l<a;l++)R[l]=g(l*c,q,y,v,A,u,ca);return R};var A=0;this.K={La:function(a){4>
a%h&&(A=2*Math.random()-1);return A},Sa:Math.random,Na:Math.sin,Oa:function(a){return u(a)+0.5*u(a/2)+0.3*u(a/4)},Ma:function(a){return 2*(a/h-(a/h+0.5|0))},xa:function(a,c){return u(a)>c?1:u(a)<c?-1:c}}}).apply(ja);var Ca={};
(function(){this.ca=[];this.$={square:ja.K.xa,saw:ja.K.Ma,sine:ja.K.Na,noise:ja.K.La,synth:ja.K.Oa};this.Ga=function(){var a=[],y;for(y in this.$)a.push(y);return a};this.Ha=function(){function a(a,c,g,v,u){void 0===u&&(u=(g-c)/1E3);a={name:a,id:a.replace(/ /g,""),min:c,max:g,step:u,Fa:v,type:"range",group:n};y.push(a)}var y=[],n=0,v=this.Ga();(function(a,c,g){a={name:a,id:a.replace(/ /g,""),options:c,Fa:g,type:"option",group:n};y.push(a)})("Generator",v,v[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);n++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);n++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);n++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);n++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);n++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);n++;a("RepeatSpeed",
0,0.8,0);n++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);n++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return y};this.va=function(a){var y=2*Math.PI,n=Math.sin,v=Math.pow,q=Math.abs,c=ja.ta,g=a.SuperSamplingQuality|0;1>g&&(g=1);for(var c=c*g,l=[{J:0,V:1,time:a.AttackTime},{J:1+a.SustainPunch,V:1,time:a.SustainTime},{J:1,V:0,time:a.DecayTime}],u=l.length,h=0;h<u;h++)l[h].T=1+(l[h].time*c|0);
for(var A=void 0,L=0,ka=-1,Ba=0,E=-1,Q=0,h=0;h<u;h++)Q+=l[h].T;Q<c/2&&(Q=c/2);var va=Array(Q/g|0),P=0,ta=0,ca=Ca.$[a.Generator];void 0===ca&&(ca=this.$.xa);var R=0,R=a.SquareDuty,da=a.SquareDutySweep/c,T=0,M=a.StartFrequency*y/c,ea=1+64*v(a.Slide,3)/c,fa=v(a.DeltaSlide,3)/(1E3*c);void 0!==g&&(fa/=g);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var Da=a.MinFrequency*y/c,la=a.MaxFrequency*y/c,ga=0,wa=a.VibratoFrequency*
y/c,V=a.VibratoDepth,Ka=1+3*v(a.VibratoFrequencySlide,3)/c,ma=a.VibratoDepthSlide/c,na=0,xa=a.ChangeSpeed*c,oa=v(a.ChangeAmount,2),oa=0<a.ChangeAmount?1+10*oa:1-0.9*oa,ya=Array(1024),h=0;1024>h;h++)ya[h]=0;var I=0,H=1020*v(a.PhaserOffset,2),w=4E3*v(a.PhaserSweep,3)/c,$=1E-5<q(w)||1E-5<q(H),La=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,F=0,W=0,aa=v(a.LPFilterCutoff,3)/10,Ea=1+a.HPFilterCutoffSweep/1E4,pa=5/(1+20*v(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<pa&&(pa=0.8);var pa=1-pa,D=
0.999>a.LPFilterCutoff,s=0,B=v(a.HPFilterCutoff,2)/10,ha=1+a.HPFilterCutoffSweep/1E4,X=0,za=Q;0<a.RepeatSpeed&&(za=v(1-a.RepeatSpeed,2)*c+32);for(var Va=a.MasterVolume,Fa=0,h=0;h<Q;h++)P=ca(T,R,0),R+=da,0>R?R=0:0.5<R&&(R=0.5),X>za&&(T=0,M=a.StartFrequency*y/c,ea=1+3*v(a.Slide,3)/c,fa=v(a.DeltaSlide,3)/(1E3*c),void 0!==g&&(fa/=g),na=0,xa=a.ChangeSpeed*c,oa=1+(a.ChangeAmount|0)/12,X=0),X+=1,T+=M,ea+=fa,M*=ea,na>xa&&(M*=oa,xa=Q),na+=1,M>la?M=la:M<Da&&(M=Da),ga+=wa,A=M*n(ga)*V,T+=A,wa*=Ka,ma&&(V+=ma,
0>V?ma=V=0:1<V&&(V=1,ma=0)),La&&(0.0010<q(B)&&(B*=ha,1E-5>B?B=1E-5:0.1<B&&(B=0.1)),A=F,aa*=Ea,0>aa?aa=0:0.1<aa&&(aa=0.1),D?(W+=(P-F)*aa,W*=pa):(F=P,W=0),F+=W,s+=F-A,P=s*=1-B),$&&(H+=w,0>H&&(H=-H,w=-w),1023<H&&(H=1023,w=0),ya[I]=P,P+=ya[I-(H|0)+1024&1023],I=I+1&1023),h>E&&(ka+=1,A=ka<u?l[ka]:{J:0,V:0,T:Q},L=A.J,Ba=(A.V-A.J)/(A.T+1),E+=A.T),P*=L,L+=Ba,P*=Va,1<g?(ta+=P,0===(h+1)%g&&(va[Fa]=ta/g,Fa+=1,ta=0)):va[h]=P;a=c/100|0;y=Array(a);for(h=0;h<a;h++)y[h]=0;return y.concat(va).concat(y)};this.ca=this.Ha()}).apply(Ca);var Wa={};(function(){this.ua=function(a){a=Ca.va(this.Ea(a));return ja.Ka(a)};this.Ea=function(a){for(var y={},n=Ca.ca.length,v=0;v<n;v++)y[Ca.ca[v].id]=a[v];return y}}).apply(Wa);(function(){var a,y,n,v;function q(f,b,a){f.addEventListener?f.addEventListener(b,a,!1):f.attachEvent?f.attachEvent("on"+b,a):f["on"+b]=a}function c(f,b,a,c,Xa,d){var e=W[f].frame,g=W[f].f;f=W[f].frames;c=d?f[Math.floor(d*c/1E3)%f.length]:f[c];Xa?t.drawImage(Ma,ab-(e.x+c.x)-c.a,e.y+c.y,c.a,c.b,b+g.x,a+g.y,c.a,c.b):t.drawImage(qa,e.x+c.x,e.y+c.y,c.a,c.b,b+g.x,a+g.y,c.a,c.b)}function g(f,b,a,c,Xa){var d=W[f].frame;f=W[f].f;t.drawImage(qa,d.x,d.y,c||d.a,Xa||d.b,b+f.x,a+f.y,f.a,f.b)}function l(f){var b=
f.clientX-d.R.left;f=f.clientY-d.R.top;b=Math.max(0,Math.min(b,I-1));f=Math.max(0,Math.min(f,H-1));return[b,f]}function u(f,b){if(Ea)try{Ga[f]=Wa.ua(b)}catch(a){}}function h(){try{d.state===s.i&&0<Na.length&&(bb[Na.shift()].play(),setTimeout(h,200))}catch(f){}}function A(f){if(Ea)try{Ga[f]&&(Ga[f].pause(),Ga[f].currentTime=0,Ga[f].play())}catch(b){}}function L(f,b){var a=document.getElementById(f);q(a,Ha,function(){Y.M({keyCode:b})});q(a,Oa,function(){Y.N({keyCode:b})})}function ka(f,b,a){f=document.getElementById(f);
q(f,Ha,b);q(f,Oa,a)}function Ba(f){var b=f[r.W],a,c,d,e;Pa.O=b;for(var g=J.length=0;g<f[r.l].length;g++)a=f[r.l][g],c=Object.create(Pa),c.size=a,d=document.createElement("canvas"),d.width=Qa+a,d.height=Qa+a,e=d.getContext("2d"),e.fillStyle="yellow",e.fillRect(0,0,Qa+a,Qa+a),e.fillStyle="black",e.fillText(a,5,10),c.fa=d,d=b[0]+16*g,a=b[1]-a,c.position=[d,a],c.O=[d,a],J.push(c)}function E(f){f=d.m=C[f]||C[x];b.position=f[r.ba].slice();b.H=0;b.ha=0;b.d=void 0;b.I=cb;b.q=!1;b.u=!1;b.c=!1;b.j=!1;b.p=!1;
e.L=db;e.k=0;e.v=0;e.position=f[r.Z].slice();a=f[r.A].slice();y=[f[r.A][0]+15,f[r.A][1]+23];n=y.slice();v=1;K.position=K.h=null;d.time=0;Q(s.g);N=0;ba="4444444444444444444444444444444444444444"+f[r.aa]+"4444444444444444444444444444444444444444";ba=ba.split("");Aa=null;Ba(f);ua.length=0;ra.length=0;G.fillStyle="rgba(0,0,0,0.7)";G.fillRect(0,0,I,H);G.fillStyle="#fff";G.textAlign="center";G.fillText("A 13kB game by Alberto Congiu",I/2,12);G.font="20px courier";G.fillText(d.m[r.Q],I/2,H/2-50);G.fillText("Luke "+
d.da+" - "+d.ea+" Crow",I/2,H/2);G.font="15px courier";G.fillText("Click the "+(Z?"screen":"crow")+" to start",I/2,H/2+60);G.fillText("< >: Select level",I/2,H/2+100);G.fillText(f[r.P]?"E: EDIT   "+(Z?"S":"D")+": DELETE   "+(Z?"A":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",I/2,H/2+120);G.beginPath();G.arc(e.position[0],e.position[1],16,0,360);G.lineWidth=2;G.strokeStyle="#fff";G.stroke();Na=pa.slice();window.localStorage&&(window.localStorage.pa=JSON.stringify(C))}function Q(f){d.state=f;if(Z){var b=
document.getElementsByClassName("edit");f="btn edit"+(f===s.e?"":" h");for(var a=0;a<b.length;a++)b[a].setAttribute("class",f)}}function va(){Q(s.i);d.time=Ia+d.m[r.G];Ea&&h();U.style.cursor="none"}function P(){d.da+=1;U.style.cursor="auto";A(D.sa);E(x)}function ta(){d.ea+=1;U.style.cursor="auto";A(D.la);E(x)}function ca(f,b){return Math.round(f[0]/w)===Math.round(b[0]/w)&&Math.round(f[1]/w)===Math.round(b[1]/w)}function R(b,a){return Math.atan((a[1]-b[1])/(a[0]-b[0]))}function da(b,a){return b&&
a&&Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))}function T(b,a){return ba[$*Math.floor(a/w)+Math.floor(b/w)]}function M(b,a,c,d,e){var g=a,n=T(b,g);c=b+c;topRight=T(c,g);bottomRight=T(c,a+d);bottomLeft=T(b,a);return n===e||topRight===e||bottomRight===e||bottomLeft===e}function ea(b,a,c,d,e){a+=d;d=T(b,a);bottomLeft=T(b+c,a);return d===e||bottomLeft===e}function fa(){U.style.cursor="auto";d.state===s.e&&(C[x][r.aa]=ba.join("").substring($,$*La-$),C[x][r.ba]=b.position.slice(),C[x][r.Z]=e.position.slice(),
C[x][r.A]=a.slice(),C[x][r.W]=Pa.O.slice());E(x)}function Da(){var a=b.S,c=la();b.c||(a=0);a=Math.min(c,a+c/7);b.S=a;return ga(B.o)?c/2:a}function la(){return Math.max(1,b.speed+b.U-(void 0!==b.d?J[b.d].size:0))}function ga(a){return M(b.position[0]-8,b.position[1]-32,16,32,a)||M(b.position[0],b.position[1]-8,0,0,a)}function wa(a){a.preventDefault();if(d.state===s.e)Ya=!Ya;else if(d.state===s.i&&e.v<Ia)if(a=l(a),(ea(e.position[0]-8,e.position[1]-8,16,16,B.t)||M(e.position[0],e.position[1],0,0,B.t))&&
e.k<Va)A(D.Y),e.k++;else{var b;for(b=0;b<ua.length;b++)if(ca(a,ua[b].position)){e.k=Math.max(e.k,Fa);A(D.Y);ua.splice(b,1);break}}}function V(){if(d.state===s.e)if(N<ha){var f=$*Math.floor(z[1]/w)+Math.floor(z[0]/w);f<ba.length&&(ba[f]=""+N)}else if(N===X.qa)b.position=z.slice();else if(N===X.s)e.position=z.slice();else if(N===X.w)a=z.slice(),y=[a[0]+15,a[1]+23],n=y.slice();else{if(N===X.l)for(Pa.O=z.slice(),f=0;f<J.length;f++){var c=J[f];c.position[0]=z[0]+16*f;c.position[1]=z[1]-c.size}}else d.state!==
s.g||Z?0<e.k&&e.v<Ia&&(e.k--,A(D.ka),f=Object.create(lb),f.position=e.position.slice(),ra.push(f)):z[0]>e.position[0]-16&&(z[0]<e.position[0]+16&&z[1]>e.position[1]-16&&z[1]<e.position[1]+16)&&va()}function Ka(a){e.v=a+mb;A(D.na);e.k=0;e.L--;0>=e.L?P():e.L<eb&&ma(a)}function ma(a){if(!Aa){Aa=[];for(var b=0;b<ba.length;b++)ba[b]===B.D&&Aa.push(b)}b=Aa[Math.floor(Math.random()*Aa.length)]+1;b=[b%$*w,Math.floor(b/$)*w];K.h=[b[0]-6,b[1]-10];K.position||(K.position=K.h.slice());K.wa=a+nb;v+=0.05}function na(a,
c){A(D.ra);b.d=void 0;a.position=a.O.slice();b.I--;0>=b.I?ta():b.I<eb&&ma(c)}function xa(a){a=a||C[x];a=["CustomLevel"+ob++,a[r.ba].slice(),a[r.Z].slice(),a[r.W].slice(),a[r.A].slice(),a[r.G],a[r.aa],a[r.l].slice(),null,!0];C.push(a);d.state===s.g&&(x=C.length-1,E(x))}function oa(a,b,c){var d=null,e=K.position?"#c29":"#00deff";a===B.D?d=F.D:a===B.F?d=F.F:a===B.Da?e="#000":a===B.ma?e="#0f0":a===B.t?d=F.t:a===B.o?d=F.o:a===B.n&&(d=F.n);t.fillStyle=e;t.fillRect(b,c,w,w);null!==d&&g(d,b,c,w,w)}function ya(a){if(a.position&&
a.h){var b=R(a.position,a.h),c=a.position[0]>a.h[0]?-1:1,d=Math.abs(a.position[0]-a.h[0]),e=Math.abs(a.position[1]-a.h[1]);if(3<d||3<e){var g=16*Math.cos(b)*c,b=16*Math.sin(b)*c;Math.abs(g)>d&&(g=d*g/Math.abs(g));Math.abs(b)>e&&(b=e*b/Math.abs(b));a.position[0]+=g;a.position[1]+=b}}}var I=640,H=400,w=16,$=I/w,La=H/w,F={s:0,Ba:1,n:2,w:3,o:4,C:5,t:6,F:7,Ca:8,D:9,ya:10,za:11},W=[{frame:{x:30,y:0,a:30,b:14},f:{x:1,y:1,a:30,b:14},frames:[{x:1,y:1,a:15,b:11},{x:17,y:1,a:15,b:13}]},{frame:{x:14,y:40,a:14,
b:8},f:{x:1,y:7,a:14,b:8}},{frame:{x:32,y:14,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:24,a:14,b:24},f:{x:1,y:7,a:14,b:24}},{frame:{x:16,y:48,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:0,a:30,b:24},f:{x:1,y:3,a:30,b:24},frames:[{x:0,y:0,a:15,b:24},{x:16,y:0,a:13,b:24}]},{frame:{x:48,y:14,a:16,b:10},f:{x:0,y:10,a:16,b:10}},{frame:{x:14,y:24,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:31,y:32,a:6,b:14},f:{x:4,y:1,a:6,b:14}},{frame:{x:0,y:48,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:36,
y:32,a:11,b:13},f:{x:0,y:0,a:12,b:13}},{frame:{x:49,y:25,a:15,b:16},f:{x:0,y:0,a:15,b:16}}],aa=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ea=!(!window.btoa||!window.atob),pa="023123467".split(""),D={oa:0,ra:1,ka:2,Aa:3,X:4,ja:5,sa:6,la:7,ia:8,Y:9,n:10,na:11},s={g:0,i:1,e:2},B={EMPTY:"0",D:"1",o:"2",F:"3",Da:"4",ma:"5",t:"6",n:"7"},ha=8,X={qa:ha+0,s:ha+1,w:ha+2,l:ha+3},za=ha+4,Va=3,Fa=5,mb=5E3,db=10,eb=4,nb=2E3,cb=10,Qa=12,fb=[1,-6],r={Q:0,ba:1,Z:2,W:3,A:4,G:5,aa:6,l:7,B:8,P:9},
U=document.getElementById("C"),t=U.getContext("2d"),qa=new Image,Ma=document.createElement("canvas"),ab=0,Ra=document.createElement("canvas"),G=Ra.getContext("2d"),Ga=[],bb={},Na=null,z=[0,0],Sa=!1,Y={ga:{},N:function(a){Y.ga[a.keyCode]=void 0},M:function(a){Y.ga[a.keyCode]=Ia}},Z=!1,Ja=document.getElementById("o"),ia=Ja.getBoundingClientRect(),gb=[100,100],Za=!1,sa=null,Ha=null,Oa=null,hb=null,Ia=0,d={state:s.g,R:U.getBoundingClientRect(),time:0,da:0,ea:0,m:null},ba=[],Aa=null,N=0,Ya=!1,b={position:null,
speed:4,S:0,U:0,ha:0,Ja:2,Ia:-7,u:!1,j:!1,c:!1,q:!1,r:0,d:void 0,H:0,I:cb,p:!1},e={position:null,h:null,k:0,v:0,L:db};n=y=a=null;v=1;var K={position:null,h:null,wa:0},Pa={fa:null,size:1,position:null,O:[0,0]},J=[],pb={position:null},ua=[],lb={position:null,speed:6},ra=[],ib=[["Tutorial",[33,370],[I-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000550000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,[(Z?"I":"SPACEBAR")+": grab/release crate"]],[500,340,["UP/DOWN: Climb"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(Z?"I":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(Z?"analogPad":"Mouse")+": move"]],[390,80,["Hide from granny in nest"]],[390,130,[(Z?"A":"RClick")+": eat from nest or crumbs",(Z?"S":"LClick")+": shoot!"]],
[150,70,["Don't touch roofs or Luke"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000000000000000000000000000000000000000000000550000020000000000000200000000000000000055020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000000000000000000033000000000330000000000000055000000000000000000000000000000000000005500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[96,316],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 4",[75,370],[I-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000600000000000000000000000000000000000000011055000000000000000000000003333000000000005500000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000303030200000000200000000000000000207000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[1,2,3]]],C=window.localStorage&&window.localStorage.pa&&JSON.parse(window.localStorage.pa)||ib,ob=C.length-ib.length+1,x=0;(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e})})();if("ontouchstart"in document.documentElement||
window.navigator.msMaxTouchPoints)for(var Z=!0,Ha=window.navigator.msMaxTouchPoints?"MSPointerDown":"touchstart",Oa=window.navigator.msMaxTouchPoints?"MSPointerUp":"touchend",hb=window.navigator.msMaxTouchPoints?"MSPointerMove":"touchmove",$a=document.getElementsByClassName("btn"),Ta=0;Ta<$a.length;Ta++)-1===$a[Ta].getAttribute("class").indexOf("edit")&&$a[Ta].setAttribute("class","btn");qa.onload=function(){Ma.width=ab=qa.naturalWidth;Ma.height=qa.naturalHeight;var a=Ma.getContext("2d");a.translate(qa.naturalWidth,
0);a.scale(-1,1);a.drawImage(qa,0,0)};qa.src="img/imgmap.png";Ra.width=I;Ra.height=H;for(var Ua=0;Ua<aa.length;Ua++)bb[Ua]=Wa.ua(["synth",0,0.4,0,0.208,0,0.12,20,aa[Ua],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);Na=pa.slice();u(D.oa,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);u(D.ra,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);u(D.ja,["square",0,0.4,0,0.098,0.504,0.282,20,1582,
2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);u(D.ia,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);u(D.ka,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);u(D.la,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);u(D.sa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);u(D.X,["noise",0,
0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);u(D.Aa,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);u(D.Y,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);u(D.n,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);u(D.na,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,
0,0,0,0,0,0,1,0,0,0,0]);window.addEventListener("keyup",Y.N,!1);window.addEventListener("keydown",Y.M,!1);if(Z){q(U,Ha,function(){d.state===s.g&&va()});ka("s",function(){d.state===s.g?Y.M({keyCode:68}):V()},function(){Y.N({keyCode:68})});ka("a",function(a){d.state===s.g?Y.M({keyCode:74}):wa(a)},function(){Y.N({keyCode:74})});ka("i",function(){Y.M({keyCode:d.state===s.g?73:32})},function(){Y.N({keyCode:d.state===s.g?73:32})});L("x",27);L("e",69);L("l",37);L("u",38);L("r",39);L("d",40);L("c",67);L("t",
84);L("n",78);var jb=function(a){a.preventDefault();sa=a.changedTouches||a;ia=Ja.getBoundingClientRect();Za=!0};q(Ja,Ha,jb);q(Ja,hb,jb);q(Ja,Oa,function(a){a.preventDefault();Za=!1});q(document.body,"contextmenu",function(a){a.preventDefault()})}else q(U,"click",V),q(U,"contextmenu",wa),q(U,"mousedown",function(a){1===a.which&&(Sa=!0);d.state===s.e&&Sa&&V()}),q(U,"mouseup",function(a){1===a.which&&(Sa=!1)}),q(U,"mousemove",function(a){var b=l(a);z=[b[0],b[1]];d.state===s.i?(a=l(a),e.h=a.slice()):
d.state===s.e&&Sa&&V()});E(x);(function kb(h){var q=h,l=la(),u=b.Ja,G=b.position[0],L=b.position[1],k=Y.ga;if(d.state===s.g)if(k[37]&&!b.c)x=(x+C.length-1)%C.length,E(x),b.c=!0;else if(k[39]&&!b.c)x=(x+1)%C.length,E(x),b.c=!0;else if(k[69]&&!b.c)b.c=!0,C[x][r.P]||xa(),Q(s.e),k[69]=void 0;else if(k[68]&&!b.c)b.c=!0,C[x][r.P]&&(C.splice(x,1),x--,E(x)),k[68]=void 0;else if(k[74]&&C[x][r.P]&&!b.c)l=prompt("Data",JSON.stringify(C[x])),k[74]=void 0;else if(k[73]){if(l=prompt("Data"))try{xa(JSON.parse(l))}catch(T){alert("Error!")}k[73]=
void 0}else k[37]||(k[39]||k[68]||k[69]||k[74]||k[73])||(b.c=!1);else{if(d.state===s.e)if(k[37]&&!b.c)N=(N+za-1)%za,b.c=!0;else if(k[39]&&!b.c)N=(N+1)%za,b.c=!0;else if(k[67]&&!b.c){b.c=!0;try{var O=JSON.parse(prompt("Crates",JSON.stringify(C[x][r.l])));if(O instanceof Array){for(l=0;l<O.length;l++)"number"===!typeof l&&alert("Error!"),O[l]=Math.max(1,Math.min(5,O[l]));C[x][r.l]=O;Ba(C[x])}}catch(W){alert("Error!")}k[67]=void 0}else k[78]&&!b.c?(b.c=!0,(l=prompt("Name",C[x][r.Q]))&&(C[x][r.Q]=l),
k[78]=!1):k[84]&&!b.c?(b.c=!0,q=+prompt("Time",C[x][r.G]),!isNaN(q)&&0<q&&(C[x][r.G]=q),k[84]=!1):k[69]&&!b.c?(b.c=!0,fa(),k[69]=void 0):k[37]||(k[39]||k[67]||k[78]||k[84]||k[69])||(b.c=!1);else if(d.state===s.i){if(!k[32]||b.u||b.j||b.q)k[69]&&!b.q?(b.q=!0,0<b.H&&(b.H--,b.U=3,b.ha=q+5E3,O=Object.create(pb),O.position=[b.position[0]+4,b.position[1]-7],ua.push(O),A(D.ia))):k[32]||(k[69]||!b.q)||(b.q=!1);else a:if(b.q=!0,O=b.d,q=void 0!==O?J[O]:void 0,void 0===q){for(O=0;O<J.length;O++)if(ca(b.position,
J[O].position)){b.d=O;A(D.X);break a}ga(B.n)&&(b.H=3,A(D.n))}else b.d=void 0,A(D.X),ga(B.ma)&&void 0!==q&&(J.splice(O,1),0>=J.length?P():A(D.ja));k[38]?ga(B.o)?(b.position[1]=Math.min(H-w,L-u),b.c=!0):b.u||b.j||(b.r=b.Ia,b.S=l,b.u=!0,b.j=!0,A(D.oa)):!k[38]&&b.u&&(b.u=!1);k[37]&&(b.position[0]=Math.max(w,G-Da()),b.c=!0,b.p=!0);k[39]&&(b.position[0]=Math.min(I-2*w,G+Da()),b.c=!0,b.p=!1);k[40]&&ga(B.o)&&(b.position[1]=Math.min(H,L+u),b.c=!0);k[37]||(k[38]||k[39]||k[40])||(b.c=!1)}k[27]&&fa()}Ia=h;if(Za&&
sa){var S;if(sa.clientX)S=sa;else if(sa instanceof TouchList)for(l=0;l<sa.length;l++)if(k=sa[l],k.clientX>=ia.left&&k.clientX<ia.left+ia.width&&k.clientY>=ia.top&&k.clientY<ia.top+ia.height){S=sa[l];break}if(S){S=[S.clientX-ia.left,S.clientY-ia.top];var k=R(gb,S),l=da(gb,S)/12.5,m;d.state===s.i?m=e.position:d.state===s.e&&(m=z);m&&(m[0]+=(d.state===s.e?Math.round(Math.cos(k)):Math.cos(k))*(100>S[0]?-l:l),m[1]+=(d.state===s.e?Math.round(Math.sin(k)):Math.sin(k))*(100>S[0]?-l:l),m[0]=Math.max(0,Math.min(m[0],
I-1)),m[1]=Math.max(0,Math.min(m[1],H-1)));Ya&&V()}}if(d.state===s.i){d.R=U.getBoundingClientRect();m=0;for(var p;m<=b.r;){if(ea(b.position[0]-8,b.position[1]+m,16,0,B.D)){p=b.position[1]+m-(b.position[1]+m)%w;break}m+=w}p?(b.position[1]=p,b.j&&(b.S=0,(p=void 0!==b.d&&J[b.d])&&b.r>15-p.size&&na(p,h)),b.j=!1,b.r=0):M(b.position[0]-16,b.position[1]-32,16,32,B.o)?b.j=!1:(b.r+=1,b.j=!0,b.position[1]+=b.r);void 0!==b.d&&(J[b.d].position[0]=b.position[0]+fb[0],J[b.d].position[1]=b.position[1]+fb[1]);b.ha<
h&&0<b.U&&(b.U=0);for(p=0;p<ra.length;p++)if(m=ra[p],m.position[1]+=m.speed,ca(b.position,m.position)&&void 0!==b.d)na(J[b.d],h),ra.splice(p,1),p--;else if(m.position[1]>H||ea(m.position[0],m.position[1],0,0,B.F))ra.splice(p,1),p--;d.time<h&&ta();ya(e);K.position&&(void 0!==b.d&&15>da(b.position,K.position)&&na(J[b.d],h),15>da(e.position,K.position)&&Ka(h),K.wa<h&&ma(h),ya(K));p=ea(e.position[0],e.position[1],0,0,B.t)?y:e.position;m=R(n,p);S=n[0]>p[0]?-1:1;if(3<Math.abs(p[0]-n[0])||3<Math.abs(p[1]-
n[1]))n[0]+=Math.cos(m)*S*v,n[1]+=Math.sin(m)*S*v;(7*la()+25>=da(e.position,b.position)||M(e.position[0],e.position[1],0,0,B.F)||3>da(n,e.position))&&e.v<h&&Ka(h)}d.R=U.getBoundingClientRect();t.fillStyle="black";t.fillRect(0,0,I,H);for(p=0;p<$;p++)for(m=0;m<La;m++)oa(ba[$*m+p],p*w,m*w);for(m=0;m<J.length;m++)m!==b.d&&(p=J[m],t.drawImage(p.fa,p.position[0]-8,p.position[1]-8));for(m=0;m<ua.length;m++)p=ua[m],g(F.Ba,p.position[0]-8,p.position[1]-8);for(m=0;m<ra.length;m++)p=ra[m],g(F.Ca,p.position[0]-
8,p.position[1]-8);g(F.w,a[0],a[1]);if(d.m[r.B])for(p=0;p<d.m[r.B].length;p++){m=t;G=d.m[r.B][p][2];S=d.m[r.B][p][0];u=d.m[r.B][p][1];k=m.fillColor;l=m.textAlign;m.fillStyle="black";for(G=G.slice();0<G.length;)m.fillText(G.shift(),S,u),u+=10;m.fillStyle=k;m.textAlign=l}K.position&&g(5<da(K.position,K.h)?F.za:F.ya,K.position[0]-8,K.position[1]);d.state===s.i?b.j?c(F.C,b.position[0]-8,b.position[1]-24,0,b.p):b.c?c(F.C,b.position[0]-8,b.position[1]-24,10,b.p,h):c(F.C,b.position[0]-8,b.position[1]-24,
1,b.p):c(F.C,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(p=J[b.d],t.drawImage(p.fa,b.p?p.position[0]+2:p.position[0]-15-p.size,p.position[1]-10));7*la()+75>=da(e.position,b.position)&&(t.beginPath(),t.arc(b.position[0],b.position[1],7*la()+25,0,360),t.lineWidth=2,t.strokeStyle="#f09",t.stroke());d.state===s.i?e.v>h&&0===Math.floor(h/100)%2||c(F.s,e.position[0]-8,e.position[1]-8,2,!1,h):c(F.s,e.position[0]-8,e.position[1]-8,0);t.fillStyle="red";t.fillRect(n[0]-1,n[1]-1,2,2);t.beginPath();t.arc(n[0],
n[1],5,0,360);t.lineWidth=2;t.strokeStyle="red";t.stroke();t.fillStyle="white";d.state===s.i?(t.fillText("\u2699 "+Math.max(0,Math.ceil((d.time-h)/1E3))+"   \u00a7 "+b.H+"   \u25fc "+b.I,50,396),t.fillText("\u21a1 "+e.k+"   \u2665 "+e.L,530,12),t.fillStyle="#00deff",t.fillText("LUKE",10,396),t.fillStyle="red",t.fillText("CROW",600,12)):d.state===s.e&&t.fillText("< > CHANGE BLOCK   C: CRATES   T: TIME ("+C[x][r.G]+")   N: NAME ("+C[x][r.Q]+")"+(Z?"   S: PAINT   A: TOGGLE PAINT   analogPad: MOVE":""),
12,12);d.state===s.g&&t.drawImage(Ra,0,0);d.state===s.e&&(t.globalAlpha=0.6,N<ha?(oa(""+N,z[0]-z[0]%w,z[1]-z[1]%w),t.strokeStyle="#000",t.strokeRect(z[0]-z[0]%w,z[1]-z[1]%w,w,w)):N===X.qa?c(F.C,z[0]-8,z[1]-24,1):N===X.s?c(F.s,z[0]-8,z[1]-8,0):N===X.w?g(F.w,z[0],z[1]):N===X.l&&(t.fillStyle="yellow",t.fillRect(z[0]-8,z[1]-8,16,16),t.fillStyle="#000",t.fillText("C",z[0]-4,z[1]+4)),t.globalAlpha=1);window.requestAnimationFrame(kb)})()})();

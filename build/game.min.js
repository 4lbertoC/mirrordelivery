/* http://github.com/4lbertoC/mirrordelivery */var ka={};
(function(a){function u(a,c){return c?J(a&255)+u(a>>8,c-1):""}var n=this.ta=a||44100,c=2*n,J=String.fromCharCode,q;this.Ma=function(a){var d=Audio,k=btoa,E="",T=a.length;for(g=0;g<T;g++)var O=32767*a[g]|0,O=-32768>O?-32768:32767<O?32767:O,O=O+(0>O?65536:0),E=E+String.fromCharCode(O&255,O>>8);a=E;a=["RIFF",36+(q=a.length),"WAVEfmt ",16,1,1,n,c,2,16,"data",q,a];E="";for(g=0;g<a.length;g++)E+="s"=="s4s4224422s4s"[g]?a[g]:u(a[g],"s4s4224422s4s".charCodeAt(g)-48);return new d("data:audio/wav;base64,"+k(E))};
var k,g,z=Math.sin,d=2*Math.PI;this.filter=function(a,c,d,n,q,u,J,z,G,H){d=d?d:1;n=n?n:a.length;k=a.slice(0);for(g=d;g<n;g++)k[g]=c(a,k,d,n,g,q,u,J,z,G,H);return k};this.filters={Sa:function(a,c,d,n,g,q){return c[g-1]+q*(a[g]-c[g-1])},Ta:function(a,c,d,g,n,q){return c[n-1]+q*(g-n)/(g-d)*(a[n]-c[n-1])},Ra:function(a,c,d,n,g,q){return q*(c[g-1]+a[g]-a[g-1])}};this.va=function(a,c,q,u,k,J,F,z,G){c=c*d/n;var H=Array(a|0);for(g=0;g<a;g++)H[g]=q(g*c,u,k,J,F,z,G);return H};var G=0;this.J={Na:function(a){4>
a%d&&(G=2*Math.random()-1);return G},Ua:Math.random,Pa:Math.sin,Qa:function(a){return z(a)+0.5*z(a/2)+0.3*z(a/4)},Oa:function(a){return 2*(a/d-(a/d+0.5|0))},ya:function(a,c){return z(a)>c?1:z(a)<c?-1:c}}}).apply(ka);var Ea={};
(function(){this.ca=[];this.$={square:ka.J.ya,saw:ka.J.Oa,sine:ka.J.Pa,noise:ka.J.Na,synth:ka.J.Qa};this.Ia=function(){var a=[],u;for(u in this.$)a.push(u);return a};this.Ja=function(){function a(a,c,k,g,z){void 0===z&&(z=(k-c)/1E3);a={name:a,id:a.replace(/ /g,""),min:c,max:k,step:z,Ha:g,type:"range",group:n};u.push(a)}var u=[],n=0,c=this.Ia();(function(a,c,k){a={name:a,id:a.replace(/ /g,""),options:c,Ha:k,type:"option",group:n};u.push(a)})("Generator",c,c[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);n++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);n++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);n++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);n++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);n++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);n++;a("RepeatSpeed",
0,0.8,0);n++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);n++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return u};this.va=function(a){var u=2*Math.PI,n=Math.sin,c=Math.pow,J=Math.abs,q=ka.ta,k=a.SuperSamplingQuality|0;1>k&&(k=1);for(var q=q*k,g=[{I:0,V:1,time:a.AttackTime},{I:1+a.SustainPunch,V:1,time:a.SustainTime},{I:1,V:0,time:a.DecayTime}],z=g.length,d=0;d<z;d++)g[d].S=1+(g[d].time*q|0);
for(var G=void 0,Z=0,ua=-1,$=0,E=-1,T=0,d=0;d<z;d++)T+=g[d].S;T<q/2&&(T=q/2);var O=Array(T/k|0),F=0,va=0,Aa=Ea.$[a.Generator];void 0===Aa&&(Aa=this.$.ya);var H=0,H=a.SquareDuty,Ia=a.SquareDutySweep/q,ia=0,U=a.StartFrequency*u/q,la=1+64*c(a.Slide,3)/q,ca=c(a.DeltaSlide,3)/(1E3*q);void 0!==k&&(ca/=k);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var Ba=a.MinFrequency*u/q,da=a.MaxFrequency*u/q,wa=0,aa=a.VibratoFrequency*
u/q,X=a.VibratoDepth,xa=1+3*c(a.VibratoFrequencySlide,3)/q,ea=a.VibratoDepthSlide/q,K=0,ya=a.ChangeSpeed*q,ma=c(a.ChangeAmount,2),ma=0<a.ChangeAmount?1+10*ma:1-0.9*ma,Ca=Array(1024),d=0;1024>d;d++)Ca[d]=0;var I=0,D=1020*c(a.PhaserOffset,2),v=4E3*c(a.PhaserSweep,3)/q,ba=1E-5<J(v)||1E-5<J(D),Ja=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,B=0,V=0,fa=c(a.LPFilterCutoff,3)/10,Fa=1+a.HPFilterCutoffSweep/1E4,na=5/(1+20*c(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<na&&(na=0.8);var na=1-na,A=
0.999>a.LPFilterCutoff,C=0,P=c(a.HPFilterCutoff,2)/10,ga=1+a.HPFilterCutoffSweep/1E4,oa=0,t=T;0<a.RepeatSpeed&&(t=c(1-a.RepeatSpeed,2)*q+32);for(var Ka=a.MasterVolume,pa=0,d=0;d<T;d++)F=Aa(ia,H,0),H+=Ia,0>H?H=0:0.5<H&&(H=0.5),oa>t&&(ia=0,U=a.StartFrequency*u/q,la=1+3*c(a.Slide,3)/q,ca=c(a.DeltaSlide,3)/(1E3*q),void 0!==k&&(ca/=k),K=0,ya=a.ChangeSpeed*q,ma=1+(a.ChangeAmount|0)/12,oa=0),oa+=1,ia+=U,la+=ca,U*=la,K>ya&&(U*=ma,ya=T),K+=1,U>da?U=da:U<Ba&&(U=Ba),wa+=aa,G=U*n(wa)*X,ia+=G,aa*=xa,ea&&(X+=ea,
0>X?ea=X=0:1<X&&(X=1,ea=0)),Ja&&(0.0010<J(P)&&(P*=ga,1E-5>P?P=1E-5:0.1<P&&(P=0.1)),G=B,fa*=Fa,0>fa?fa=0:0.1<fa&&(fa=0.1),A?(V+=(F-B)*fa,V*=na):(B=F,V=0),B+=V,C+=B-G,F=C*=1-P),ba&&(D+=v,0>D&&(D=-D,v=-v),1023<D&&(D=1023,v=0),Ca[I]=F,F+=Ca[I-(D|0)+1024&1023],I=I+1&1023),d>E&&(ua+=1,G=ua<z?g[ua]:{I:0,V:0,S:T},Z=G.I,$=(G.V-G.I)/(G.S+1),E+=G.S),F*=Z,Z+=$,F*=Ka,1<k?(va+=F,0===(d+1)%k&&(O[pa]=va/k,pa+=1,va=0)):O[d]=F;a=q/100|0;u=Array(a);for(d=0;d<a;d++)u[d]=0;return u.concat(O).concat(u)};this.ca=this.Ja()}).apply(Ea);var Ua={};(function(){this.ua=function(a){a=Ea.va(this.Ga(a));return ka.Ma(a)};this.Ga=function(a){for(var u={},n=Ea.ca.length,c=0;c<n;c++)u[Ea.ca[c].id]=a[c];return u}}).apply(Ua);(function(){var a,u,n;function c(e,a,b){e.addEventListener?e.addEventListener(a,b,!1):e.attachEvent?e.attachEvent("on"+a,b):e["on"+a]=b}function J(e,a,b,c,Va,g){var d=V[e].frame,f=V[e].f;e=V[e].frames;c=g?e[Math.floor(g*c/1E3)%e.length]:e[c];Va?s.drawImage(La,Ya-(d.x+c.x)-c.a,d.y+c.y,c.a,c.b,a+f.x,b+f.y,c.a,c.b):s.drawImage(qa,d.x+c.x,d.y+c.y,c.a,c.b,a+f.x,b+f.y,c.a,c.b)}function q(e,a,b,c,Va){var d=V[e].frame;e=V[e].f;s.drawImage(qa,d.x,d.y,c||d.a,Va||d.b,a+e.x,b+e.y,e.a,e.b)}function k(e){var a=
e.clientX-l.Q.left;e=e.clientY-l.Q.top;a=Math.max(0,Math.min(a,I-1));e=Math.max(0,Math.min(e,D-1));return[a,e]}function g(e,a){if(Fa)try{Ga[e]=Ua.ua(a)}catch(b){}}function z(){if(Fa)try{l.state===t.i&&0<Ma.length&&(Za[Ma.shift()].play(),setTimeout(z,200))}catch(e){}}function d(e){if(Fa)try{Ga[e]&&(Ga[e].pause(),Ga[e].currentTime=0,Ga[e].play())}catch(a){}}function G(e){e=e||y[w];e=["CustomLevel"+gb++,e[r.ba].slice(),e[r.Z].slice(),e[r.W].slice(),e[r.o]&&e[r.o].slice(),e[r.F],e[r.aa],e[r.l].slice(),
null,!0];y.push(e);l.state===t.g&&(w=y.length-1,$(w))}function Z(){return Math.max(1,b.speed+b.T-(void 0!==b.d?Q[b.d].size:0))}function ua(e){var a=e[r.W],b,c,d,f;Na.N=a;for(var g=Q.length=0;g<e[r.l].length;g++)b=e[r.l][g],c=Object.create(Na),c.size=b,d=document.createElement("canvas"),d.width=pa+b,d.height=pa+b,f=d.getContext("2d"),f.fillStyle="yellow",f.fillRect(0,0,pa+b,pa+b),f.fillStyle="black",f.fillText(b,5,10),c.ga=d,d=a[0]+16*g,b=a[1]-b,c.position=[d,b],c.N=[d,b],Q.push(c)}function $(e){e=
l.m=y[e]||y[w];F(t.g);b.position=e[r.ba].slice();f.position=e[r.Z].slice();b.G=0;b.U=0;b.d=void 0;b.H=Ka;b.r=!1;b.w=!1;b.c=!1;b.j=!1;b.q=!1;f.K=$a;f.k=0;f.s=0;L.position=L.h=null;l.time=0;F(t.g);M=0;e[r.o]?(a=e[r.o].slice(),u=[e[r.o][0]+15,e[r.o][1]+23],n=u.slice()):u=a=null;ha="4444444444444444444444444444444444444444"+e[r.aa]+"4444444444444444444444444444444444444444";ha=ha.split("");Da=null;ua(e);za.length=0;ra.length=0;Oa.width=I;Oa.height=D;var c=Oa.getContext("2d");c.fillStyle="rgba(0,0,0,0.7)";
c.fillRect(0,0,I,D);c.fillStyle="#fff";c.font="20px courier";c.textAlign="center";c.fillText(l.m[r.P],I/2,D/2-50);c.fillText("Delivery Boy "+l.ea+" - "+l.fa+" Crow",I/2,D/2);c.font="15px courier";c.fillText("Click the "+(Y?"screen":"crow")+" to start!",I/2,D/2+60);c.fillText("< >: Select level",I/2,D/2+100);c.fillText(e[r.O]?"E: EDIT   "+(Y?"1":"D")+": DELETE   "+(Y?"2":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",I/2,D/2+120);c.beginPath();c.arc(f.position[0],f.position[1],16,0,360);c.lineWidth=
1;c.strokeStyle="#fff";c.stroke();Ma=na.slice();window.localStorage&&(window.localStorage.oa=JSON.stringify(y))}function E(){F(t.i);l.time=Ha+l.m[r.F];z();R.style.cursor="none"}function T(){l.ea+=1;R.style.cursor="auto";d(A.sa);$(w)}function O(){l.fa+=1;R.style.cursor="auto";d(A.ka);$(w)}function F(e){l.state=e;if(Y){var a=document.getElementsByClassName("edit");e="btn edit"+(e===t.e?"":" h");for(var b=0;b<a.length;b++)a[b].setAttribute("class",e)}}function va(){R.style.cursor="auto";l.state===t.e&&
(y[w][r.aa]=ha.join("").substring(ba,ba*Ja-ba),y[w][r.ba]=b.position.slice(),y[w][r.Z]=f.position.slice(),y[w][r.o]=a?a.slice():void 0,y[w][r.W]=Na.N.slice());$(w)}function Aa(e){e.preventDefault();if(l.state===t.e)Wa=!Wa;else if(l.state===t.i&&f.s<Ha)if(e=k(e),(xa(f.position[0]-8,f.position[1]-8,16,16,C.v)||X(f.position[0],f.position[1],0,0,C.v))&&f.k<hb)d(A.Y),f.k++;else{var a;for(a=0;a<za.length;a++)if(Ba(e,za[a].position)){f.k=Math.max(f.k,ib);d(A.Y);za.splice(a,1);break}}}function H(){if(l.state===
t.e)if(M<P){var e=ba*Math.floor(x[1]/v)+Math.floor(x[0]/v);e<ha.length&&(ha[e]=""+M)}else if(M===ga.pa)b.position=x.slice();else if(M===ga.u)f.position=x.slice();else if(M===ga.A&&a)a=x.slice(),u=[a[0]+15,a[1]+23],n=u.slice();else{if(M===ga.l)for(Na.N=x.slice(),e=0;e<Q.length;e++){var c=Q[e];c.position[0]=x[0]+16*e;c.position[1]=x[1]-c.size}}else l.state!==t.g||Y?0<f.k&&f.s<Ha&&(f.k--,d(A.ja),e=Object.create(jb),e.position=f.position.slice(),ra.push(e)):x[0]>f.position[0]-16&&(x[0]<f.position[0]+
16&&x[1]>f.position[1]-16&&x[1]<f.position[1]+16)&&E()}function Ia(a){f.s=a+kb;d(A.ma);f.k=0;f.K--;0>=f.K?T():10>f.K&&ca(a)}function ia(a,c){d(A.qa);b.d=void 0;a.position=a.N.slice();b.H--;0>=b.H?O():6>b.H&&ca(c)}function U(){var a=b.R,c=Z();b.c||(a=0);a=Math.min(c,a+c/7);b.R=a;return ea(C.p)?c/2:a}function la(){return void 0!==b.d?Q[b.d]:void 0}function ca(a){var b;if(!Da)for(Da=[],b=0;b<ha.length;b++)ha[b]===C.da&&Da.push(b);b=Da[Math.floor(Math.random()*Da.length)];b=[b%ba*v,Math.floor(b/ba)*v];
L.h=[b[0]-6,b[1]-10];L.position||(L.position=L.h.slice());L.xa=a+lb}function Ba(a,b){return Math.round(a[0]/v)===Math.round(b[0]/v)&&Math.round(a[1]/v)===Math.round(b[1]/v)}function da(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function wa(a,b){return Math.atan((b[1]-a[1])/(b[0]-a[0]))}function aa(a,b){return ha[ba*Math.floor(b/v)+Math.floor(a/v)]}function X(a,b,c,d,f){var g=b,l=aa(a,g);c=a+c;topRight=aa(c,g);bottomRight=aa(c,b+d);bottomLeft=aa(a,b);return l===f||topRight===
f||bottomRight===f||bottomLeft===f}function xa(a,b,c,d,f){b+=d;d=aa(a,b);bottomLeft=aa(a+c,b);return d===f||bottomLeft===f}function ea(a){return X(b.position[0]-8,b.position[1]-32,16,32,a)||X(b.position[0],b.position[1]-8,0,0,a)}function K(a,b){function d(){W.L({keyCode:b})}function f(){W.M({keyCode:b})}var g=document.getElementById(a);c(g,"touchstart",d);c(g,"touchend",f);c(g,"MSPointerDown",d);c(g,"MSPointerUp",f)}function ya(a,b,d){a=document.getElementById(a);c(a,"touchstart",b);c(a,"touchend",
d);c(a,"MSPointerDown",b);c(a,"MSPointerUp",d)}function ma(a){if(a.position&&a.h){var b=wa(a.position,a.h),c=a.position[0]>a.h[0]?-1:1,d=Math.abs(a.position[0]-a.h[0]),f=Math.abs(a.position[1]-a.h[1]);if(3<d||3<f){var g=Math.cos(b)*c*ab,b=Math.sin(b)*c*ab;Math.abs(g)>d&&(g=d*g/Math.abs(g));Math.abs(b)>f&&(b=f*b/Math.abs(b));a.position[0]+=g;a.position[1]+=b}}}function Ca(a,b,c){var d=null,f="#00deff";a===C.da?d=B.Fa:a===C.D?d=B.D:a===C.Ea?f="#000":a===C.la?f="#0f0":a===C.v?d=B.v:a===C.p?d=B.p:a===
C.n&&(d=B.n);s.fillStyle=f;s.fillRect(b,c,v,v);null!==d&&q(d,b,c,v,v)}var I=640,D=400,v=16,ba=I/v,Ja=D/v,B={u:0,Ca:1,n:2,A:3,p:4,C:5,v:6,D:7,Da:8,Fa:9,za:10,Aa:11},V=[{frame:{x:30,y:0,a:30,b:14},f:{x:1,y:1,a:30,b:14},frames:[{x:1,y:1,a:15,b:13},{x:17,y:1,a:15,b:13}]},{frame:{x:14,y:40,a:14,b:8},f:{x:1,y:7,a:14,b:8}},{frame:{x:32,y:14,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:24,a:14,b:24},f:{x:1,y:7,a:14,b:24}},{frame:{x:16,y:48,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:0,a:30,b:24},f:{x:1,
y:3,a:30,b:24},frames:[{x:0,y:0,a:15,b:24},{x:15,y:0,a:15,b:24}]},{frame:{x:48,y:14,a:16,b:10},f:{x:0,y:10,a:16,b:10}},{frame:{x:14,y:24,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:31,y:30,a:6,b:14},f:{x:4,y:1,a:6,b:14}},{frame:{x:0,y:48,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:36,y:32,a:11,b:13},f:{x:0,y:0,a:12,b:13}},{frame:{x:49,y:25,a:15,b:16},f:{x:0,y:0,a:15,b:16}}],fa=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Fa=window.btoa&&window.atob,na="023123467".split(""),A={na:0,
qa:1,ja:2,Ba:3,X:4,ia:5,sa:6,ka:7,ra:8,Y:9,n:10,ma:11},C={EMPTY:"0",da:"1",p:"2",D:"3",Ea:"4",la:"5",v:"6",n:"7"},P=8,ga={pa:P+0,u:P+1,A:P+2,l:P+3},oa=P+4,t={g:0,i:1,e:2},Ka=10,pa=12,bb=[1,-6],hb=3,ib=5,kb=5E3,$a=10,ab=16,lb=2E3,r={P:0,ba:1,Z:2,W:3,o:4,F:5,aa:6,l:7,B:8,O:9};(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+
"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),f=window.setTimeout(function(){b(c+d)},d);a=c+d;return f});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();var Y=!1;if("ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints)for(var Y=!0,Xa=document.getElementsByClassName("btn"),Pa=0;Pa<Xa.length;Pa++)-1===Xa[Pa].getAttribute("class").indexOf("edit")&&
Xa[Pa].setAttribute("class","btn");var R=document.getElementById("C"),s=R.getContext("2d"),qa=new Image,La=document.createElement("canvas"),Ya=0,Oa=document.createElement("canvas"),Ha=0,x=[0,0],Qa=!1,W={ha:{},M:function(a){W.ha[a.keyCode]=void 0},L:function(a){W.ha[a.keyCode]=Ha}},Ga=[],Za={},Ma,M=0,Wa=!1,b={position:null,speed:4,R:0,T:0,U:0,La:2,Ka:-7,w:!1,j:!1,c:!1,r:!1,t:0,d:void 0,G:0,H:Ka,q:!1},f={position:null,h:null,k:0,wa:!1,s:0,K:$a},L={position:null,h:null,xa:0},ha=[],Da=null,Na={ga:null,
size:1,position:null,N:[0,0]},Q=[],mb={position:null},za=[],jb={position:null,speed:6},ra=[];n=u=a=null;var l={state:t.g,Q:R.getBoundingClientRect(),time:0,ea:0,fa:0,m:null},cb=[["Tutorial",[33,370],[I-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(Y?"S":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(Y?"DPad":"Mouse")+": move"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,[(Y?"2":"RClick")+": eat from nest or candy crumbs",(Y?"1":"LClick")+
": shoot!"]],[140,60,["Don't touch roofs or the boy"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[96,316],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 4",[75,370],[I-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000303030200000000200000000000000000207000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[1,2,3]]],y=window.localStorage&&window.localStorage.oa&&JSON.parse(window.localStorage.oa)||cb,gb=y.length-cb.length+1,w=0;qa.onload=function(){La.width=Ya=qa.naturalWidth;La.height=qa.naturalHeight;var a=La.getContext("2d");a.translate(qa.naturalWidth,0);a.scale(-1,1);a.drawImage(qa,0,0)};qa.src="img/imgmap.png";window.addEventListener("keyup",W.M,!1);window.addEventListener("keydown",W.L,!1);if(Y){var db=function(){l.state===t.g&&E()};c(R,"touchstart",db);c(R,"MSPointerDown",db);ya("s",function(){l.state===
t.g?W.L({keyCode:68}):H()},function(){W.M({keyCode:68})});ya("e",function(a){l.state===t.g?W.L({keyCode:74}):Aa(a)},function(){W.M({keyCode:74})});var sa=document.getElementById("o"),ja=sa.getBoundingClientRect(),eb=[100,100],Ra=!1,ta,Sa=function(a){a.preventDefault();ta=a.changedTouches||a;ja=sa.getBoundingClientRect();Ra=!0};c(sa,"touchstart",Sa);c(sa,"MSPointerDown",Sa);c(sa,"touchmove",Sa);c(sa,"MSPointerMove",Sa);c(sa,"touchend",function(a){a.preventDefault();Ra=!1});c(sa,"MSPointerUp",function(a){a.preventDefault();
Ra=!1});ya("p",function(){W.L({keyCode:l.state===t.g?73:32})},function(){W.M({keyCode:l.state===t.g?73:32})});K("a",69);K("l",37);K("u",38);K("r",39);K("d",40);K("g",71);K("c",67);K("t",84);K("n",78);c(document.body,"contextmenu",function(a){a.preventDefault()})}else c(R,"click",H),c(R,"contextmenu",Aa),c(R,"mousedown",function(a){1===a.which&&(Qa=!0);l.state===t.e&&Qa&&H()}),c(R,"mouseup",function(a){1===a.which&&(Qa=!1)}),c(R,"mousemove",function(a){var b=k(a);x=[b[0],b[1]];l.state===t.i?(a=k(a),
f.h=a.slice()):l.state===t.e&&Qa&&H()});for(var Ta=0;Ta<fa.length;Ta++)Za[Ta]=Ua.ua(["synth",0,0.4,0,0.208,0,0.12,20,fa[Ta],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);Ma=na.slice();g(A.na,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);g(A.qa,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);g(A.ia,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,
0]);g(A.ra,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);g(A.ja,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);g(A.ka,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);g(A.sa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);g(A.X,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,
3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);g(A.Ba,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);g(A.Y,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);g(A.n,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);g(A.ma,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);$(w);(function fb(c){var g=
c,k=Z(),z=b.La,E=b.position[0],K=b.position[1],h=W.ha;if(l.state===t.g)if(h[37]&&!b.c)w=(w+y.length-1)%y.length,$(w),b.c=!0;else if(h[39]&&!b.c)w=(w+1)%y.length,$(w),b.c=!0;else if(h[69]&&!b.c)b.c=!0,y[w][r.O]||G(),F(t.e),h[69]=void 0;else if(h[68]&&!b.c)b.c=!0,y[w][r.O]&&(y.splice(w,1),w--,$(w)),h[68]=void 0;else if(h[74]&&y[w][r.O]&&!b.c)k=prompt("Level data",JSON.stringify(y[w])),h[74]=void 0;else if(h[73]){if(k=prompt("Level data"))try{G(JSON.parse(k))}catch(V){alert("Error!")}h[73]=void 0}else h[37]||
(h[39]||h[68]||h[69]||h[74]||h[73])||(b.c=!1);else{if(l.state===t.e)if(h[37]&&!b.c)M=(M+oa-1)%oa,b.c=!0;else if(h[39]&&!b.c)M=(M+1)%oa,b.c=!0;else if(h[71]&&!b.c)a instanceof Array?a=u=n=null:(a=[32,32],u=[a[0]+15,a[1]+23],n=u.slice()),b.c=!0;else if(h[67]&&!b.c){b.c=!0;try{var N=JSON.parse(prompt("Crates",JSON.stringify(y[w][r.l])));if(N instanceof Array){for(k=0;k<N.length;k++)"number"===!typeof k&&alert("Error!"),N[k]=Math.max(1,Math.min(5,N[k]));y[w][r.l]=N;ua(y[w])}}catch(aa){alert("Error!")}h[67]=
void 0}else h[78]&&!b.c?(b.c=!0,(k=prompt("Name",y[w][r.P]))&&(y[w][r.P]=k),h[78]=!1):h[84]&&!b.c?(b.c=!0,g=+prompt("Time",y[w][r.F]),!isNaN(g)&&0<g&&(y[w][r.F]=g),h[84]=!1):h[69]&&!b.c?(b.c=!0,va(),h[69]=void 0):h[37]||(h[39]||h[71]||h[67]||h[78]||h[84]||h[69])||(b.c=!1);else if(l.state===t.i){if(!h[32]||b.w||b.j||b.r)h[69]&&!b.r?(b.r=!0,0<b.G&&(b.G--,b.T=3,b.U=g+5E3,N=Object.create(mb),N.position=[b.position[0]+4,b.position[1]-7],za.push(N),d(A.ra))):h[32]||(h[69]||!b.r)||(b.r=!1);else a:if(b.r=
!0,N=b.d,g=void 0!==N?Q[N]:void 0,void 0===g){for(N=0;N<Q.length;N++)if(Ba(b.position,Q[N].position)){b.d=N;d(A.X);break a}ea(C.n)&&(b.G=3,d(A.n))}else b.d=void 0,d(A.X),ea(C.la)&&void 0!==g&&(Q.splice(N,1),0>=Q.length?T():d(A.ia));h[38]?ea(C.p)?(b.position[1]=Math.min(D-v,K-z),b.c=!0):b.w||b.j||(b.t=b.Ka,b.R=k,b.w=!0,b.j=!0,d(A.na)):!h[38]&&b.w&&(b.w=!1);h[37]&&(b.position[0]=Math.max(v,E-U()),b.c=!0,b.q=!0);h[39]&&(b.position[0]=Math.min(I-2*v,E+U()),b.c=!0,b.q=!1);h[40]&&ea(C.p)&&(b.position[1]=
Math.min(D,K+z),b.c=!0);h[37]||(h[38]||h[39]||h[40])||(b.c=!1)}h[27]&&va()}Ha=c;if(Ra&&ta){var S;if(ta.clientX)S=ta;else if(ta instanceof Array)for(k=0;k<ta.length;k++)if(h=ta[k],h.clientX>=ja.left&&h.clientX<ja.left+ja.width&&h.clientY>=ja.top&&h.clientY<ja.top+ja.height){S=ta[k];break}if(S){S=[S.clientX-ja.left,S.clientY-ja.top];var h=wa(eb,S),k=da(eb,S)/12.5,m;l.state===t.i?m=f.position:l.state===t.e&&(m=x);m&&(m[0]+=(l.state===t.e?Math.round(Math.cos(h)):Math.cos(h))*(100>S[0]?-k:k),m[1]+=(l.state===
t.e?Math.round(Math.sin(h)):Math.sin(h))*(100>S[0]?-k:k),m[0]=Math.max(0,Math.min(m[0],I-1)),m[1]=Math.max(0,Math.min(m[1],D-1)));Wa&&H()}}if(l.state===t.i){l.Q=R.getBoundingClientRect();m=0;for(var p;m<=b.t;){if(xa(b.position[0]-8,b.position[1]+m,16,0,C.da)){p=b.position[1]+m-(b.position[1]+m)%v;break}m+=v}p?(b.position[1]=p,b.j&&(b.R=0,(p=la())&&b.t>12-p.size&&p&&breakCrate(p,c)),b.j=!1,b.t=0):xa(b.position[0]-16,b.position[1]-32,16,32,C.p)?b.j=!1:(b.t+=1,b.j=!0,b.position[1]+=b.t);void 0!==b.d&&
(Q[b.d].position[0]=b.position[0]+bb[0],Q[b.d].position[1]=b.position[1]+bb[1]);b.U<c&&0<b.T&&(b.T=0);for(p=0;p<ra.length;p++)if(m=ra[p],m.position[1]+=m.speed,Ba(b.position,m.position))ia(),ra.splice(p,1),p--;else if(m.position[1]>D||xa(m.position[0],m.position[1],0,0,C.D))ra.splice(p,1),p--;l.time<c&&O();ma(f);L.position&&(15>da(b.position,L.position)&&la()&&ia(la(),c),5>da(f.position,L.position)&&Ia(c),L.xa<c&&ca(c),ma(L));p=f;Z();p.wa=2>=da(f.position,b.position);a&&(p=xa(f.position[0],f.position[1],
0,0,C.v)?u:f.position,m=wa(n,p),S=n[0]>p[0]?-1:1,3<Math.abs(p[0]-n[0])||3<Math.abs(p[1]-n[1]))&&(n[0]+=1*Math.cos(m)*S,n[1]+=1*Math.sin(m)*S);((Z(),2>=da(f.position,b.position))||X(f.position[0],f.position[1],0,0,C.D)||a&&3>da(n,f.position))&&f.s<c&&Ia(c)}l.Q=R.getBoundingClientRect();s.fillStyle="black";s.fillRect(0,0,I,D);for(p=0;p<ba;p++)for(m=0;m<Ja;m++)Ca(ha[ba*m+p],p*v,m*v);for(m=0;m<Q.length;m++)m!==b.d&&(p=Q[m],s.drawImage(p.ga,p.position[0]-8,p.position[1]-8));for(m=0;m<za.length;m++)p=za[m],
q(B.Ca,p.position[0]-8,p.position[1]-8);for(m=0;m<ra.length;m++)p=ra[m],q(B.Da,p.position[0]-8,p.position[1]-8);a&&q(B.A,a[0],a[1]);if(l.m[r.B])for(p=0;p<l.m[r.B].length;p++){m=s;E=l.m[r.B][p][2];S=l.m[r.B][p][0];z=l.m[r.B][p][1];h=m.fillColor;k=m.textAlign;m.fillStyle="black";for(E=E.slice();0<E.length;)m.fillText(E.shift(),S,z),z+=10;m.fillStyle=h;m.textAlign=k}L.position&&q(5<da(L.position,L.h)?B.Aa:B.za,L.position[0]-8,L.position[1]);l.state===t.i?b.j?J(B.C,b.position[0]-8,b.position[1]-24,0,
b.q):b.c?J(B.C,b.position[0]-8,b.position[1]-24,10,b.q,c):J(B.C,b.position[0]-8,b.position[1]-24,1,b.q):J(B.C,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(p=Q[b.d],s.drawImage(p.ga,b.q?p.position[0]+2:p.position[0]-15-p.size,p.position[1]-10));f.wa&&(s.beginPath(),s.arc(b.position[0],b.position[1],7*Z()+25,0,360),s.lineWidth=2,s.strokeStyle="#f09",s.stroke());l.state===t.i?f.s>c&&0===Math.floor(c/100)%2||J(B.u,f.position[0]-8,f.position[1]-8,2,!1,c):J(B.u,f.position[0]-8,f.position[1]-8,0);
a&&(s.fillStyle="red",s.fillRect(n[0]-1,n[1]-1,2,2),s.beginPath(),s.arc(n[0],n[1],5,0,360),s.lineWidth=2,s.strokeStyle="red",s.stroke());l.state===t.i?(s.fillStyle="#00deff",s.fillText("BOY",10,396),s.fillStyle="red",s.fillText("CROW",600,12),s.fillStyle="white",s.fillText("SPEED: "+Z()+"   BOOST: "+Math.max(0,Math.ceil((b.U-c)/1E3))+"   TIME: "+Math.max(0,Math.ceil((l.time-c)/1E3))+"   CANDIES: "+b.G+"   CRATES: "+b.H,50,396),s.fillText("SHOTS: "+f.k+"   STUN: "+Math.max(0,Math.ceil((f.s-c)/1E3))+
"   HEALTH: "+f.K,410,12)):l.state===t.e&&(s.fillStyle="white",s.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+y[w][r.F]+")   N: NAME ("+y[w][r.P]+")"+(Y?"   1: PAINT   2: TOGGLE PAINT":""),12,12));l.state===t.g&&s.drawImage(Oa,0,0);l.state===t.e&&(s.globalAlpha=0.6,M<P?(Ca(""+M,x[0]-x[0]%v,x[1]-x[1]%v),s.strokeStyle="#000",s.strokeRect(x[0]-x[0]%v,x[1]-x[1]%v,v,v)):M===ga.pa?J(B.C,x[0]-8,x[1]-24,1):M===ga.u?J(B.u,x[0]-8,x[1]-8,0):M===ga.A?q(B.A,x[0],x[1]):M===ga.l&&(s.fillStyle=
"yellow",s.fillRect(x[0]-8,x[1]-8,16,16),s.fillStyle="#000",s.fillText("C",x[0]-4,x[1]+4)),s.globalAlpha=1);window.requestAnimationFrame(fb)})()})();

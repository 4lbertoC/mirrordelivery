/* Mirror Delivery 1.0.1 http://github.com/4lbertoC/mirrordelivery */var la={};
(function(a){function x(a,c){return c?m(a&255)+x(a>>8,c-1):""}var g=this.wa=a||44100,u=2*g,m=String.fromCharCode,e;this.Na=function(a){var c=Audio,m=btoa,I="",R=a.length;for(q=0;q<R;q++)var d=32767*a[q]|0,d=-32768>d?-32768:32767<d?32767:d,d=d+(0>d?65536:0),I=I+String.fromCharCode(d&255,d>>8);a=I;a=["RIFF",36+(e=a.length),"WAVEfmt ",16,1,1,g,u,2,16,"data",e,a];I="";for(q=0;q<a.length;q++)I+="s"=="s4s4224422s4s"[q]?a[q]:x(a[q],"s4s4224422s4s".charCodeAt(q)-48);return new c("data:audio/wav;base64,"+m(I))};
var D,q,A=Math.sin,c=2*Math.PI;this.filter=function(a,c,e,d,g,m,x,u,A,M){e=e?e:1;d=d?d:a.length;D=a.slice(0);for(q=e;q<d;q++)D[q]=c(a,D,e,d,q,g,m,x,u,A,M);return D};this.filters={Ua:function(a,c,e,d,g,m){return c[g-1]+m*(a[g]-c[g-1])},Va:function(a,c,e,d,g,m){return c[g-1]+m*(d-g)/(d-e)*(a[g]-c[g-1])},Ta:function(a,c,d,e,g,m){return m*(c[g-1]+a[g]-a[g-1])}};this.ya=function(a,d,e,m,x,u,D,A,ga){d=d*c/g;var M=Array(a|0);for(q=0;q<a;q++)M[q]=e(q*d,m,x,u,D,A,ga);return M};var d=0;this.N={Oa:function(a){4>
a%c&&(d=2*Math.random()-1);return d},Wa:Math.random,Qa:Math.sin,Ra:function(a){return A(a)+0.5*A(a/2)+0.3*A(a/4)},Pa:function(a){return 2*(a/c-(a/c+0.5|0))},Aa:function(a,c){return A(a)>c?1:A(a)<c?-1:c}}}).apply(la);var Fa={};
(function(){this.ea=[];this.ba={square:la.N.Aa,saw:la.N.Pa,sine:la.N.Qa,noise:la.N.Oa,synth:la.N.Ra};this.Ja=function(){var a=[],x;for(x in this.ba)a.push(x);return a};this.Ka=function(){function a(a,e,u,q,A){void 0===A&&(A=(u-e)/1E3);a={name:a,id:a.replace(/ /g,""),min:e,max:u,step:A,Ia:q,type:"range",group:g};x.push(a)}var x=[],g=0,u=this.Ja();(function(a,e,u){a={name:a,id:a.replace(/ /g,""),options:e,Ia:u,type:"option",group:g};x.push(a)})("Generator",u,u[0]);a("SuperSamplingQuality",0,16,0,1);
a("MasterVolume",0,1,0.4);g++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);g++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);g++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);g++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);g++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);
g++;a("RepeatSpeed",0,0.8,0);g++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);g++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return x};this.ya=function(a){var x=2*Math.PI,g=Math.sin,u=Math.pow,m=Math.abs,e=la.wa,D=a.SuperSamplingQuality|0;1>D&&(D=1);for(var e=e*D,q=[{M:0,X:1,time:a.AttackTime},{M:1+a.SustainPunch,X:1,time:a.SustainTime},{M:1,X:0,time:a.DecayTime}],A=q.length,c=0;c<A;c++)q[c].V=
1+(q[c].time*e|0);for(var d=void 0,L=0,ma=-1,Ea=0,I=-1,R=0,c=0;c<A;c++)R+=q[c].V;R<e/2&&(R=e/2);var ya=Array(R/D|0),P=0,va=0,ga=Fa.ba[a.Generator];void 0===ga&&(ga=this.ba.Aa);var M=0,M=a.SquareDuty,ha=a.SquareDutySweep/e,U=0,Q=a.StartFrequency*x/e,aa=1+64*u(a.Slide,3)/e,ia=u(a.DeltaSlide,3)/(1E3*e);void 0!==D&&(ia/=D);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var Ga=a.MinFrequency*x/e,na=a.MaxFrequency*
x/e,ja=0,za=a.VibratoFrequency*x/e,W=a.VibratoDepth,Na=1+3*u(a.VibratoFrequencySlide,3)/e,oa=a.VibratoDepthSlide/e,pa=0,Aa=a.ChangeSpeed*e,qa=u(a.ChangeAmount,2),qa=0<a.ChangeAmount?1+10*qa:1-0.9*qa,Ba=Array(1024),c=0;1024>c;c++)Ba[c]=0;var G=0,E=1020*u(a.PhaserOffset,2),v=4E3*u(a.PhaserSweep,3)/e,ba=1E-5<m(v)||1E-5<m(E),Oa=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,C=0,X=0,ca=u(a.LPFilterCutoff,3)/10,Ha=1+a.HPFilterCutoffSweep/1E4,ra=5/(1+20*u(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);
0.8<ra&&(ra=0.8);var ra=1-ra,z=0.999>a.LPFilterCutoff,wa=0,p=u(a.HPFilterCutoff,2)/10,F=1+a.HPFilterCutoffSweep/1E4,$=0,da=R;0<a.RepeatSpeed&&(da=u(1-a.RepeatSpeed,2)*e+32);for(var Ia=a.MasterVolume,Ja=0,c=0;c<R;c++)P=ga(U,M,0),M+=ha,0>M?M=0:0.5<M&&(M=0.5),$>da&&(U=0,Q=a.StartFrequency*x/e,aa=1+3*u(a.Slide,3)/e,ia=u(a.DeltaSlide,3)/(1E3*e),void 0!==D&&(ia/=D),pa=0,Aa=a.ChangeSpeed*e,qa=1+(a.ChangeAmount|0)/12,$=0),$+=1,U+=Q,aa+=ia,Q*=aa,pa>Aa&&(Q*=qa,Aa=R),pa+=1,Q>na?Q=na:Q<Ga&&(Q=Ga),ja+=za,d=Q*
g(ja)*W,U+=d,za*=Na,oa&&(W+=oa,0>W?oa=W=0:1<W&&(W=1,oa=0)),Oa&&(0.0010<m(p)&&(p*=F,1E-5>p?p=1E-5:0.1<p&&(p=0.1)),d=C,ca*=Ha,0>ca?ca=0:0.1<ca&&(ca=0.1),z?(X+=(P-C)*ca,X*=ra):(C=P,X=0),C+=X,wa+=C-d,P=wa*=1-p),ba&&(E+=v,0>E&&(E=-E,v=-v),1023<E&&(E=1023,v=0),Ba[G]=P,P+=Ba[G-(E|0)+1024&1023],G=G+1&1023),c>I&&(ma+=1,d=ma<A?q[ma]:{M:0,X:0,V:R},L=d.M,Ea=(d.X-d.M)/(d.V+1),I+=d.V),P*=L,L+=Ea,P*=Ia,1<D?(va+=P,0===(c+1)%D&&(ya[Ja]=va/D,Ja+=1,va=0)):ya[c]=P;a=e/100|0;x=Array(a);for(c=0;c<a;c++)x[c]=0;return x.concat(ya).concat(x)};
this.ea=this.Ka()}).apply(Fa);var Za={};(function(){this.xa=function(a){a=Fa.ya(this.Ha(a));return la.Na(a)};this.Ha=function(a){for(var x={},g=Fa.ea.length,u=0;u<g;u++)x[Fa.ea[u].id]=a[u];return x}}).apply(Za);(function(){var a,x,g,u;function m(f,a,b){f.addEventListener?f.addEventListener(a,b,!1):f.attachEvent?f.attachEvent("on"+a,b):f["on"+a]=b}function e(f,a,b,c,d,h){var e=X[f].frame,g=X[f].e;f=X[f].frames;c=h?f[Math.floor(h*c/1E3)%f.length]:f[c];d?t.drawImage(Pa,cb-(e.x+c.x)-c.a,e.y+c.y,c.a,c.b,a+g.x,b+g.y,c.a,c.b):t.drawImage(sa,e.x+c.x,e.y+c.y,c.a,c.b,a+g.x,b+g.y,c.a,c.b)}function D(f,a,b,c,e){var d=X[f].frame;f=X[f].e;t.drawImage(sa,d.x,d.y,c||d.a,e||d.b,a+f.x,b+f.y,f.a,f.b)}function q(f){var a=f.clientX-
h.U.left;f=f.clientY-h.U.top;a=Math.max(0,Math.min(a,G-1));f=Math.max(0,Math.min(f,E-1));return[a,f]}function A(f){ea.style.cursor=f?"auto":"none"}function c(f,a){if(Ha)try{Ka[f]=Za.xa(a)}catch(b){}}function d(f){if(Ha)try{Ka[f]&&(Ka[f].pause(),Ka[f].currentTime=0,Ka[f].play())}catch(a){}}function L(f,a){var b=document.getElementById(f);m(b,La,function(){S.Q({keyCode:a})});m(b,Qa,function(){S.R({keyCode:a})})}function ma(f,a,b){f=document.getElementById(f);m(f,La,a);m(f,Qa,b)}function Ea(f){var a=
f[s.Y],b,c,d,e;Ra.S=a;for(var g=J.length=0;g<f[s.k].length;g++)b=f[s.k][g],c=Object.create(Ra),c.size=b,d=document.createElement("canvas"),d.width=Sa+b,d.height=Sa+b,e=d.getContext("2d"),e.fillStyle="yellow",e.fillRect(0,0,Sa+b,Sa+b),e.fillStyle="#000",e.fillText(b,5,10),c.ha=d,d=a[0]+16*g,b=a[1]-b,c.position=[d,b],c.S=[d,b],J.push(c)}function I(f){f=h.l=B[f]||B[w];b.position=f[s.da].slice();b.J=0;b.ia=0;b.c=void 0;b.K=db;b.o=!1;b.v=!1;b.w=!1;b.i=!1;b.u=!1;l.O=eb;l.j=0;l.A=0;l.position=f[s.aa].slice();
a=f[s.C].slice();x=[f[s.C][0]+15,f[s.C][1]+23];g=x.slice();u=1;K.position=K.g=null;h.time=0;R(p.f);N=0;fa="4444444444444444444444444444444444444444"+f[s.ca]+"4444444444444444444444444444444444444444";fa=fa.split("");Ca=null;Ea(f);xa.length=0;ta.length=0;H.clearRect(0,0,G,E);H.fillStyle="rgba(0,0,0,0.7)";H.fillRect(0,0,G,E);H.fillStyle="#fff";H.textAlign="center";H.fillText("A 13kB game by Alberto Congiu",G/2,12);H.font="20px courier";H.fillText(h.l[s.G],G/2,E/2-50);H.fillText("Luke "+h.fa+" - "+h.ga+
" Crow",G/2,E/2);H.font="15px courier";H.fillText("Click the "+(Y?"screen":"crow")+" to start",G/2,E/2+60);H.fillText("< >: Select level",G/2,E/2+100);H.fillText(f[s.T]?"E: EDIT   "+(Y?"S":"D")+": DELETE   "+(Y?"A":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",G/2,E/2+120);H.beginPath();H.arc(l.position[0],l.position[1],16,0,360);H.lineWidth=2;H.strokeStyle="#fff";H.stroke();Ta=ra.slice();window.localStorage&&(window.localStorage.sa=JSON.stringify(B))}function R(f){h.state=f;if(Y){var a=document.getElementsByClassName("edit");
f="btn edit"+(f===p.d?"":" h");for(var b=0;b<a.length;b++)a[b].setAttribute("class",f)}}function ya(f){R(p.h);h.time=Da+h.l[s.I];Ha&&(Ua=f+wa);A()}function P(){h.fa+=1;A(!0);d(z.va);I(w)}function va(){h.ga+=1;A(!0);d(z.oa);I(w)}function ga(f,a){return Math.round(f[0]/v)===Math.round(a[0]/v)&&Math.round(f[1]/v)===Math.round(a[1]/v)}function M(a,b){return Math.atan((b[1]-a[1])/(b[0]-a[0]))}function ha(a,b){return a&&b&&Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function U(a,b){return fa[ba*
Math.floor(b/v)+Math.floor(a/v)]}function Q(a,b,c,d,e){var g=b,h=U(a,g);c=a+c;topRight=U(c,g);bottomRight=U(c,b+d);bottomLeft=U(a,b);return h===e||topRight===e||bottomRight===e||bottomLeft===e}function aa(a,b,c,d,e){b+=d;d=U(a,b);bottomLeft=U(a+c,b);return d===e||bottomLeft===e}function ia(){A(!0);h.state===p.d&&(B[w][s.ca]=fa.join("").substring(ba,ba*Oa-ba),B[w][s.da]=b.position.slice(),B[w][s.aa]=l.position.slice(),B[w][s.C]=a.slice(),B[w][s.Y]=Ra.S.slice());I(w)}function Ga(){var a=b.L,c=na();
b.w||(a=0);a=Math.min(c,a+c/25);b.L=a;return ja(F.n)?c/2:a}function na(){return Math.max(1,b.speed+b.W-(void 0!==b.c?J[b.c].size:0))}function ja(a){return Q(b.position[0]-8,b.position[1]-32,16,32,a)||Q(b.position[0],b.position[1]-8,0,0,a)}function za(a){a.preventDefault();if(h.state===p.d)$a=!$a;else if(h.state===p.h&&l.A<Da)if(a=q(a),(aa(l.position[0]-8,l.position[1]-8,16,16,F.r)||Q(l.position[0],l.position[1],0,0,F.r))&&l.j<Ja)d(z.$),l.j++;else{var b;for(b=0;b<xa.length;b++)if(ga(a,xa[b].position)){l.j=
Math.max(l.j,nb);d(z.$);xa.splice(b,1);break}}}function W(){if(h.state===p.d)if(N<$){var f=ba*Math.floor(y[1]/v)+Math.floor(y[0]/v);f<fa.length&&(fa[f]=""+N)}else if(N===da.ta)b.position=y.slice();else if(N===da.q)l.position=y.slice();else if(N===da.B)a=y.slice(),x=[a[0]+15,a[1]+23],g=x.slice();else{if(N===da.k)for(Ra.S=y.slice(),f=0;f<J.length;f++){var c=J[f];c.position[0]=y[0]+16*f;c.position[1]=y[1]-c.size}}else h.state!==p.f||Y?0<l.j&&l.A<Da&&(l.j--,d(z.na),f=Object.create(ob),f.position=l.position.slice(),
ta.push(f)):y[0]>l.position[0]-16&&(y[0]<l.position[0]+16&&y[1]>l.position[1]-16&&y[1]<l.position[1]+16)&&ya(Da)}function Na(a){l.A=a+pb;d(z.qa);l.j=0;l.O--;0>=l.O?P():l.O<fb&&oa(a)}function oa(a){if(!Ca){Ca=[];for(var b=0;b<fa.length;b++)fa[b]===F.s&&Ca.push(b);d(z.ka)}b=Ca[Math.floor(Math.random()*Ca.length)]+1;b=[b%ba*v,Math.floor(b/ba)*v];K.g=[b[0]-6,b[1]-10];K.position?d(z.la):K.position=K.g.slice();K.za=a+qb;u+=0.05}function pa(a,c){d(z.ua);b.c=void 0;a.position=a.S.slice();b.K--;0>=b.K?va():
b.K<fb&&oa(c)}function Aa(a){var b=a||B[w];a=[a?b[s.G]:"CustomLevel"+rb++,b[s.da].slice(),b[s.aa].slice(),b[s.Y].slice(),b[s.C].slice(),b[s.I],b[s.ca],b[s.k].slice(),null,!0];B.push(a);h.state===p.f&&(w=B.length-1,I(w))}function qa(a,b,c){var d=null,e=K.position?"#c29":"#00deff";a===F.s?d=C.s:a===F.H?d=C.H:a===F.Ga?e="#000":a===F.pa?e="#0f0":a===F.r?d=C.r:a===F.n?d=C.n:a===F.m&&(d=C.m);t.fillStyle=e;t.fillRect(b,c,v,v);null!==d&&D(d,b,c,v,v)}function Ba(a){if(a.position&&a.g){var b=M(a.position,a.g),
c=a.position[0]>a.g[0]?-1:1,d=Math.abs(a.position[0]-a.g[0]),e=Math.abs(a.position[1]-a.g[1]);if(3<d||3<e){var g=16*Math.cos(b)*c,b=16*Math.sin(b)*c;Math.abs(g)>d&&(g=d*g/Math.abs(g));Math.abs(b)>e&&(b=e*b/Math.abs(b));a.position[0]+=g;a.position[1]+=b}}}var G=640,E=400,v=16,ba=G/v,Oa=E/v,C={q:0,Ea:1,m:2,B:3,n:4,F:5,r:6,H:7,Fa:8,s:9,Ba:10,Ca:11},X=[{frame:{x:30,y:0,a:30,b:14},e:{x:1,y:1,a:30,b:14},frames:[{x:1,y:1,a:15,b:11},{x:17,y:1,a:15,b:13}]},{frame:{x:14,y:40,a:14,b:8},e:{x:1,y:7,a:14,b:8}},
{frame:{x:32,y:14,a:16,b:16},e:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:24,a:14,b:24},e:{x:1,y:7,a:14,b:24}},{frame:{x:16,y:48,a:16,b:16},e:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:0,a:30,b:24},e:{x:1,y:3,a:30,b:24},frames:[{x:0,y:0,a:15,b:24},{x:16,y:0,a:13,b:24}]},{frame:{x:48,y:14,a:16,b:10},e:{x:0,y:10,a:16,b:10}},{frame:{x:14,y:24,a:16,b:16},e:{x:0,y:0,a:16,b:16}},{frame:{x:31,y:32,a:6,b:14},e:{x:4,y:1,a:6,b:14}},{frame:{x:0,y:48,a:16,b:16},e:{x:0,y:0,a:16,b:16}},{frame:{x:36,y:32,a:11,b:13},e:{x:0,y:0,
a:12,b:13}},{frame:{x:49,y:25,a:15,b:16},e:{x:0,y:0,a:15,b:16}}],ca=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ha=!(!window.btoa||!window.atob),ra="023123467".split(""),z={ra:0,ua:1,na:2,Da:3,Z:4,ma:5,va:6,oa:7,ja:8,$:9,m:10,qa:11,ka:12,la:13},wa=200,p={f:0,h:1,d:2},F={EMPTY:"0",s:"1",n:"2",H:"3",Ga:"4",pa:"5",r:"6",m:"7"},$=8,da={ta:$+0,q:$+1,B:$+2,k:$+3},Ia=$+4,Ja=3,nb=5,pb=5E3,eb=10,fb=4,qb=2E3,db=10,Sa=12,gb=[1,-6],s={G:0,da:1,aa:2,Y:3,C:4,I:5,ca:6,k:7,D:8,T:9},ea=document.getElementById("C"),
t=ea.getContext("2d"),sa=new Image,Pa=document.createElement("canvas"),cb=0,Va=document.createElement("canvas"),H=Va.getContext("2d"),Ka=[],hb={},Ta=null,Ua=0,y=[0,0],Wa=!1,V=!1,S={P:{},R:function(a){S.P[a.keyCode]=void 0},Q:function(a){S.P[a.keyCode]=Da}},Y=!1,Ma=document.getElementById("o"),ka=Ma.getBoundingClientRect(),ib=[100,100],ab=!1,ua=null,La=null,Qa=null,jb=null,Da=0,h={state:p.f,U:ea.getBoundingClientRect(),time:0,fa:0,ga:0,l:null},fa=[],Ca=null,N=0,$a=!1,b={position:null,speed:4,L:0,W:0,
ia:0,Ma:2,La:-6.8,t:!1,v:!1,i:!1,w:!1,o:!1,p:0,c:void 0,J:0,K:db,Sa:!1},l={position:null,g:null,j:0,A:0,O:eb};g=x=a=null;u=1;var K={position:null,g:null,za:0},Ra={ha:null,size:1,position:null,S:[0,0]},J=[],sb={position:null},xa=[],ob={position:null,speed:6},ta=[],kb=[["Tutorial",[33,370],[G-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000550000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,[(Y?"I":"SPACEBAR")+": grab/release crate"]],[500,340,["UP/DOWN: Climb"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(Y?"I":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(Y?"analogPad":"Mouse")+": move"]],[390,80,["Hide from granny in nest"]],[390,130,[(Y?"A":"RClick")+": eat from nest or crumbs",(Y?"S":"LClick")+": shoot!"]],
[150,70,["Don't touch roofs or Luke"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000000000000000000000000000000000000000000000550000020000000000000200000000000000000055020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000000000000000000033000000000330000000000000055000000000000000000000000000000000000005500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[96,316],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 4",[75,370],[G-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000600000000000000000000000000000000000000011055000000000000000000000003333000000000005500000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000303030200000000000000000000000000207000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[1,2,3]]],B=window.localStorage&&window.localStorage.sa&&JSON.parse(window.localStorage.sa)||kb,rb=B.length-kb.length+1,w=0;(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e})})();if("ontouchstart"in document.documentElement||
window.navigator.msMaxTouchPoints)for(var Y=!0,La=window.navigator.msMaxTouchPoints?"MSPointerDown":"touchstart",Qa=window.navigator.msMaxTouchPoints?"MSPointerUp":"touchend",jb=window.navigator.msMaxTouchPoints?"MSPointerMove":"touchmove",bb=document.getElementsByClassName("btn"),Xa=0;Xa<bb.length;Xa++)-1===bb[Xa].getAttribute("class").indexOf("edit")&&bb[Xa].setAttribute("class","btn");sa.onload=function(){Pa.width=cb=sa.naturalWidth;Pa.height=sa.naturalHeight;var a=Pa.getContext("2d");a.translate(sa.naturalWidth,
0);a.scale(-1,1);a.drawImage(sa,0,0)};sa.src="imgmap.png";Va.width=G;Va.height=E;for(var Ya=0;Ya<ca.length;Ya++)hb[Ya]=Za.xa(["synth",0,0.4,0,0.208,0,0.12,20,ca[Ya],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);Ta=ra.slice();c(z.ra,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);c(z.ua,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);c(z.ma,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,
0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);c(z.ja,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);c(z.na,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);c(z.oa,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);c(z.va,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);c(z.Z,["noise",0,0.4,
0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);c(z.Da,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);c(z.$,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);c(z.m,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);c(z.qa,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,
0,0,0,0,1,0,0,0,0]);c(z.ka,["synth",0,0.4,0,0.44,0.579,1.004,20,1793,2400,-0.202,0,0,8.6962,0.5346,0.666,-0.298,0.671,0,0,0,0,0,1,0,0,0,0]);c(z.la,["noise",0,0.127,0.043,0.124,0,0.282,20,2400,20,1,-1,0,0.01,-0.3,-1,0.956,0.272,0,0.68,0,-0.998,-1,1,1,0,0,-0.998]);window.addEventListener("keyup",S.R,!1);window.addEventListener("keydown",S.Q,!1);if(Y){m(ea,La,function(){h.state===p.f&&ya()});ma("s",function(){h.state===p.f?S.Q({keyCode:68}):W()},function(){S.R({keyCode:68})});ma("a",function(a){h.state===
p.f?S.Q({keyCode:74}):za(a)},function(){S.R({keyCode:74})});ma("i",function(){S.Q({keyCode:h.state===p.f?73:32})},function(){S.R({keyCode:h.state===p.f?73:32})});L("x",27);L("e",69);L("l",37);L("u",38);L("r",39);L("d",40);L("c",67);L("t",84);L("n",78);var lb=function(a){a.preventDefault();ua=a.changedTouches||a;ka=Ma.getBoundingClientRect();ab=!0};m(Ma,La,lb);m(Ma,jb,lb);m(Ma,Qa,function(a){a.preventDefault();ab=!1});m(document.body,"contextmenu",function(a){a.preventDefault()})}else m(ea,"click",
W),m(ea,"contextmenu",za),m(ea,"mousedown",function(a){1===a.which&&(Wa=!0);h.state===p.d&&Wa&&W()}),m(ea,"mouseup",function(a){1===a.which&&(Wa=!1)}),m(ea,"mousemove",function(a){var b=q(a);y=[b[0],b[1]];h.state===p.h?(a=q(a),l.g=a.slice()):h.state===p.d&&Wa&&W()});I(w);(function mb(c){var q=c,m=na(),A=b.Ma,H=b.position[0],L=b.position[1],r=S.P;if(h.state===p.f)if(r[37]&&!V)w=(w+B.length-1)%B.length,I(w);else if(r[39]&&!V)w=(w+1)%B.length,I(w);else if(r[69]&&!V)B[w][s.T]||Aa(),R(p.d),r[69]=void 0;
else if(r[68]&&!V)B[w][s.T]&&(B.splice(w,1),w--,I(w)),r[68]=void 0;else if(r[74]&&B[w][s.T]&&!V)m=prompt("Data",JSON.stringify(B[w])),r[74]=void 0;else{if(r[73]){if(m=prompt("Data"))try{Aa(JSON.parse(m))}catch(U){alert("Error!")}r[73]=void 0}}else{if(h.state===p.d)if(r[37]&&!V)N=(N+Ia-1)%Ia;else if(r[39]&&!V)N=(N+1)%Ia;else if(r[67]&&!V){try{var O=JSON.parse(prompt("Crates",JSON.stringify(B[w][s.k])));if(O instanceof Array){for(m=0;m<O.length;m++)"number"===!typeof m&&alert("Error!"),O[m]=Math.max(1,
Math.min(5,O[m]));B[w][s.k]=O;Ea(B[w])}}catch(X){alert("Error!")}r[67]=void 0}else r[78]&&!V?((m=prompt("Name",B[w][s.G]))&&(B[w][s.G]=m),r[78]=!1):r[84]&&!V?(q=+prompt("Time",B[w][s.I]),!isNaN(q)&&0<q&&(B[w][s.I]=q),r[84]=!1):r[69]&&!V&&(ia(),r[69]=void 0);else if(h.state===p.h){if(!r[32]||b.v||b.i||b.o)r[69]&&!b.o?(b.o=!0,0<b.J&&(b.J--,b.W=3,b.ia=q+5E3,O=Object.create(sb),O.position=[b.position[0]+4,b.position[1]-7],xa.push(O),d(z.ja))):r[32]||(r[69]||!b.o)||(b.o=!1);else a:if(b.o=!0,O=b.c,q=void 0!==
O?J[O]:void 0,void 0===q){for(O=0;O<J.length;O++)if(ga(b.position,J[O].position)){b.c=O;d(z.Z);break a}ja(F.m)&&(b.J=3,d(z.m))}else b.c=void 0,d(z.Z),ja(F.pa)&&void 0!==q&&(J.splice(O,1),0>=J.length?P():d(z.ma));r[38]?ja(F.n)?(b.position[1]=Math.min(E-v,L-A),b.t=!0):b.v||b.i||(b.p=b.La,b.L=m,b.v=!0,b.i=!0,b.t=!1,d(z.ra)):!r[38]&&b.v&&(b.v=!1,b.t=!1);r[37]?(b.position[0]=Math.max(v,H-Ga()),b.w=!0,b.u=!0):r[39]?(b.position[0]=Math.min(G-2*v,H+Ga()),b.w=!0,b.u=!1):b.w=!1;r[40]&&ja(F.n)?(b.position[1]=
Math.min(E,L+A),b.t=!0):b.t=!1}r[27]&&ia()}V=!1;for(var Z in S.P)V=V||!!S.P[Z];Da=c;try{Ua<c&&h.state===p.h&&0<Ta.length&&(hb[Ta.shift()].play(),Ua+=wa)}catch(ca){}if(ab&&ua){var T;if(ua.clientX)T=ua;else if(ua instanceof TouchList)for(Z=0;Z<ua.length;Z++)if(r=ua[Z],r.clientX>=ka.left&&r.clientX<ka.left+ka.width&&r.clientY>=ka.top&&r.clientY<ka.top+ka.height){T=ua[Z];break}if(T){T=[T.clientX-ka.left,T.clientY-ka.top];r=M(ib,T);Z=ha(ib,T)/12.5;var k;h.state===p.h?k=l.position:h.state===p.d&&(k=y);
k&&(k[0]+=(h.state===p.d?Math.round(Math.cos(r)):Math.cos(r))*(100>T[0]?-Z:Z),k[1]+=(h.state===p.d?Math.round(Math.sin(r)):Math.sin(r))*(100>T[0]?-Z:Z),k[0]=Math.max(0,Math.min(k[0],G-1)),k[1]=Math.max(0,Math.min(k[1],E-1)));$a&&W()}}if(h.state===p.h){h.U=ea.getBoundingClientRect();k=2;var n;if(!b.i&&aa(b.position[0]-4,b.position[1],8,0,F.s))n=b.position[1]-b.position[1]%v;else for(;k<=b.p;){if(aa(b.position[0]-4,b.position[1]+k,8,0,F.s)){n=b.position[1]+k-(b.position[1]+k)%v;break}k+=v}n?(b.position[1]=
n,b.i&&(b.L/=2,(n=void 0!==b.c&&J[b.c])&&b.p>13-n.size&&pa(n,c)),b.i=!1,b.p=0):aa(b.position[0]-4,b.position[1]-32,8,16,F.n)?b.i=!1:(b.p+=0.6,b.i=!0,b.position[1]+=b.p);void 0!==b.c&&(J[b.c].position[0]=b.position[0]+gb[0],J[b.c].position[1]=b.position[1]+gb[1]);b.ia<c&&0<b.W&&(b.W=0);for(n=0;n<ta.length;n++)if(k=ta[n],k.position[1]+=k.speed,ga(b.position,k.position)&&void 0!==b.c)pa(J[b.c],c),ta.splice(n,1),n--;else if(k.position[1]>E||aa(k.position[0],k.position[1],0,0,F.H))ta.splice(n,1),n--;h.time<
c&&va();Ba(l);K.position&&(void 0!==b.c&&15>ha(b.position,K.position)&&pa(J[b.c],c),15>ha(l.position,K.position)&&Na(c),K.za<c&&oa(c),Ba(K));n=aa(l.position[0],l.position[1],0,0,F.r)?x:l.position;k=M(g,n);T=g[0]>n[0]?-1:1;if(3<Math.abs(n[0]-g[0])||3<Math.abs(n[1]-g[1]))g[0]+=Math.cos(k)*T*u,g[1]+=Math.sin(k)*T*u;(7*na()+25>=ha(l.position,b.position)||Q(l.position[0],l.position[1],0,0,F.H)||3>ha(g,l.position))&&l.A<c&&Na(c)}h.U=ea.getBoundingClientRect();t.fillStyle="#000";t.fillRect(0,0,G,E);for(n=
0;n<ba;n++)for(k=0;k<Oa;k++)qa(fa[ba*k+n],n*v,k*v);for(k=0;k<J.length;k++)k!==b.c&&(n=J[k],t.drawImage(n.ha,n.position[0]-8,n.position[1]-8));for(k=0;k<xa.length;k++)n=xa[k],D(C.Ea,n.position[0]-8,n.position[1]-8);for(k=0;k<ta.length;k++)n=ta[k],D(C.Fa,n.position[0]-8,n.position[1]-8);D(C.B,a[0],a[1]);if(h.l[s.D])for(n=0;n<h.l[s.D].length;n++){k=t;A=h.l[s.D][n][2];T=h.l[s.D][n][0];m=h.l[s.D][n][1];r=k.fillColor;Z=k.textAlign;k.fillStyle="#000";for(A=A.slice();0<A.length;)k.fillText(A.shift(),T,m),
m+=10;k.fillStyle=r;k.textAlign=Z}K.position&&D(5<ha(K.position,K.g)?C.Ca:C.Ba,K.position[0]-8,K.position[1]);h.state===p.h?b.i?e(C.F,b.position[0]-8,b.position[1]-24,0,b.u):b.w||b.t?e(C.F,b.position[0]-8,b.position[1]-24,10,b.u,c):e(C.F,b.position[0]-8,b.position[1]-24,1,b.u):e(C.F,b.position[0]-8,b.position[1]-24,1);void 0!==b.c&&(n=J[b.c],t.drawImage(n.ha,b.u?n.position[0]+2:n.position[0]-15-n.size,n.position[1]-10));7*na()+75>=ha(l.position,b.position)&&(t.beginPath(),t.arc(b.position[0],b.position[1],
7*na()+25,0,360),t.lineWidth=2,t.strokeStyle="#f09",t.stroke());h.state===p.h?l.A>c&&0===Math.floor(c/100)%2||e(C.q,l.position[0]-8,l.position[1]-8,2,!1,c):e(C.q,l.position[0]-8,l.position[1]-8,0);t.fillStyle="red";t.fillRect(g[0]-1,g[1]-1,2,2);t.beginPath();t.arc(g[0],g[1],5,0,360);t.lineWidth=2;t.strokeStyle="red";t.stroke();t.fillStyle="white";h.state===p.h?(t.fillText("\u2699 "+Math.max(0,Math.ceil((h.time-c)/1E3))+"   \u00a7 "+b.J+"   \u25fc "+b.K,50,396),t.fillText("\u21a1 "+l.j+"   \u2665 "+
l.O,530,12),t.fillStyle="#00deff",t.fillText("LUKE",10,396),t.fillStyle="red",t.fillText("CROW",600,12)):h.state===p.d&&t.fillText("< > CHANGE BLOCK   C: CRATES   T: TIME ("+B[w][s.I]+")   N: NAME ("+B[w][s.G]+")"+(Y?"   S: PAINT   A: TOGGLE PAINT   analogPad: MOVE":""),12,12);h.state===p.f&&t.drawImage(Va,0,0);h.state===p.d&&(t.globalAlpha=0.6,N<$?(qa(""+N,y[0]-y[0]%v,y[1]-y[1]%v),t.strokeStyle="#000",t.strokeRect(y[0]-y[0]%v,y[1]-y[1]%v,v,v)):N===da.ta?e(C.F,y[0]-8,y[1]-24,1):N===da.q?e(C.q,y[0]-
8,y[1]-8,0):N===da.B?D(C.B,y[0],y[1]):N===da.k&&(t.fillStyle="yellow",t.fillRect(y[0]-8,y[1]-8,16,16),t.fillStyle="#000",t.fillText("C",y[0]-4,y[1]+4)),t.globalAlpha=1);window.requestAnimationFrame(mb)})()})();

/* http://github.com/4lbertoC/mirrordelivery */var ka={};
(function(b){function w(b,c){return c?k(b&255)+w(b>>8,c-1):""}var n=this.ta=b||44100,u=2*n,k=String.fromCharCode,d;this.Ka=function(b){var c=Audio,k=btoa,m="",C=b.length;for(s=0;s<C;s++)var N=32767*b[s]|0,N=-32768>N?-32768:32767<N?32767:N,N=N+(0>N?65536:0),m=m+String.fromCharCode(N&255,N>>8);b=m;b=["RIFF",36+(d=b.length),"WAVEfmt ",16,1,1,n,u,2,16,"data",d,b];m="";for(s=0;s<b.length;s++)m+="s"=="s4s4224422s4s"[s]?b[s]:w(b[s],"s4s4224422s4s".charCodeAt(s)-48);return new c("data:audio/wav;base64,"+k(m))};
var m,s,A=Math.sin,c=2*Math.PI;this.filter=function(b,c,d,n,C,k,w,u,A,P){d=d?d:1;n=n?n:b.length;m=b.slice(0);for(s=d;s<n;s++)m[s]=c(b,m,d,n,s,C,k,w,u,A,P);return m};this.filters={Qa:function(b,c,d,n,C,m){return c[C-1]+m*(b[C]-c[C-1])},Ra:function(b,c,d,n,m,k){return c[m-1]+k*(n-m)/(n-d)*(b[m]-c[m-1])},Pa:function(b,c,d,n,m,k){return k*(c[m-1]+b[m]-b[m-1])}};this.va=function(b,d,m,k,w,u,A,D,la){d=d*c/n;var P=Array(b|0);for(s=0;s<b;s++)P[s]=m(s*d,k,w,u,A,D,la);return P};var D=0;this.L={La:function(b){4>
b%c&&(D=2*Math.random()-1);return D},Sa:Math.random,Na:Math.sin,Oa:function(b){return A(b)+0.5*A(b/2)+0.3*A(b/4)},Ma:function(b){return 2*(b/c-(b/c+0.5|0))},xa:function(b,c){return A(b)>c?1:A(b)<c?-1:c}}}).apply(ka);var Ba={};
(function(){this.ca=[];this.$={square:ka.L.xa,saw:ka.L.Ma,sine:ka.L.Na,noise:ka.L.La,synth:ka.L.Oa};this.Ga=function(){var b=[],w;for(w in this.$)b.push(w);return b};this.Ha=function(){function b(b,d,m,u,A){void 0===A&&(A=(m-d)/1E3);b={name:b,id:b.replace(/ /g,""),min:d,max:m,step:A,Fa:u,type:"range",group:n};w.push(b)}var w=[],n=0,u=this.Ga();(function(b,d,m){b={name:b,id:b.replace(/ /g,""),options:d,Fa:m,type:"option",group:n};w.push(b)})("Generator",u,u[0]);b("SuperSamplingQuality",0,16,0,1);b("MasterVolume",
0,1,0.4);n++;b("AttackTime",0,1,0.1);b("SustainTime",0,2,0.3);b("SustainPunch",0,3,2);b("DecayTime",0,2,1);n++;b("MinFrequency",20,2400,0,1);b("StartFrequency",20,2400,440,1);b("MaxFrequency",20,2400,2E3,1);b("Slide",-1,1,0);b("DeltaSlide",-1,1,0);n++;b("VibratoDepth",0,1,0);b("VibratoFrequency",0.01,48,8);b("VibratoDepth Slide",-0.3,1,0);b("VibratoFrequencySlide",-1,1,0);n++;b("ChangeAmount",-1,1,0);b("ChangeSpeed",0,1,0.1);n++;b("SquareDuty",0,0.5,0);b("SquareDutySweep",-1,1,0);n++;b("RepeatSpeed",
0,0.8,0);n++;b("PhaserOffset",-1,1,0);b("PhaserSweep",-1,1,0);n++;b("LPFilterCutoff",0,1,1);b("LPFilterCutoffSweep",-1,1,0);b("LPFilterResonance",0,1,0);b("HPFilterCutoff",0,1,0);b("HPFilterCutoffSweep",-1,1,0);return w};this.va=function(b){var w=2*Math.PI,n=Math.sin,u=Math.pow,k=Math.abs,d=ka.ta,m=b.SuperSamplingQuality|0;1>m&&(m=1);for(var d=d*m,s=[{K:0,V:1,time:b.AttackTime},{K:1+b.SustainPunch,V:1,time:b.SustainTime},{K:1,V:0,time:b.DecayTime}],A=s.length,c=0;c<A;c++)s[c].T=1+(s[c].time*d|0);
for(var D=void 0,K=0,T=-1,xa=0,ya=-1,C=0,c=0;c<A;c++)C+=s[c].T;C<d/2&&(C=d/2);var N=Array(C/m|0),O=0,ra=0,la=Ba.$[b.Generator];void 0===la&&(la=this.$.xa);var P=0,P=b.SquareDuty,Ca=b.SquareDutySweep/d,U=0,H=b.StartFrequency*w/d,ca=1+64*u(b.Slide,3)/d,Z=u(b.DeltaSlide,3)/(1E3*d);void 0!==m&&(Z/=m);b.MinFrequency>b.StartFrequency&&(b.MinFrequency=b.StartFrequency);b.MaxFrequency<b.StartFrequency&&(b.MaxFrequency=b.StartFrequency);for(var Da=b.MinFrequency*w/d,Ea=b.MaxFrequency*w/d,fa=0,ga=b.VibratoFrequency*
w/d,da=b.VibratoDepth,sa=1+3*u(b.VibratoFrequencySlide,3)/d,ta=b.VibratoDepthSlide/d,ma=0,ua=b.ChangeSpeed*d,na=u(b.ChangeAmount,2),na=0<b.ChangeAmount?1+10*na:1-0.9*na,za=Array(1024),c=0;1024>c;c++)za[c]=0;var va=0,E=1020*u(b.PhaserOffset,2),I=4E3*u(b.PhaserSweep,3)/d,y=1E-5<k(I)||1E-5<k(E),$=0.0010<b.HPFilterCutoff||0.999>b.LPFilterCutoff,ha=0,F=0,V=u(b.LPFilterCutoff,3)/10,La=1+b.HPFilterCutoffSweep/1E4,ia=5/(1+20*u(b.LPFilterResonance,2))*(0.01+b.LPFilterCutoff);0.8<ia&&(ia=0.8);var ia=1-ia,Ma=
0.999>b.LPFilterCutoff,z=0,q=u(b.HPFilterCutoff,2)/10,G=1+b.HPFilterCutoffSweep/1E4,Y=0,aa=C;0<b.RepeatSpeed&&(aa=u(1-b.RepeatSpeed,2)*d+32);for(var Fa=b.MasterVolume,Ga=0,c=0;c<C;c++)O=la(U,P,0),P+=Ca,0>P?P=0:0.5<P&&(P=0.5),Y>aa&&(U=0,H=b.StartFrequency*w/d,ca=1+3*u(b.Slide,3)/d,Z=u(b.DeltaSlide,3)/(1E3*d),void 0!==m&&(Z/=m),ma=0,ua=b.ChangeSpeed*d,na=1+(b.ChangeAmount|0)/12,Y=0),Y+=1,U+=H,ca+=Z,H*=ca,ma>ua&&(H*=na,ua=C),ma+=1,H>Ea?H=Ea:H<Da&&(H=Da),fa+=ga,D=H*n(fa)*da,U+=D,ga*=sa,ta&&(da+=ta,0>
da?ta=da=0:1<da&&(da=1,ta=0)),$&&(0.0010<k(q)&&(q*=G,1E-5>q?q=1E-5:0.1<q&&(q=0.1)),D=ha,V*=La,0>V?V=0:0.1<V&&(V=0.1),Ma?(F+=(O-ha)*V,F*=ia):(ha=O,F=0),ha+=F,z+=ha-D,O=z*=1-q),y&&(E+=I,0>E&&(E=-E,I=-I),1023<E&&(E=1023,I=0),za[va]=O,O+=za[va-(E|0)+1024&1023],va=va+1&1023),c>ya&&(T+=1,D=T<A?s[T]:{K:0,V:0,T:C},K=D.K,xa=(D.V-D.K)/(D.T+1),ya+=D.T),O*=K,K+=xa,O*=Fa,1<m?(ra+=O,0===(c+1)%m&&(N[Ga]=ra/m,Ga+=1,ra=0)):N[c]=O;b=d/100|0;w=Array(b);for(c=0;c<b;c++)w[c]=0;return w.concat(N).concat(w)};this.ca=this.Ha()}).apply(Ba);var Wa={};(function(){this.ua=function(b){b=Ba.va(this.Ea(b));return ka.Ka(b)};this.Ea=function(b){for(var w={},n=Ba.ca.length,u=0;u<n;u++)w[Ba.ca[u].id]=b[u];return w}}).apply(Wa);(function(){var b,w,n,u;function k(f,a,b){f.addEventListener?f.addEventListener(a,b,!1):f.attachEvent?f.attachEvent("on"+a,b):f["on"+a]=b}function d(f,a,b,c,kb,d){var e=V[f].frame,g=V[f].f;f=V[f].frames;c=d?f[Math.floor(d*c/1E3)%f.length]:f[c];kb?t.drawImage(Na,$a-(e.x+c.x)-c.a,e.y+c.y,c.a,c.b,a+g.x,b+g.y,c.a,c.b):t.drawImage(oa,e.x+c.x,e.y+c.y,c.a,c.b,a+g.x,b+g.y,c.a,c.b)}function m(f,a,b,c,e){var d=V[f].frame;f=V[f].f;t.drawImage(oa,d.x,d.y,c||d.a,e||d.b,a+f.x,b+f.y,f.a,f.b)}function s(f){var a=
f.clientX-e.R.left;f=f.clientY-e.R.top;a=Math.max(0,Math.min(a,E-1));f=Math.max(0,Math.min(f,I-1));return[a,f]}function A(f){ba.style.cursor=f?"auto":"none"}function c(f,a){if(ia)try{Ha[f]=Wa.ua(a)}catch(b){}}function D(){try{e.state===q.i&&0<Oa.length&&(ab[Oa.shift()].play(),setTimeout(D,200))}catch(f){}}function K(f){if(ia)try{Ha[f]&&(Ha[f].pause(),Ha[f].currentTime=0,Ha[f].play())}catch(a){}}function T(f,a){var b=document.getElementById(f);k(b,Ia,function(){W.N({keyCode:a})});k(b,Pa,function(){W.O({keyCode:a})})}
function xa(f,a,b){f=document.getElementById(f);k(f,Ia,a);k(f,Pa,b)}function ya(f){var a=f[r.W],b,c,d,e;Qa.P=a;for(var g=L.length=0;g<f[r.l].length;g++)b=f[r.l][g],c=Object.create(Qa),c.size=b,d=document.createElement("canvas"),d.width=Ra+b,d.height=Ra+b,e=d.getContext("2d"),e.fillStyle="yellow",e.fillRect(0,0,Ra+b,Ra+b),e.fillStyle="#000",e.fillText(b,5,10),c.fa=d,d=a[0]+16*g,b=a[1]-b,c.position=[d,b],c.P=[d,b],L.push(c)}function C(f){f=e.m=B[f]||B[v];a.position=f[r.ba].slice();a.I=0;a.ha=0;a.d=
void 0;a.J=bb;a.q=!1;a.u=!1;a.c=!1;a.j=!1;a.p=!1;g.M=cb;g.k=0;g.v=0;g.position=f[r.Z].slice();b=f[r.A].slice();w=[f[r.A][0]+15,f[r.A][1]+23];n=w.slice();u=1;M.position=M.h=null;e.time=0;N(q.g);Q=0;ea="4444444444444444444444444444444444444444"+f[r.aa]+"4444444444444444444444444444444444444444";ea=ea.split("");Aa=null;ya(f);wa.length=0;pa.length=0;J.clearRect(0,0,E,I);J.fillStyle="rgba(0,0,0,0.7)";J.fillRect(0,0,E,I);J.fillStyle="#fff";J.textAlign="center";J.fillText("A 13kB game by Alberto Congiu",
E/2,12);J.font="20px courier";J.fillText(e.m[r.D],E/2,I/2-50);J.fillText("Luke "+e.da+" - "+e.ea+" Crow",E/2,I/2);J.font="15px courier";J.fillText("Click the "+(X?"screen":"crow")+" to start",E/2,I/2+60);J.fillText("< >: Select level",E/2,I/2+100);J.fillText(f[r.Q]?"E: EDIT   "+(X?"S":"D")+": DELETE   "+(X?"A":"J")+": EXPORT   I: IMPORT":"E: EDIT   I: IMPORT",E/2,I/2+120);J.beginPath();J.arc(g.position[0],g.position[1],16,0,360);J.lineWidth=2;J.strokeStyle="#fff";J.stroke();Oa=Ma.slice();window.localStorage&&
(window.localStorage.pa=JSON.stringify(B))}function N(a){e.state=a;if(X){var b=document.getElementsByClassName("edit");a="btn edit"+(a===q.e?"":" h");for(var c=0;c<b.length;c++)b[c].setAttribute("class",a)}}function O(){N(q.i);e.time=Ja+e.m[r.H];ia&&D();A()}function ra(){e.da+=1;A(!0);K(z.sa);C(v)}function la(){e.ea+=1;A(!0);K(z.la);C(v)}function P(a,b){return Math.round(a[0]/y)===Math.round(b[0]/y)&&Math.round(a[1]/y)===Math.round(b[1]/y)}function Ca(a,b){return Math.atan((b[1]-a[1])/(b[0]-a[0]))}
function U(a,b){return a&&b&&Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function H(a,b){return ea[$*Math.floor(b/y)+Math.floor(a/y)]}function ca(a,b,c,d,e){var g=b,m=H(a,g);c=a+c;topRight=H(c,g);bottomRight=H(c,b+d);bottomLeft=H(a,b);return m===e||topRight===e||bottomRight===e||bottomLeft===e}function Z(a,b,c,d,e){b+=d;d=H(a,b);bottomLeft=H(a+c,b);return d===e||bottomLeft===e}function Da(){A(!0);e.state===q.e&&(B[v][r.aa]=ea.join("").substring($,$*ha-$),B[v][r.ba]=a.position.slice(),B[v][r.Z]=
g.position.slice(),B[v][r.A]=b.slice(),B[v][r.W]=Qa.P.slice());C(v)}function Ea(){var b=a.S,c=fa();a.c||(b=0);b=Math.min(c,b+c/7);a.S=b;return ga(G.o)?c/2:b}function fa(){return Math.max(1,a.speed+a.U-(void 0!==a.d?L[a.d].size:0))}function ga(b){return ca(a.position[0]-8,a.position[1]-32,16,32,b)||ca(a.position[0],a.position[1]-8,0,0,b)}function da(b){b.preventDefault();if(e.state===q.e)Xa=!Xa;else if(e.state===q.i&&g.v<Ja)if(b=s(b),(Z(g.position[0]-8,g.position[1]-8,16,16,G.t)||ca(g.position[0],
g.position[1],0,0,G.t))&&g.k<Ga)K(z.Y),g.k++;else{var a;for(a=0;a<wa.length;a++)if(P(b,wa[a].position)){g.k=Math.max(g.k,lb);K(z.Y);wa.splice(a,1);break}}}function sa(){if(e.state===q.e)if(Q<Y){var f=$*Math.floor(x[1]/y)+Math.floor(x[0]/y);f<ea.length&&(ea[f]=""+Q)}else if(Q===aa.qa)a.position=x.slice();else if(Q===aa.s)g.position=x.slice();else if(Q===aa.w)b=x.slice(),w=[b[0]+15,b[1]+23],n=w.slice();else{if(Q===aa.l)for(Qa.P=x.slice(),f=0;f<L.length;f++){var c=L[f];c.position[0]=x[0]+16*f;c.position[1]=
x[1]-c.size}}else e.state!==q.g||X?0<g.k&&g.v<Ja&&(g.k--,K(z.ka),f=Object.create(mb),f.position=g.position.slice(),pa.push(f)):x[0]>g.position[0]-16&&(x[0]<g.position[0]+16&&x[1]>g.position[1]-16&&x[1]<g.position[1]+16)&&O()}function ta(b){g.v=b+nb;K(z.na);g.k=0;g.M--;0>=g.M?ra():g.M<db&&ma(b)}function ma(b){if(!Aa){Aa=[];for(var a=0;a<ea.length;a++)ea[a]===G.F&&Aa.push(a)}a=Aa[Math.floor(Math.random()*Aa.length)]+1;a=[a%$*y,Math.floor(a/$)*y];M.h=[a[0]-6,a[1]-10];M.position||(M.position=M.h.slice());
M.wa=b+ob;u+=0.05}function ua(b,c){K(z.ra);a.d=void 0;b.position=b.P.slice();a.J--;0>=a.J?la():a.J<db&&ma(c)}function na(b){var a=b||B[v];b=[b?a[r.D]:"CustomLevel"+pb++,a[r.ba].slice(),a[r.Z].slice(),a[r.W].slice(),a[r.A].slice(),a[r.H],a[r.aa],a[r.l].slice(),null,!0];B.push(b);e.state===q.g&&(v=B.length-1,C(v))}function za(a,b,c){var d=null,e=M.position?"#c29":"#00deff";a===G.F?d=F.F:a===G.G?d=F.G:a===G.Da?e="#000":a===G.ma?e="#0f0":a===G.t?d=F.t:a===G.o?d=F.o:a===G.n&&(d=F.n);t.fillStyle=e;t.fillRect(b,
c,y,y);null!==d&&m(d,b,c,y,y)}function va(a){if(a.position&&a.h){var b=Ca(a.position,a.h),c=a.position[0]>a.h[0]?-1:1,d=Math.abs(a.position[0]-a.h[0]),e=Math.abs(a.position[1]-a.h[1]);if(3<d||3<e){var g=16*Math.cos(b)*c,b=16*Math.sin(b)*c;Math.abs(g)>d&&(g=d*g/Math.abs(g));Math.abs(b)>e&&(b=e*b/Math.abs(b));a.position[0]+=g;a.position[1]+=b}}}var E=640,I=400,y=16,$=E/y,ha=I/y,F={s:0,Ba:1,n:2,w:3,o:4,C:5,t:6,G:7,Ca:8,F:9,ya:10,za:11},V=[{frame:{x:30,y:0,a:30,b:14},f:{x:1,y:1,a:30,b:14},frames:[{x:1,
y:1,a:15,b:11},{x:17,y:1,a:15,b:13}]},{frame:{x:14,y:40,a:14,b:8},f:{x:1,y:7,a:14,b:8}},{frame:{x:32,y:14,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:24,a:14,b:24},f:{x:1,y:7,a:14,b:24}},{frame:{x:16,y:48,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:0,a:30,b:24},f:{x:1,y:3,a:30,b:24},frames:[{x:0,y:0,a:15,b:24},{x:16,y:0,a:13,b:24}]},{frame:{x:48,y:14,a:16,b:10},f:{x:0,y:10,a:16,b:10}},{frame:{x:14,y:24,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:31,y:32,a:6,b:14},f:{x:4,y:1,a:6,b:14}},{frame:{x:0,
y:48,a:16,b:16},f:{x:0,y:0,a:16,b:16}},{frame:{x:36,y:32,a:11,b:13},f:{x:0,y:0,a:12,b:13}},{frame:{x:49,y:25,a:15,b:16},f:{x:0,y:0,a:15,b:16}}],La=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],ia=!(!window.btoa||!window.atob),Ma="023123467".split(""),z={oa:0,ra:1,ka:2,Aa:3,X:4,ja:5,sa:6,la:7,ia:8,Y:9,n:10,na:11},q={g:0,i:1,e:2},G={EMPTY:"0",F:"1",o:"2",G:"3",Da:"4",ma:"5",t:"6",n:"7"},Y=8,aa={qa:Y+0,s:Y+1,w:Y+2,l:Y+3},Fa=Y+4,Ga=3,lb=5,nb=5E3,cb=10,db=4,ob=2E3,bb=10,Ra=12,eb=[1,-6],
r={D:0,ba:1,Z:2,W:3,A:4,H:5,aa:6,l:7,B:8,Q:9},ba=document.getElementById("C"),t=ba.getContext("2d"),oa=new Image,Na=document.createElement("canvas"),$a=0,Sa=document.createElement("canvas"),J=Sa.getContext("2d"),Ha=[],ab={},Oa=null,x=[0,0],Ta=!1,W={ga:{},O:function(a){W.ga[a.keyCode]=void 0},N:function(a){W.ga[a.keyCode]=Ja}},X=!1,Ka=document.getElementById("o"),ja=Ka.getBoundingClientRect(),fb=[100,100],Ya=!1,qa=null,Ia=null,Pa=null,gb=null,Ja=0,e={state:q.g,R:ba.getBoundingClientRect(),time:0,da:0,
ea:0,m:null},ea=[],Aa=null,Q=0,Xa=!1,a={position:null,speed:4,S:0,U:0,ha:0,Ja:2,Ia:-7,u:!1,j:!1,c:!1,q:!1,r:0,d:void 0,I:0,J:bb,p:!1},g={position:null,h:null,k:0,v:0,M:cb};n=w=b=null;u=1;var M={position:null,h:null,wa:0},Qa={fa:null,size:1,position:null,P:[0,0]},L=[],qb={position:null},wa=[],mb={position:null,speed:6},pa=[],hb=[["Tutorial",[33,370],[E-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000550000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,[(X?"I":"SPACEBAR")+": grab/release crate"]],[500,340,["UP/DOWN: Climb"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(X?"I":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(X?"analogPad":"Mouse")+": move"]],[390,80,["Hide from granny in nest"]],[390,130,[(X?"A":"RClick")+": eat from nest or crumbs",(X?"S":"LClick")+": shoot!"]],
[150,70,["Don't touch roofs or Luke"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000000000000000000000000000000000000000000000550000020000000000000200000000000000000055020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000000000000000000033000000000330000000000000055000000000000000000000000000000000000005500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[96,316],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2]],["Level 4",[75,370],[E-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000600000000000000000000000000000000000000011055000000000000000000000003333000000000005500000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000303030200000000200000000000000000207000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[1,2,3]]],B=window.localStorage&&window.localStorage.pa&&JSON.parse(window.localStorage.pa)||hb,pb=B.length-hb.length+1,v=0;(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e})})();if("ontouchstart"in document.documentElement||
window.navigator.msMaxTouchPoints)for(var X=!0,Ia=window.navigator.msMaxTouchPoints?"MSPointerDown":"touchstart",Pa=window.navigator.msMaxTouchPoints?"MSPointerUp":"touchend",gb=window.navigator.msMaxTouchPoints?"MSPointerMove":"touchmove",Za=document.getElementsByClassName("btn"),Ua=0;Ua<Za.length;Ua++)-1===Za[Ua].getAttribute("class").indexOf("edit")&&Za[Ua].setAttribute("class","btn");oa.onload=function(){Na.width=$a=oa.naturalWidth;Na.height=oa.naturalHeight;var a=Na.getContext("2d");a.translate(oa.naturalWidth,
0);a.scale(-1,1);a.drawImage(oa,0,0)};oa.src="img/imgmap.png";Sa.width=E;Sa.height=I;for(var Va=0;Va<La.length;Va++)ab[Va]=Wa.ua(["synth",0,0.4,0,0.208,0,0.12,20,La[Va],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);Oa=Ma.slice();c(z.oa,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);c(z.ra,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);c(z.ja,["square",0,0.4,0,0.098,0.504,0.282,20,1582,
2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);c(z.ia,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);c(z.ka,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);c(z.la,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);c(z.sa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);c(z.X,["noise",0,
0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);c(z.Aa,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);c(z.Y,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);c(z.n,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);c(z.na,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,
0,0,0,0,0,0,1,0,0,0,0]);window.addEventListener("keyup",W.O,!1);window.addEventListener("keydown",W.N,!1);if(X){k(ba,Ia,function(){e.state===q.g&&O()});xa("s",function(){e.state===q.g?W.N({keyCode:68}):sa()},function(){W.O({keyCode:68})});xa("a",function(a){e.state===q.g?W.N({keyCode:74}):da(a)},function(){W.O({keyCode:74})});xa("i",function(){W.N({keyCode:e.state===q.g?73:32})},function(){W.O({keyCode:e.state===q.g?73:32})});T("x",27);T("e",69);T("l",37);T("u",38);T("r",39);T("d",40);T("c",67);T("t",
84);T("n",78);var ib=function(a){a.preventDefault();qa=a.changedTouches||a;ja=Ka.getBoundingClientRect();Ya=!0};k(Ka,Ia,ib);k(Ka,gb,ib);k(Ka,Pa,function(a){a.preventDefault();Ya=!1});k(document.body,"contextmenu",function(a){a.preventDefault()})}else k(ba,"click",sa),k(ba,"contextmenu",da),k(ba,"mousedown",function(a){1===a.which&&(Ta=!0);e.state===q.e&&Ta&&sa()}),k(ba,"mouseup",function(a){1===a.which&&(Ta=!1)}),k(ba,"mousemove",function(a){var b=s(a);x=[b[0],b[1]];e.state===q.i?(a=s(a),g.h=a.slice()):
e.state===q.e&&Ta&&sa()});C(v);(function jb(c){var s=c,k=fa(),A=a.Ja,D=a.position[0],H=a.position[1],h=W.ga;if(e.state===q.g)if(h[37]&&!a.c)v=(v+B.length-1)%B.length,C(v),a.c=!0;else if(h[39]&&!a.c)v=(v+1)%B.length,C(v),a.c=!0;else if(h[69]&&!a.c)a.c=!0,B[v][r.Q]||na(),N(q.e),h[69]=void 0;else if(h[68]&&!a.c)a.c=!0,B[v][r.Q]&&(B.splice(v,1),v--,C(v)),h[68]=void 0;else if(h[74]&&B[v][r.Q]&&!a.c)k=prompt("Data",JSON.stringify(B[v])),h[74]=void 0;else if(h[73]){if(k=prompt("Data"))try{na(JSON.parse(k))}catch(J){alert("Error!")}h[73]=
void 0}else h[37]||(h[39]||h[68]||h[69]||h[74]||h[73])||(a.c=!1);else{if(e.state===q.e)if(h[37]&&!a.c)Q=(Q+Fa-1)%Fa,a.c=!0;else if(h[39]&&!a.c)Q=(Q+1)%Fa,a.c=!0;else if(h[67]&&!a.c){a.c=!0;try{var R=JSON.parse(prompt("Crates",JSON.stringify(B[v][r.l])));if(R instanceof Array){for(k=0;k<R.length;k++)"number"===!typeof k&&alert("Error!"),R[k]=Math.max(1,Math.min(5,R[k]));B[v][r.l]=R;ya(B[v])}}catch(O){alert("Error!")}h[67]=void 0}else h[78]&&!a.c?(a.c=!0,(k=prompt("Name",B[v][r.D]))&&(B[v][r.D]=k),
h[78]=!1):h[84]&&!a.c?(a.c=!0,s=+prompt("Time",B[v][r.H]),!isNaN(s)&&0<s&&(B[v][r.H]=s),h[84]=!1):h[69]&&!a.c?(a.c=!0,Da(),h[69]=void 0):h[37]||(h[39]||h[67]||h[78]||h[84]||h[69])||(a.c=!1);else if(e.state===q.i){if(!h[32]||a.u||a.j||a.q)h[69]&&!a.q?(a.q=!0,0<a.I&&(a.I--,a.U=3,a.ha=s+5E3,R=Object.create(qb),R.position=[a.position[0]+4,a.position[1]-7],wa.push(R),K(z.ia))):h[32]||(h[69]||!a.q)||(a.q=!1);else a:if(a.q=!0,R=a.d,s=void 0!==R?L[R]:void 0,void 0===s){for(R=0;R<L.length;R++)if(P(a.position,
L[R].position)){a.d=R;K(z.X);break a}ga(G.n)&&(a.I=3,K(z.n))}else a.d=void 0,K(z.X),ga(G.ma)&&void 0!==s&&(L.splice(R,1),0>=L.length?ra():K(z.ja));h[38]?ga(G.o)?(a.position[1]=Math.min(I-y,H-A),a.c=!0):a.u||a.j||(a.r=a.Ia,a.S=k,a.u=!0,a.j=!0,K(z.oa)):!h[38]&&a.u&&(a.u=!1);h[37]&&(a.position[0]=Math.max(y,D-Ea()),a.c=!0,a.p=!0);h[39]&&(a.position[0]=Math.min(E-2*y,D+Ea()),a.c=!0,a.p=!1);h[40]&&ga(G.o)&&(a.position[1]=Math.min(I,H+A),a.c=!0);h[37]||(h[38]||h[39]||h[40])||(a.c=!1)}h[27]&&Da()}Ja=c;if(Ya&&
qa){var S;if(qa.clientX)S=qa;else if(qa instanceof TouchList)for(k=0;k<qa.length;k++)if(h=qa[k],h.clientX>=ja.left&&h.clientX<ja.left+ja.width&&h.clientY>=ja.top&&h.clientY<ja.top+ja.height){S=qa[k];break}if(S){S=[S.clientX-ja.left,S.clientY-ja.top];var h=Ca(fb,S),k=U(fb,S)/12.5,l;e.state===q.i?l=g.position:e.state===q.e&&(l=x);l&&(l[0]+=(e.state===q.e?Math.round(Math.cos(h)):Math.cos(h))*(100>S[0]?-k:k),l[1]+=(e.state===q.e?Math.round(Math.sin(h)):Math.sin(h))*(100>S[0]?-k:k),l[0]=Math.max(0,Math.min(l[0],
E-1)),l[1]=Math.max(0,Math.min(l[1],I-1)));Xa&&sa()}}if(e.state===q.i){e.R=ba.getBoundingClientRect();l=0;for(var p;l<=a.r;){if(Z(a.position[0]-8,a.position[1]+l,16,0,G.F)){p=a.position[1]+l-(a.position[1]+l)%y;break}l+=y}p?(a.position[1]=p,a.j&&(a.S=0,(p=void 0!==a.d&&L[a.d])&&a.r>15-p.size&&ua(p,c)),a.j=!1,a.r=0):ca(a.position[0]-16,a.position[1]-32,16,32,G.o)?a.j=!1:(a.r+=1,a.j=!0,a.position[1]+=a.r);void 0!==a.d&&(L[a.d].position[0]=a.position[0]+eb[0],L[a.d].position[1]=a.position[1]+eb[1]);
a.ha<c&&0<a.U&&(a.U=0);for(p=0;p<pa.length;p++)if(l=pa[p],l.position[1]+=l.speed,P(a.position,l.position)&&void 0!==a.d)ua(L[a.d],c),pa.splice(p,1),p--;else if(l.position[1]>I||Z(l.position[0],l.position[1],0,0,G.G))pa.splice(p,1),p--;e.time<c&&la();va(g);M.position&&(void 0!==a.d&&15>U(a.position,M.position)&&ua(L[a.d],c),15>U(g.position,M.position)&&ta(c),M.wa<c&&ma(c),va(M));p=Z(g.position[0],g.position[1],0,0,G.t)?w:g.position;l=Ca(n,p);S=n[0]>p[0]?-1:1;if(3<Math.abs(p[0]-n[0])||3<Math.abs(p[1]-
n[1]))n[0]+=Math.cos(l)*S*u,n[1]+=Math.sin(l)*S*u;(7*fa()+25>=U(g.position,a.position)||ca(g.position[0],g.position[1],0,0,G.G)||3>U(n,g.position))&&g.v<c&&ta(c)}e.R=ba.getBoundingClientRect();t.fillStyle="#000";t.fillRect(0,0,E,I);for(p=0;p<$;p++)for(l=0;l<ha;l++)za(ea[$*l+p],p*y,l*y);for(l=0;l<L.length;l++)l!==a.d&&(p=L[l],t.drawImage(p.fa,p.position[0]-8,p.position[1]-8));for(l=0;l<wa.length;l++)p=wa[l],m(F.Ba,p.position[0]-8,p.position[1]-8);for(l=0;l<pa.length;l++)p=pa[l],m(F.Ca,p.position[0]-
8,p.position[1]-8);m(F.w,b[0],b[1]);if(e.m[r.B])for(p=0;p<e.m[r.B].length;p++){l=t;D=e.m[r.B][p][2];S=e.m[r.B][p][0];A=e.m[r.B][p][1];h=l.fillColor;k=l.textAlign;l.fillStyle="#000";for(D=D.slice();0<D.length;)l.fillText(D.shift(),S,A),A+=10;l.fillStyle=h;l.textAlign=k}M.position&&m(5<U(M.position,M.h)?F.za:F.ya,M.position[0]-8,M.position[1]);e.state===q.i?a.j?d(F.C,a.position[0]-8,a.position[1]-24,0,a.p):a.c?d(F.C,a.position[0]-8,a.position[1]-24,10,a.p,c):d(F.C,a.position[0]-8,a.position[1]-24,1,
a.p):d(F.C,a.position[0]-8,a.position[1]-24,1);void 0!==a.d&&(p=L[a.d],t.drawImage(p.fa,a.p?p.position[0]+2:p.position[0]-15-p.size,p.position[1]-10));7*fa()+75>=U(g.position,a.position)&&(t.beginPath(),t.arc(a.position[0],a.position[1],7*fa()+25,0,360),t.lineWidth=2,t.strokeStyle="#f09",t.stroke());e.state===q.i?g.v>c&&0===Math.floor(c/100)%2||d(F.s,g.position[0]-8,g.position[1]-8,2,!1,c):d(F.s,g.position[0]-8,g.position[1]-8,0);t.fillStyle="red";t.fillRect(n[0]-1,n[1]-1,2,2);t.beginPath();t.arc(n[0],
n[1],5,0,360);t.lineWidth=2;t.strokeStyle="red";t.stroke();t.fillStyle="white";e.state===q.i?(t.fillText("\u2699 "+Math.max(0,Math.ceil((e.time-c)/1E3))+"   \u00a7 "+a.I+"   \u25fc "+a.J,50,396),t.fillText("\u21a1 "+g.k+"   \u2665 "+g.M,530,12),t.fillStyle="#00deff",t.fillText("LUKE",10,396),t.fillStyle="red",t.fillText("CROW",600,12)):e.state===q.e&&t.fillText("< > CHANGE BLOCK   C: CRATES   T: TIME ("+B[v][r.H]+")   N: NAME ("+B[v][r.D]+")"+(X?"   S: PAINT   A: TOGGLE PAINT   analogPad: MOVE":""),
12,12);e.state===q.g&&t.drawImage(Sa,0,0);e.state===q.e&&(t.globalAlpha=0.6,Q<Y?(za(""+Q,x[0]-x[0]%y,x[1]-x[1]%y),t.strokeStyle="#000",t.strokeRect(x[0]-x[0]%y,x[1]-x[1]%y,y,y)):Q===aa.qa?d(F.C,x[0]-8,x[1]-24,1):Q===aa.s?d(F.s,x[0]-8,x[1]-8,0):Q===aa.w?m(F.w,x[0],x[1]):Q===aa.l&&(t.fillStyle="yellow",t.fillRect(x[0]-8,x[1]-8,16,16),t.fillStyle="#000",t.fillText("C",x[0]-4,x[1]+4)),t.globalAlpha=1);window.requestAnimationFrame(jb)})()})();

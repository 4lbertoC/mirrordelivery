/* Mirror Delivery 1.3.8 http://github.com/4lbertoC/mirrordelivery */var ma={};
(function(b){function z(b,k){return k?c(b&255)+z(b>>8,k-1):""}var p=this.xa=b||44100,t=2*p,c=String.fromCharCode,k;this.Oa=function(b){var P=Audio,h=btoa,J="",R=b.length;for(s=0;s<R;s++)var c=32767*b[s]|0,c=-32768>c?-32768:32767<c?32767:c,c=c+(0>c?65536:0),J=J+String.fromCharCode(c&255,c>>8);b=J;b=["RIFF",36+(k=b.length),"WAVEfmt ",16,1,1,p,t,2,16,"data",k,b];J="";for(s=0;s<b.length;s++)J+="s"=="s4s4224422s4s"[s]?b[s]:z(b[s],"s4s4224422s4s".charCodeAt(s)-48);return new P("data:audio/wav;base64,"+h(J))};
var B,s,E=Math.sin,h=2*Math.PI;this.filter=function(b,k,c,p,h,z,t,q,E,S){c=c?c:1;p=p?p:b.length;B=b.slice(0);for(s=c;s<p;s++)B[s]=k(b,B,c,p,s,h,z,t,q,E,S);return B};this.filters={Va:function(b,c,k,p,h,s){return c[h-1]+s*(b[h]-c[h-1])},Wa:function(b,c,k,p,h,s){return c[h-1]+s*(p-h)/(p-k)*(b[h]-c[h-1])},Ua:function(b,c,k,p,h,s){return s*(c[h-1]+b[h]-b[h-1])}};this.za=function(b,c,k,z,t,q,B,E,oa){c=c*h/p;var S=Array(b|0);for(s=0;s<b;s++)S[s]=k(s*c,z,t,q,B,E,oa);return S};var q=0;this.N={Pa:function(b){4>
b%h&&(q=2*Math.random()-1);return q},Xa:Math.random,Ra:Math.sin,Sa:function(b){return E(b)+0.5*E(b/2)+0.3*E(b/4)},Qa:function(b){return 2*(b/h-(b/h+0.5|0))},Da:function(b,c){return E(b)>c?1:E(b)<c?-1:c}}}).apply(ma);var Ka={};
(function(){this.ea=[];this.ba={square:ma.N.Da,saw:ma.N.Qa,sine:ma.N.Ra,noise:ma.N.Pa,synth:ma.N.Sa};this.La=function(){var b=[],z;for(z in this.ba)b.push(z);return b};this.Ma=function(){function b(b,k,t,s,E){void 0===E&&(E=(t-k)/1E3);b={name:b,id:b.replace(/ /g,""),min:k,max:t,step:E,Ka:s,type:"range",group:p};z.push(b)}var z=[],p=0,t=this.La();(function(b,k,t){b={name:b,id:b.replace(/ /g,""),options:k,Ka:t,type:"option",group:p};z.push(b)})("Generator",t,t[0]);b("SuperSamplingQuality",0,16,0,1);
b("MasterVolume",0,1,0.4);p++;b("AttackTime",0,1,0.1);b("SustainTime",0,2,0.3);b("SustainPunch",0,3,2);b("DecayTime",0,2,1);p++;b("MinFrequency",20,2400,0,1);b("StartFrequency",20,2400,440,1);b("MaxFrequency",20,2400,2E3,1);b("Slide",-1,1,0);b("DeltaSlide",-1,1,0);p++;b("VibratoDepth",0,1,0);b("VibratoFrequency",0.01,48,8);b("VibratoDepth Slide",-0.3,1,0);b("VibratoFrequencySlide",-1,1,0);p++;b("ChangeAmount",-1,1,0);b("ChangeSpeed",0,1,0.1);p++;b("SquareDuty",0,0.5,0);b("SquareDutySweep",-1,1,0);
p++;b("RepeatSpeed",0,0.8,0);p++;b("PhaserOffset",-1,1,0);b("PhaserSweep",-1,1,0);p++;b("LPFilterCutoff",0,1,1);b("LPFilterCutoffSweep",-1,1,0);b("LPFilterResonance",0,1,0);b("HPFilterCutoff",0,1,0);b("HPFilterCutoffSweep",-1,1,0);return z};this.za=function(b){var z=2*Math.PI,p=Math.sin,t=Math.pow,c=Math.abs,k=ma.xa,B=b.SuperSamplingQuality|0;1>B&&(B=1);for(var k=k*B,s=[{M:0,Y:1,time:b.AttackTime},{M:1+b.SustainPunch,Y:1,time:b.SustainTime},{M:1,Y:0,time:b.DecayTime}],E=s.length,h=0;h<E;h++)s[h].X=
1+(s[h].time*k|0);for(var q=void 0,I=0,P=-1,Da=0,J=-1,R=0,h=0;h<E;h++)R+=s[h].X;R<k/2&&(R=k/2);var Ea=Array(R/B|0),G=0,na=0,oa=Ka.ba[b.Generator];void 0===oa&&(oa=this.ba.Da);var S=0,S=b.SquareDuty,Ra=b.SquareDutySweep/k,ea=0,U=b.StartFrequency*z/k,Z=1+64*t(b.Slide,3)/k,C=t(b.DeltaSlide,3)/(1E3*k);void 0!==B&&(C/=B);b.MinFrequency>b.StartFrequency&&(b.MinFrequency=b.StartFrequency);b.MaxFrequency<b.StartFrequency&&(b.MaxFrequency=b.StartFrequency);for(var wa=b.MinFrequency*z/k,ia=b.MaxFrequency*z/
k,Fa=0,La=b.VibratoFrequency*z/k,$=b.VibratoDepth,pa=1+3*t(b.VibratoFrequencySlide,3)/k,xa=b.VibratoDepthSlide/k,fa=0,Ga=b.ChangeSpeed*k,ja=t(b.ChangeAmount,2),ja=0<b.ChangeAmount?1+10*ja:1-0.9*ja,ya=Array(1024),h=0;1024>h;h++)ya[h]=0;var za=0,aa=1020*t(b.PhaserOffset,2),ka=4E3*t(b.PhaserSweep,3)/k,L=1E-5<c(ka)||1E-5<c(aa),N=0.0010<b.HPFilterCutoff||0.999>b.LPFilterCutoff,u=0,T=0,ga=t(b.LPFilterCutoff,3)/10,F=1+b.HPFilterCutoffSweep/1E4,ba=5/(1+20*t(b.LPFilterResonance,2))*(0.01+b.LPFilterCutoff);
0.8<ba&&(ba=0.8);var ba=1-ba,Sa=0.999>b.LPFilterCutoff,qa=0,ca=t(b.HPFilterCutoff,2)/10,Ta=1+b.HPFilterCutoffSweep/1E4,w=0,Ma=R;0<b.RepeatSpeed&&(Ma=t(1-b.RepeatSpeed,2)*k+32);for(var v=b.MasterVolume,Ha=0,h=0;h<R;h++)G=oa(ea,S,0),S+=Ra,0>S?S=0:0.5<S&&(S=0.5),w>Ma&&(ea=0,U=b.StartFrequency*z/k,Z=1+3*t(b.Slide,3)/k,C=t(b.DeltaSlide,3)/(1E3*k),void 0!==B&&(C/=B),fa=0,Ga=b.ChangeSpeed*k,ja=1+(b.ChangeAmount|0)/12,w=0),w+=1,ea+=U,Z+=C,U*=Z,fa>Ga&&(U*=ja,Ga=R),fa+=1,U>ia?U=ia:U<wa&&(U=wa),Fa+=La,q=U*p(Fa)*
$,ea+=q,La*=pa,xa&&($+=xa,0>$?xa=$=0:1<$&&($=1,xa=0)),N&&(0.0010<c(ca)&&(ca*=Ta,1E-5>ca?ca=1E-5:0.1<ca&&(ca=0.1)),q=u,ga*=F,0>ga?ga=0:0.1<ga&&(ga=0.1),Sa?(T+=(G-u)*ga,T*=ba):(u=G,T=0),u+=T,qa+=u-q,G=qa*=1-ca),L&&(aa+=ka,0>aa&&(aa=-aa,ka=-ka),1023<aa&&(aa=1023,ka=0),ya[za]=G,G+=ya[za-(aa|0)+1024&1023],za=za+1&1023),h>J&&(P+=1,q=P<E?s[P]:{M:0,Y:0,X:R},I=q.M,Da=(q.Y-q.M)/(q.X+1),J+=q.X),G*=I,I+=Da,G*=v,1<B?(na+=G,0===(h+1)%B&&(Ea[Ha]=na/B,Ha+=1,na=0)):Ea[h]=G;b=k/100|0;z=Array(b);for(h=0;h<b;h++)z[h]=
0;return z.concat(Ea).concat(z)};this.ea=this.Ma()}).apply(Ka);var eb={};(function(){this.ya=function(b){b=Ka.za(this.Ja(b));return ma.Oa(b)};this.Ja=function(b){for(var z={},p=Ka.ea.length,t=0;t<p;t++)z[Ka.ea[t].id]=b[t];return z}}).apply(eb);(function(){var b,z,p,t;function c(e,a,b){e.addEventListener?e.addEventListener(a,b,!1):e.attachEvent?e.attachEvent("on"+a,b):e["on"+a]=b}function k(e,a,b,f,d,l){var c=ba[e].frame,k=ba[e].g;e=ba[e].frames;f=l?e[Math.floor(l*f/1E3)%e.length]:e[f];d?n.drawImage(Ua,kb-(c.x+f.x)-f.a,c.y+f.y,f.a,f.b,a+k.x,b+k.y,f.a,f.b):n.drawImage(ra,c.x+f.x,c.y+f.y,f.a,f.b,a+k.x,b+k.y,f.a,f.b)}function B(e,a,b,f,d){var c=ba[e].frame;e=ba[e].g;n.drawImage(ra,c.x,c.y,f||c.a,d||c.b,a+e.x,b+e.y,e.a,e.b)}function s(e){var a=
e.clientX-l.W.left;e=e.clientY-l.W.top;a=Math.max(0,Math.min(a,L-1));e=Math.max(0,Math.min(e,N-1));return[a,e]}function E(e,a,b,f,d,c,k){var l=e.fillStyle,h=e.textAlign,n=e.font;e.fillStyle=d;e.font=k;e.textAlign=c;for(a=a.slice();0<a.length;)e.fillText(a.shift(),b,f),f+=10;e.fillStyle=l;e.font=n;e.textAlign=h}function h(e){da.style.cursor=e?"auto":"none"}function q(e,a){if(qa)try{Na[e]=eb.ya(a)}catch(b){}}function I(e){if(qa)try{Na[e]&&(Na[e].pause(),Na[e].currentTime=0,Na[e].play())}catch(a){}}
function P(e,a){var b=document.getElementById(e);c(b,Oa,function(){V.Q({keyCode:a})});c(b,Va,function(){V.R({keyCode:a})})}function Da(e,a,b){e=document.getElementById(e);c(e,Oa,a);c(e,Va,b)}function J(e,a,b,f){var d=Object.create(vb);d.position=a;d.text=[e];d.color=b;d.time=sa+wb;d.Aa=f||!1;Pa.push(d)}function R(e,a,b,f,d){var c=Object.create(xb);c.position=e;c.d=a;c.color=b;c.time=sa+yb;c.size=f;c.speed=d;Aa.push(c)}function Ea(a){var b=a[r.Z],X,f,d,c;Wa.T=b;for(var k=O.length=0;k<a[r.n].length;k++)X=
a[r.n][k],f=Object.create(Wa),f.size=X,d=document.createElement("canvas"),d.width=Ia+X,d.height=Ia+X,c=d.getContext("2d"),c.fillStyle="#ea0",c.strokeStyle="#330",c.fillRect(0,0,Ia+X,Ia+X),c.strokeRect(0,0,Ia+X,Ia+X),c.fillStyle="#000",c.fillText(X,5,10),f.ha=d,d=b[0]+16*k,X=b[1]-X,f.position=[d,X],f.T=[d,X],O.push(f)}function G(e){e=l.m=A[e]||A[x];a.position=e[r.da].slice();a.s=0;a.t=0;a.ia=0;a.c=void 0;a.L=lb;a.u=!1;a.C=!1;a.p=!1;a.e=!1;a.j=!1;d.O=mb;d.h=0;d.D=0;d.position=e[r.U].slice();d.d=e[r.U].slice();
b=e[r.G].slice();z=[e[r.G][0]+15,e[r.G][1]+23];p=z.slice();t=1;K.position=K.d=null;l.time=0;na(v.i);Q=0;Ba.length=0;ta.length=0;Pa.length=0;Aa.length=0;ha="4444444444444444444444444444444444444444"+e[r.ca]+"4444444444444444444444444444444444444444";ha=ha.split("");Ja=null;Ea(e);Xa=ca.slice();window.localStorage&&(window.localStorage.sa=JSON.stringify(A))}function na(a){l.state=a;if(Y){var b=document.getElementsByClassName("edit");a="btn edit"+(a===v.f?"":" h");for(var d=0;d<b.length;d++)b[d].setAttribute("class",
a)}}function oa(a){na(v.k);l.time=sa+l.m[r.K];qa&&(Ya=a+Ta);h()}function S(a){l.fa+=1;h(!0);I(w.wa);Za=!0;G(x);$a=a+Ma}function Ra(a){l.ga+=1;h(!0);I(w.pa);Za=!1;G(x);$a=a+Ma}function ea(a,b){return Math.round(a[0]/u)===Math.round(b[0]/u)&&Math.round(a[1]/u)===Math.round(b[1]/u)}function U(a,b){return Math.atan((b[1]-a[1])/(b[0]-a[0]))}function Z(a,b){return a&&b&&Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function C(a,b){return ha[T*Math.floor(b/u)+Math.floor(a/u)]}function wa(a,b,d,
f,c){var k=b,l=C(a,k);d=a+d;topRight=C(d,k);bottomRight=C(d,b+f);bottomLeft=C(a,b);return l===c||topRight===c||bottomRight===c||bottomLeft===c}function ia(a,b,d,f,c){b+=f;f=C(a,b);bottomLeft=C(a+d,b);return f===c||bottomLeft===c}function Fa(){h(!0);l.state===v.f&&(A[x][r.ca]=ha.join("").substring(T,T*ga-T),A[x][r.da]=a.position.slice(),A[x][r.U]=d.position.slice(),A[x][r.G]=b.slice(),A[x][r.Z]=Wa.T.slice());G(x)}function La(){var b=a.t,d=$();if(a.e)b=a.t;else if(a.p)b=Math.min(d,b+d/25);else if(b*=
Math.min(0.2*d,0.8),0.2>b||pa(H.o))b=0;a.t=b;return pa(H.o)?d/2:b}function $(){return Math.max(1,a.speed+a.S-(void 0!==a.c?O[a.c].size:0))}function pa(b){return wa(a.position[0]-8,a.position[1]-32,16,32,b)||wa(a.position[0],a.position[1]-8,0,0,b)}function xa(a){a.preventDefault();if(l.state===v.f)fb=!fb;else if(l.state===v.k&&d.D<sa){a=s(a);var b=d.h;if((ia(d.position[0]-8,d.position[1]-8,16,16,H.w)||wa(d.position[0],d.position[1],0,0,H.w))&&d.h<zb)I(w.aa),d.h++,J("+"+(d.h-b)+"\u21a1",[d.position[0]-
4,d.position[1]-4],"#0c0");else{var c;for(c=0;c<Ba.length;c++)if(ea(a,Ba[c].position)){d.h=Math.max(d.h,Ab);J("+"+(d.h-b)+"\u21a1",[d.position[0]-4,d.position[1]-4],"#0c0");I(w.aa);Ba.splice(c,1);break}}}}function fa(){if(l.state===v.f)if(Q<Ca){var e=T*Math.floor(y[1]/u)+Math.floor(y[0]/u);e<ha.length&&(ha[e]=""+Q)}else if(Q===ua.ta)a.position=y.slice();else if(Q===ua.v)d.position=y.slice();else if(Q===ua.F)b=y.slice(),z=[b[0]+15,b[1]+23],p=z.slice();else{if(Q===ua.n)for(Wa.T=y.slice(),e=0;e<O.length;e++){var c=
O[e];c.position[0]=y[0]+16*e;c.position[1]=y[1]-c.size}}else l.state!==v.i||Y?0<d.h&&d.D<sa&&(d.h--,I(w.oa),e=Object.create(Bb),e.position=d.position.slice(),ta.push(e)):y[0]>d.position[0]-16&&(y[0]<d.position[0]+16&&y[1]>d.position[1]-16&&y[1]<d.position[1]+16)&&oa(sa)}function Ga(a){for(var b=60;0<b--;)R(d.position.slice(),[d.position[0]-Math.floor(128*Math.random()-64),d.position[1]+Math.ceil(128*Math.random()-64)],"#000",Math.ceil(3*Math.random()),Math.ceil(2*Math.random()));d.D=a+Cb;I(w.na);
d.h=0;d.O--;J("-1\u2665",[d.position[0]-4,d.position[1]-4],"#c00");0>=d.O?S(a):d.O<nb&&ja(a);gb=a+Ha}function ja(a){if(!Ja){Ja=[];for(var b=0;b<ha.length;b++)ha[b]===H.A&&Ja.push(b);I(w.ka)}b=Ja[Math.floor(Math.random()*Ja.length)]+1;b=[b%T*u,Math.floor(b/T)*u];K.d=[b[0]-6,b[1]-10];K.position?I(w.la):(K.position=K.d.slice(),J("meow...",[K.position[0],K.position[1]-4],"#ccc",!0));K.Ca=a+Db;t+=0.05}function ya(e,d){for(var c=60;0<c--;)R(a.position.slice(),[a.position[0]-Math.floor(128*Math.random()-
64),a.position[1]-16-Math.ceil(128*Math.random()-64)],"#ea0",Math.ceil(3*Math.random()),Math.ceil(4*Math.random()));J(0.5<Math.random()?"My mirrors!":"Be careful!",[b[0]+4,b[1]],"#ccc",!0);I(w.ua);a.c=void 0;e.position=e.T.slice();a.L--;J("-1\u25fc",[a.position[0]-4,a.position[1]-32],"#c00");gb=d+Ha;0>=a.L?Ra(d):a.L<nb&&ja(d)}function za(a){var b=a||A[x];a=[a?b[r.I]:"CustomLevel"+Eb++,b[r.da].slice(),b[r.U].slice(),b[r.Z].slice(),b[r.G].slice(),b[r.K],b[r.ca],b[r.n].slice(),null,!0];A.push(a);l.state===
v.i&&(x=A.length-1,G(x))}function aa(a,b,d){var c=null,k=K.position?"rgb("+Math.pow(d,2)+","+Math.floor(d/3)+","+Math.floor(d)+")":"rgb("+Math.floor(d/3)+","+Math.floor(d)+","+Math.pow(d,2)+")";a===H.A?c=F.A:a===H.J?c=F.J:a===H.Ia?k="#000":a===H.qa?k="#0f0":a===H.w?c=F.w:a===H.o?c=F.o:a===H.q&&(c=F.q);n.fillStyle=k;n.fillRect(b,d,u,u);null!==c&&B(c,b,d,u,u)}function ka(a,b){if(a.position&&a.d){var d=U(a.position,a.d),c=a.position[0]>a.d[0]?-1:1,k=Math.abs(a.position[0]-a.d[0]),l=Math.abs(a.position[1]-
a.d[1]);if(3<k||3<l){var h=Math.cos(d)*c*b,d=Math.sin(d)*c*b;Math.abs(h)>k&&(h=k*h/Math.abs(h));Math.abs(d)>l&&(d=l*d/Math.abs(d));a.position[0]+=h;a.position[1]+=d;return!0}return!1}}var L=640,N=400,u=16,T=L/u,ga=N/u,F={v:0,Ga:1,q:2,F:3,o:4,r:5,w:6,J:7,Ha:8,A:9,Ea:10,Fa:11},ba=[{frame:{x:30,y:0,a:30,b:14},g:{x:1,y:1,a:30,b:14},frames:[{x:1,y:1,a:15,b:11},{x:17,y:1,a:15,b:13}]},{frame:{x:14,y:40,a:14,b:8},g:{x:1,y:7,a:14,b:8}},{frame:{x:32,y:14,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:24,a:14,
b:24},g:{x:1,y:7,a:14,b:24}},{frame:{x:16,y:48,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:0,y:0,a:30,b:24},g:{x:1,y:3,a:30,b:24},frames:[{x:0,y:0,a:15,b:24},{x:16,y:0,a:13,b:24}]},{frame:{x:48,y:14,a:16,b:10},g:{x:0,y:10,a:16,b:10}},{frame:{x:14,y:24,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:31,y:32,a:6,b:14},g:{x:4,y:1,a:6,b:14}},{frame:{x:0,y:48,a:16,b:16},g:{x:0,y:0,a:16,b:16}},{frame:{x:36,y:32,a:11,b:13},g:{x:0,y:0,a:12,b:13}},{frame:{x:49,y:30,a:15,b:16},g:{x:0,y:0,a:15,b:16}}],Sa=[523.25,
587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],qa=!(!window.btoa||!window.atob),ca="023123467".split(""),Ta=200,w={ra:0,ua:1,oa:2,na:3,$:4,ma:5,wa:6,pa:7,ja:8,aa:9,q:10,ka:11,la:12,va:13},Ma=2E3,v={i:0,k:1,f:2},Ha=500,wb=1500,yb=1500,H={EMPTY:"0",A:"1",o:"2",J:"3",Ia:"4",qa:"5",w:"6",q:"7"},Ca=8,ua={ta:Ca+0,v:Ca+1,F:Ca+2,n:Ca+3},hb=Ca+4,zb=3,Ab=5,Cb=5E3,mb=10,nb=4,Db=2E3,lb=10,Ia=12,ob=[1,-6],r={I:0,da:1,U:2,Z:3,G:4,K:5,ca:6,n:7,H:8,V:9},da=document.getElementById("C"),n=da.getContext("2d"),
ra=new Image,Ua=document.createElement("canvas"),kb=0,ab=document.createElement("canvas"),M=ab.getContext("2d"),Na=[],pb={},Xa=null,Ya=0,y=[0,0],bb=!1,W=!1,V={P:{},R:function(a){V.P[a.keyCode]=void 0},Q:function(a){V.P[a.keyCode]=sa}},Y=!1,Qa=document.getElementById("o"),la=Qa.getBoundingClientRect(),qb=[100,100],ib=!1,va=null,Oa=null,Va=null,rb=null,sa=0,l={state:v.i,W:da.getBoundingClientRect(),time:0,fa:0,ga:0,m:null},gb=0,$a=0,Za=void 0,vb={position:null,text:void 0,color:"#0f0",time:0,Aa:!1},
Pa=[],ha=[],Ja=null,fb=!1,Q=0,a={position:null,speed:4,t:0,S:0,ia:0,Ba:2,Na:-6.8,B:!1,C:!1,e:!1,p:!1,u:!1,l:0,c:void 0,s:0,L:lb,Ta:!1},d={position:null,d:null,h:0,D:0,O:mb};p=z=b=null;t=1;var K={position:null,d:null,Ca:0},Wa={ha:null,size:1,position:null,T:null},O=[],Fb={position:null},Ba=[],Bb={position:null,speed:6},ta=[],xb={position:null,d:null,color:"#000",size:2,time:0,speed:2},Aa=[],sb=[["Tutorial",[33,370],[L-24,55],[300,365],[20,70],3E6,"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000550000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
[1],[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,[(Y?"I":"SPACEBAR")+": grab/release crate"]],[500,340,["UP/DOWN: Climb"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(Y?"I":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(Y?"analogPad":"Mouse")+": move"]],[390,80,["Hide from granny in nest"]],[390,130,[(Y?"A":"RClick")+": eat from nest or crumbs",(Y?"S":"LClick")+": shoot!"]],
[150,70,["Don't touch roofs or Luke"]]]],["Level 1",[25,366],[616,24],[41,364],[513,180],6E4,"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000111000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300033000000000000000000000000000000000000000000000000000000000000000000000000550000020000000000000200000000000000000055020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000700001111111111111111111111111111111111111111",
[1,2]],["Level 2",[28,143],[600,296],[588,365],[51,50],12E4,"33330000000000000000000000000000000000000000000000000033000000000330000000000000055000000000000000000000000000000000000005500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000600000000000000112110000002020000060000111000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
[1,2]],["Level 3",[17,349],[281,39],[88,317],[49,163],24E4,"00000000000000010001000000000000000000000000000000300001666100003000000000000020000000000003000111110003000000000007002000000000000030000000003000000000001110203000000000000000000000000000000000000020332200000000000000000000000000000000002033202000000000000000000000000000000000203320320000000000222000000000000000000020332033111001111100011111000110011001102055200000000000000000000000000110011000205520000000000000000000000000000000000020111100000000000000000000000000000000002000000000000000030003000000000220022000200000000000000030000030000200000000000020000000000000000300030000020000000000002000003030300000000200000002011001100110200003030303030303020000000200011001100020000000000030303032111111000000000000000000000000000000000203030303030000000000000000011100070000023030303030300000000000000000000011100002000000000000000000000011110000000000000200000000000000000000001111111111111111111111111111111111111111",
[1,2,3]],["Level 4",[75,370],[L-24,24],[83,365],[80,53],3E5,"33333300000000000000000000000000000000600000000000000000000000000000000000000011055000000000000000000000003333000000000005500000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000000000000000100000000000000000000000000700000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330112100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010101010111000020200000000211111111111111000000033311001111011100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000000000000303030200000000000000000000000000007000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
[2,3,4]]],A=window.localStorage&&window.localStorage.sa&&JSON.parse(window.localStorage.sa)||sb,Eb=A.length-sb.length+1,x=0;(function(){for(var a=0,b=["webkit","moz"],d=0;d<b.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[b[d]+"RequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var d=(new Date).getTime(),c=Math.max(0,16-(d-a)),k=window.setTimeout(function(){b(d+c)},c);a=d+c;return k})})();if("ontouchstart"in document.documentElement||
window.navigator.msMaxTouchPoints)for(var Y=!0,Oa=window.navigator.msMaxTouchPoints?"MSPointerDown":"touchstart",Va=window.navigator.msMaxTouchPoints?"MSPointerUp":"touchend",rb=window.navigator.msMaxTouchPoints?"MSPointerMove":"touchmove",jb=document.getElementsByClassName("btn"),cb=0;cb<jb.length;cb++)-1===jb[cb].getAttribute("class").indexOf("edit")&&jb[cb].setAttribute("class","btn");ra.onload=function(){Ua.width=kb=ra.naturalWidth;Ua.height=ra.naturalHeight;var a=Ua.getContext("2d");a.translate(ra.naturalWidth,
0);a.scale(-1,1);a.drawImage(ra,0,0)};ra.src="imgmap.png";ab.width=L;ab.height=N;for(var db=0;db<Sa.length;db++)pb[db]=eb.ya(["synth",0,0.1,0,0.208,0,0.12,20,Sa[db],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);Xa=ca.slice();q(w.ra,["square",0,0.3,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);q(w.ua,["noise",0,0.3,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);q(w.ma,["square",0,0.3,0,0.098,0.504,0.282,20,1582,2400,
0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);q(w.ja,["saw",0,0.3,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);q(w.oa,["saw",0,0.3,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);q(w.pa,["synth",0,0.3,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);q(w.wa,["synth",0,0.3,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);q(w.$,["noise",0,0.3,
0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);q(w.na,["noise",0,0.3,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);q(w.aa,["square",0,0.3,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);q(w.q,["square",0,0.3,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);q(w.ka,["synth",0,0.3,0,0.44,0.579,1.004,20,1793,2400,-0.202,0,0,8.6962,0.5346,
0.666,-0.298,0.671,0,0,0,0,0,1,0,0,0,0]);q(w.la,["noise",0,0.127,0.043,0.124,0,0.282,20,2400,20,1,-1,0,0.01,-0.3,-1,0.956,0.272,0,0.68,0,-0.998,-1,1,1,0,0,-0.998]);q(w.va,["noise",0,0.126,0,0.07,0,0.232,2400,2400,2400,-1,-1,0,0.01,-0.3,-1,-1,0,0,-1,0,0.0040,0,1,1,0,0,-1]);window.addEventListener("keyup",V.R,!1);window.addEventListener("keydown",V.Q,!1);if(Y){c(da,Oa,function(){l.state===v.i&&oa()});Da("s",function(){l.state===v.i?V.Q({keyCode:68}):fa()},function(){V.R({keyCode:68})});Da("a",function(a){l.state===
v.i?V.Q({keyCode:74}):xa(a)},function(){V.R({keyCode:74})});Da("i",function(){V.Q({keyCode:l.state===v.i?73:32})},function(){V.R({keyCode:l.state===v.i?73:32})});P("x",27);P("e",69);P("l",37);P("u",38);P("r",39);P("d",40);P("c",67);P("t",84);P("n",78);var tb=function(a){a.preventDefault();va=a.changedTouches||a;la=Qa.getBoundingClientRect();ib=!0};c(Qa,Oa,tb);c(Qa,rb,tb);c(Qa,Va,function(a){a.preventDefault();ib=!1});c(document.body,"contextmenu",function(a){a.preventDefault()})}else c(da,"click",
fa),c(da,"contextmenu",xa),c(da,"mousedown",function(a){1===a.which&&(bb=!0);l.state===v.f&&bb&&fa()}),c(da,"mouseup",function(a){1===a.which&&(bb=!1)}),c(da,"mousemove",function(a){var b=s(a);y=[b[0],b[1]];l.state===v.k?(a=s(a),d.d=a.slice()):l.state===v.f&&bb&&fa()});G(x);(function ub(c){if(!($a>c)){var f=V.P;if(l.state===v.i)if(f[37]&&!W)x=(x+A.length-1)%A.length,G(x);else if(f[39]&&!W)x=(x+1)%A.length,G(x);else if(f[69]&&!W)A[x][r.V]||za(),na(v.f),f[69]=void 0;else if(f[68]&&!W)A[x][r.V]&&(A.splice(x,
1),x--,G(x)),f[68]=void 0;else if(f[74]&&A[x][r.V]&&!W){var h=prompt("JSON",JSON.stringify(A[x]));f[74]=void 0}else{if(f[73]){if(h=prompt("JSON"))try{za(JSON.parse(h))}catch(s){alert("Error")}f[73]=void 0}}else{if(l.state===v.f){var q=c;if(f[37]&&!W)Q=(Q+hb-1)%hb;else if(f[39]&&!W)Q=(Q+1)%hb;else if(f[67]&&!W){try{if(h=JSON.parse(prompt("Crates",JSON.stringify(A[x][r.n]))),h instanceof Array){for(q=0;q<h.length;q++)"number"===!typeof q&&alert("Error"),h[q]=Math.max(1,Math.min(5,h[q]));A[x][r.n]=h;
Ea(A[x])}}catch(P){alert("Error")}f[67]=void 0}else f[78]&&!W?((h=prompt("Name",A[x][r.I]))&&(A[x][r.I]=h),f[78]=!1):f[84]&&!W?(q=+prompt("Time",A[x][r.K]),!isNaN(q)&&0<q&&(A[x][r.K]=q),f[84]=!1):f[69]&&!W&&(Fa(),f[69]=void 0)}else if(l.state===v.k){f[38]?pa(H.o)?(a.position[1]=Math.min(N-u,a.position[1]-a.Ba),a.B=!0):a.C||a.e||(a.l=a.Na,a.C=!0,a.e=!0,a.B=!1,I(w.ra)):!f[38]&&a.C?(a.C=!1,a.B=!1):f[40]&&pa(H.o)?(a.position[1]=Math.min(N,a.position[1]+a.Ba),a.B=!0):a.B=!1;f[37]&&!a.e?(a.p=!0,a.j=!0):
f[39]&&!a.e?(a.p=!0,a.j=!1):a.p=!1;if(a.p||0<a.t)a.position[0]=Math.min(L-u,Math.max(u,a.position[0]+(a.j?-1:1)*La()));if(!f[32]||a.C||a.e||a.u)f[69]&&!a.u?(a.u=!0,0<a.s&&(a.s--,a.S=3,a.ia=c+5E3,h=Object.create(Fb),h.position=[a.position[0]+4,a.position[1]-7],Ba.push(h),I(w.ja))):f[32]||(f[69]||!a.u)||(a.u=!1);else a:if(a.u=!0,h=a.c,q=void 0!==h?O[h]:void 0,void 0===q){for(h=0;h<O.length;h++)if(ea(a.position,O[h].position)){a.c=h;I(w.$);break a}pa(H.q)&&3>a.s&&(J("+"+(3-a.s)+"\u00a7",[a.position[0]-
4,a.position[1]-32],"#0c0"),a.s=3,I(w.q))}else a.c=void 0,I(w.$),pa(H.qa)&&void 0!==q&&(O.splice(h,1),J(0.5<Math.random()?"Thank you!":"Good boy!",[b[0]+4,b[1]],"#ccc",!0),0>=O.length?S(c):I(w.ma))}f[27]&&Fa()}W=!1;for(var C in V.P)W=W||!!V.P[C];if(ib&&va){var D;if(va.clientX)D=va;else if(va instanceof TouchList)for(C=0;C<va.length;C++)if(f=va[C],f.clientX>=la.left&&f.clientX<la.left+la.width&&f.clientY>=la.top&&f.clientY<la.top+la.height){D=va[C];break}if(D){D=[D.clientX-la.left,D.clientY-la.top];
f=U(qb,D);C=Z(qb,D)/12.5;var m;l.state===v.k?m=d.d:l.state===v.f&&(m=y);m&&(m[0]+=(l.state===v.f?Math.round(Math.cos(f)):Math.cos(f))*(100>D[0]?-C:C),m[1]+=(l.state===v.f?Math.round(Math.sin(f)):Math.sin(f))*(100>D[0]?-C:C),m[0]=Math.max(0,Math.min(m[0],L-1)),m[1]=Math.max(0,Math.min(m[1],N-1)));fb&&fa()}}}sa=c;l.W=da.getBoundingClientRect();try{Ya<c&&l.state===v.k&&0<Xa.length&&(pb[Xa.shift()].play(),Ya+=Ta)}catch(ba){}if(l.state===v.k){D=2;var g;m=0;if(!a.e&&ia(a.position[0]-4,a.position[1],8,0,
H.A))g=a.position[1]-a.position[1]%u;else for(;D<=a.l;){if(ia(a.position[0]-4,a.position[1]+D,8,0,H.A)){g=a.position[1]+D-(a.position[1]+D)%u;break}D+=u}if(g){a.position[1]=g;a.e&&(a.t/=2,g=void 0!==a.c&&O[a.c])&&(D=13-g.size,m=g.size,a.l>D&&ya(g,c));a.e=!1;if(a.l>10-2*m){for(g=3*a.l;0<g--;)R(a.position.slice(),[a.position[0]-Math.floor(64*Math.random()-32),a.position[1]+Math.ceil(10*Math.random()-5)],"#dda",Math.ceil(2*Math.random()),Math.ceil(5*Math.random()));I(w.va)}a.l=0}else ia(a.position[0]-
4,a.position[1]-32,8,16,H.o)?(a.e=!1,a.l=0):(a.l+=0.6,a.e=!0,a.position[1]+=a.l);a.ia<c&&0<a.S&&(a.S=0);void 0!==a.c&&(O[a.c].position[0]=a.position[0]+ob[0],O[a.c].position[1]=a.position[1]+ob[1]);g=ia(d.position[0],d.position[1],0,0,H.w)?z:d.position;m=U(p,g);D=p[0]>g[0]?-1:1;if(3<Math.abs(g[0]-p[0])||3<Math.abs(g[1]-p[1]))p[0]+=Math.cos(m)*D*t,p[1]+=Math.sin(m)*D*t;if(ka(d,16))for(g=3;0<g--;)R(d.position.slice(),[d.d[0],d.d[1]],"#000",Math.ceil(2*Math.random()),Math.ceil(3*Math.random()));for(g=
0;g<ta.length;g++)if(m=ta[g],m.position[1]+=m.speed,ea(a.position,m.position)&&void 0!==a.c)ya(O[a.c],c),ta.splice(g,1),g--;else if(m.position[1]>N||ia(m.position[0],m.position[1],0,0,H.J))ta.splice(g,1),g--;(7*$()+25>=Z(d.position,a.position)||wa(d.position[0],d.position[1],0,0,H.J)||3>Z(p,d.position))&&d.D<c&&Ga(c);K.position&&(void 0!==a.c&&15>Z(a.position,K.position)&&ya(O[a.c],c),15>Z(d.position,K.position)&&Ga(c),K.Ca<c&&ja(c),ka(K,16));for(m=0;m<Aa.length;m++)if(g=Aa[m],!ka(g,g.speed)||g.time<
c)Aa.splice(m,1),m--;l.time<c&&Ra(c)}l.W=da.getBoundingClientRect();n.fillStyle="#000";n.fillRect(0,0,L,N);f=D=0;gb>c&&(D=Math.floor(8*Math.random()-4),f=Math.floor(8*Math.random()-4));for(g=0;g<T;g++)for(m=0;m<ga;m++)aa(ha[T*m+g],g*u+D,m*u+f);for(m=0;m<O.length;m++)m!==a.c&&(g=O[m],n.drawImage(g.ha,g.position[0]-8,g.position[1]-8));for(m=0;m<Ba.length;m++)g=Ba[m],B(F.Ga,g.position[0]-8,g.position[1]-8);for(m=0;m<ta.length;m++)g=ta[m],B(F.Ha,g.position[0]-8,g.position[1]-8);B(F.F,b[0],b[1]);if(l.m[r.H])for(g=
0;g<l.m[r.H].length;g++)E(n,l.m[r.H][g][2],l.m[r.H][g][0],l.m[r.H][g][1],"#000");K.position&&B(5<Z(K.position,K.d)?F.Fa:F.Ea,K.position[0]-8,K.position[1]);l.state===v.k?(a.e?k(F.r,a.position[0]-8,a.position[1]-24,0,a.j):a.p||a.B?k(F.r,a.position[0]-8,a.position[1]-24,10,a.j,c):k(F.r,a.position[0]-8,a.position[1]-24,1,a.j),a.S&&(a.e||a.p)&&(n.globalAlpha=0.6,k(F.r,a.position[0]+(a.j?-4:-12),a.position[1]-24,10,a.j,c),n.globalAlpha=0.3,k(F.r,a.position[0]+(a.j?2:-18),a.position[1]-24,10,a.j,c),n.globalAlpha=
1)):k(F.r,a.position[0]-8,a.position[1]-24,1);void 0!==a.c&&(g=O[a.c],n.drawImage(g.ha,a.j?g.position[0]+2:g.position[0]-15-g.size,g.position[1]-10));7*$()+75>=Z(d.position,a.position)&&(n.beginPath(),n.arc(a.position[0],a.position[1],7*$()+25,0,360),n.lineWidth=2,n.strokeStyle="#f00",n.stroke());l.state===v.k?d.D>c&&0===Math.floor(c/100)%2||k(F.v,d.position[0]-8,d.position[1]-8,2,!1,c):k(F.v,d.position[0]-8,d.position[1]-8,0);n.fillStyle="#f00";n.fillRect(p[0]-1,p[1]-1,2,2);n.beginPath();n.arc(p[0],
p[1],5,0,360);n.lineWidth=2;n.strokeStyle="#f00";n.stroke();n.fillStyle="#fff";l.state===v.k?(m=Math.max(0,Math.ceil((l.time-c)/1E3)),g=m%60,m=Math.floor(m/60),10>g&&(g="0"+g),n.fillText("\u00a7 "+a.s+"   \u25fc "+a.L+"   \u2699 "+m+":"+g,50,396),n.fillText("\u21a1 "+d.h+"   \u2665 "+d.O,540,12),n.fillStyle="#00deff",n.fillText("LUKE",10,396),n.fillStyle="#f00",n.fillText("CROW",600,12)):l.state===v.f&&n.fillText("< > CHANGE BLOCK   C: CRATES   T: TIME ("+A[x][r.K]+")   N: NAME ("+A[x][r.I]+")"+(Y?
"   S: PAINT   A: TOGGLE PAINT   analogPad: MOVE":""),12,12);for(m=0;m<Aa.length;m++)g=Aa[m],n.fillStyle=g.color,n.fillRect(g.position[0],g.position[1],g.size,g.size);for(m=0;m<Pa.length;m++)g=Pa[m],g.time<c?(Pa.splice(m,1),m--):(E(n,g.text,g.position[0]+1,g.position[1]+1,"#000","center","14px sans-serif"),E(n,g.text,g.position[0],g.position[1],g.color,"center","14px sans-serif"),g.Aa||(g.position[1]-=0.5));l.state===v.i&&(g=l.m,M.fillStyle="rgba(0,0,0,0.7)",M.clearRect(0,0,L,N),M.fillRect(0,0,L,
N),M.fillStyle="#fff",M.textAlign="center",M.font="20px courier",M.fillText(l.m[r.I],L/2,N/2-50),E(M,["Luke "+l.fa],L/2-50,N/2,!0===Za?"#0f0":"#fff","right"),E(M,[l.ga+" Crow"],L/2+50,N/2,!1===Za?"#0f0":"#fff","left"),M.font="15px courier",M.fillText("A 13kB game by Alberto Congiu",L/2,12),$a<c&&(M.fillText("Click the "+(Y?"screen":"crow")+" to start",L/2,N/2+60),M.fillText("< >: Select level",L/2,N/2+100),M.fillText(g[r.V]?"E: EDIT   "+(Y?"S":"D")+": DELETE   "+(Y?"A":"J")+": EXPORT   I: IMPORT":
"E: EDIT   I: IMPORT",L/2,N/2+120)),M.beginPath(),M.arc(d.position[0],d.position[1],16,0,360),M.lineWidth=2,M.strokeStyle="#fff",M.stroke(),n.drawImage(ab,0,0));l.state===v.f&&(n.globalAlpha=0.6,Q<Ca?(aa(""+Q,y[0]-y[0]%u,y[1]-y[1]%u),n.strokeStyle="#000",n.strokeRect(y[0]-y[0]%u,y[1]-y[1]%u,u,u)):Q===ua.ta?k(F.r,y[0]-8,y[1]-24,1):Q===ua.v?k(F.v,y[0]-8,y[1]-8,0):Q===ua.F?B(F.F,y[0],y[1]):Q===ua.n&&(n.fillStyle="#ea0",n.strokeStyle="#330",n.fillRect(y[0]-8,y[1]-8,16,16),n.strokeRect(y[0]-8,y[1]-8,16,
16),n.fillStyle="#000",n.fillText("C",y[0]-4,y[1]+4)),n.globalAlpha=1);window.requestAnimationFrame(ub)})()})();

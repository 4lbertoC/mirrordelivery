var ja={};
(function(a){function c(a,f){return f?N(a&255)+c(a>>8,f-1):""}var A=this.pa=a||44100,n=2*A,N=String.fromCharCode,e;this.Ca=function(a){var d=Audio,w=btoa,B="",V=a.length;for(f=0;f<V;f++)var y=32767*a[f]|0,y=-32768>y?-32768:32767<y?32767:y,y=y+(0>y?65536:0),B=B+String.fromCharCode(y&255,y>>8);a=B;a=["RIFF",36+(e=a.length),"WAVEfmt ",16,1,1,A,n,2,16,"data",e,a];B="";for(f=0;f<a.length;f++)B+="s"=="s4s4224422s4s"[f]?a[f]:c(a[f],"s4s4224422s4s".charCodeAt(f)-48);return new d("data:audio/wav;base64,"+w(B))};
var E,f,x=Math.sin,d=2*Math.PI;this.filter=function(a,c,d,e,n,y,N,A,x,H){d=d?d:1;e=e?e:a.length;E=a.slice(0);for(f=d;f<e;f++)E[f]=c(a,E,d,e,f,n,y,N,A,x,H);return E};this.filters={Ja:function(a,c,f,d,e,n){return c[e-1]+n*(a[e]-c[e-1])},Ka:function(a,c,f,d,e,n){return c[e-1]+n*(d-e)/(d-f)*(a[e]-c[e-1])},Ia:function(a,c,d,f,e,n){return n*(c[e-1]+a[e]-a[e-1])}};this.sa=function(a,c,e,n,N,y,x,E,G){c=c*d/A;var H=Array(a|0);for(f=0;f<a;f++)H[f]=e(f*c,n,N,y,x,E,G);return H};var G=0;this.I={Da:function(a){4>
a%d&&(G=2*Math.random()-1);return G},La:Math.random,Fa:Math.sin,Ga:function(a){return x(a)+0.5*x(a/2)+0.3*x(a/4)},Ea:function(a){return 2*(a/d-(a/d+0.5|0))},ta:function(a,c){return x(a)>c?1:x(a)<c?-1:c}}}).apply(ja);var Da={};
(function(){this.W=[];this.V={square:ja.I.ta,saw:ja.I.Ea,sine:ja.I.Fa,noise:ja.I.Da,synth:ja.I.Ga};this.ya=function(){var a=[],c;for(c in this.V)a.push(c);return a};this.za=function(){function a(a,e,n,f,x){void 0===x&&(x=(n-e)/1E3);a={name:a,id:a.replace(/ /g,""),min:e,max:n,step:x,xa:f,type:"range",group:A};c.push(a)}var c=[],A=0,n=this.ya();(function(a,e,n){a={name:a,id:a.replace(/ /g,""),options:e,xa:n,type:"option",group:A};c.push(a)})("Generator",n,n[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);A++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);A++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);A++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);A++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);A++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);A++;a("RepeatSpeed",
0,0.8,0);A++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);A++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return c};this.sa=function(a){var c=2*Math.PI,A=Math.sin,n=Math.pow,N=Math.abs,e=ja.pa,E=a.SuperSamplingQuality|0;1>E&&(E=1);for(var e=e*E,f=[{H:0,S:1,time:a.AttackTime},{H:1+a.SustainPunch,S:1,time:a.SustainTime},{H:1,S:0,time:a.DecayTime}],x=f.length,d=0;d<x;d++)f[d].P=1+(f[d].time*e|0);
for(var G=void 0,W=0,oa=-1,w=0,B=-1,V=0,d=0;d<x;d++)V+=f[d].P;V<e/2&&(V=e/2);var y=Array(V/E|0),R=0,pa=0,qa=Da.V[a.Generator];void 0===qa&&(qa=this.V.ta);var H=0,H=a.SquareDuty,O=a.SquareDutySweep/e,Y=0,u=a.StartFrequency*c/e,ka=1+64*n(a.Slide,3)/e,ea=n(a.DeltaSlide,3)/(1E3*e);void 0!==E&&(ea/=E);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var ra=a.MinFrequency*c/e,wa=a.MaxFrequency*c/e,xa=0,ya=a.VibratoFrequency*
c/e,Z=a.VibratoDepth,sa=1+3*n(a.VibratoFrequencySlide,3)/e,da=a.VibratoDepthSlide/e,fa=0,za=a.ChangeSpeed*e,ga=n(a.ChangeAmount,2),ga=0<a.ChangeAmount?1+10*ga:1-0.9*ga,Aa=Array(1024),d=0;1024>d;d++)Aa[d]=0;var ta=0,J=1020*n(a.PhaserOffset,2),ha=4E3*n(a.PhaserSweep,3)/e,Ba=1E-5<N(ha)||1E-5<N(J),U=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,p=0,$=0,q=n(a.LPFilterCutoff,3)/10,s=1+a.HPFilterCutoffSweep/1E4,aa=5/(1+20*n(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<aa&&(aa=0.8);var aa=1-aa,Ea=
0.999>a.LPFilterCutoff,Ca=0,ba=n(a.HPFilterCutoff,2)/10,K=1+a.HPFilterCutoffSweep/1E4,L=0,P=V;0<a.RepeatSpeed&&(P=n(1-a.RepeatSpeed,2)*e+32);for(var r=a.MasterVolume,S=0,d=0;d<V;d++)R=qa(Y,H,0),H+=O,0>H?H=0:0.5<H&&(H=0.5),L>P&&(Y=0,u=a.StartFrequency*c/e,ka=1+3*n(a.Slide,3)/e,ea=n(a.DeltaSlide,3)/(1E3*e),void 0!==E&&(ea/=E),fa=0,za=a.ChangeSpeed*e,ga=1+(a.ChangeAmount|0)/12,L=0),L+=1,Y+=u,ka+=ea,u*=ka,fa>za&&(u*=ga,za=V),fa+=1,u>wa?u=wa:u<ra&&(u=ra),xa+=ya,G=u*A(xa)*Z,Y+=G,ya*=sa,da&&(Z+=da,0>Z?da=
Z=0:1<Z&&(Z=1,da=0)),U&&(0.0010<N(ba)&&(ba*=K,1E-5>ba?ba=1E-5:0.1<ba&&(ba=0.1)),G=p,q*=s,0>q?q=0:0.1<q&&(q=0.1),Ea?($+=(R-p)*q,$*=aa):(p=R,$=0),p+=$,Ca+=p-G,R=Ca*=1-ba),Ba&&(J+=ha,0>J&&(J=-J,ha=-ha),1023<J&&(J=1023,ha=0),Aa[ta]=R,R+=Aa[ta-(J|0)+1024&1023],ta=ta+1&1023),d>B&&(oa+=1,G=oa<x?f[oa]:{H:0,S:0,P:V},W=G.H,w=(G.S-G.H)/(G.P+1),B+=G.P),R*=W,W+=w,R*=r,1<E?(pa+=R,0===(d+1)%E&&(y[S]=pa/E,S+=1,pa=0)):y[d]=R;a=e/100|0;c=Array(a);for(d=0;d<a;d++)c[d]=0;return c.concat(y).concat(c)};this.W=this.za()}).apply(Da);var Na={};(function(){this.ra=function(a){a=Da.sa(this.wa(a));return ja.Ca(a)};this.wa=function(a){for(var c={},A=Da.W.length,n=0;n<A;n++)c[Da.W[n].id]=a[n];return c}}).apply(Na);(function(){function a(b){b.preventDefault();Fa=b.changedTouches;ia=Ga.getBoundingClientRect();Oa=!0}var c,A,n,N,e,E,f,x,d;function G(b,a,c,e,l){var d=D[b].frame;b=D[b].h;p.drawImage(la,d.x,d.y,e||d.b,l||d.c,a+b.x,c+b.y,b.b,b.c)}function W(b,a,c,d,l,e){var f=D[b].frame,k=D[b].h;b=D[b].frames;d=e?b[Math.floor(e*d/1E3)%b.length]:b[d];l?p.drawImage(Ja,Ta-(f.x+d.x)-d.b,f.y+d.y,d.b,d.c,a+k.x,c+k.y,d.b,d.c):p.drawImage(la,f.x+d.x,f.y+d.y,d.b,d.c,a+k.x,c+k.y,d.b,d.c)}function oa(){if(Pa)try{k.state===t.j&&
0<Qa.length&&(Ua[Qa.shift()].play(),setTimeout(oa,200))}catch(b){}}function w(b,a){if(Pa)try{Ha[b]=Na.ra(a)}catch(c){}}function B(b){if(Pa)try{Ha[b]&&(Ha[b].pause(),Ha[b].currentTime=0,Ha[b].play())}catch(a){}}function V(b){var a=b.r,c,d,l,e;Ia.F=a;for(var f=T.length=0;f<b.e.length;f++)c=b.e[f],d=Object.create(Ia),d.size=c,l=document.createElement("canvas"),l.width=Ka+c,l.height=Ka+c,e=l.getContext("2d"),e.fillStyle="yellow",e.fillRect(0,0,Ka+c,Ka+c),e.fillStyle="black",e.fillText(c,5,10),d.Z=l,l=
a[0]+16*f,c=a[1]-c,d.position=[l,c],d.F=[l,c],T.push(d)}function y(a){a=k.o=v[a]||v[q];ra(t.i);b.position=a.u.slice();c=a.t.slice();b.G=0;b.R=0;b.d=void 0;b.e=Va;b.s=!1;b.D=!1;b.a=!1;b.l=!1;b.C=!1;A=Wa;N=n=0;k.time=0;ra(t.i);K=0;a.g?(f=a.g.slice(),x=[a.g[0]+15,a.g[1]+23],d=x.slice()):x=f=null;ca="4444444444444444444444444444444444444444"+a.map+"4444444444444444444444444444444444444444";ca=ca.split("");V(a);ua.length=0;ma.length=0;La.width=L;La.height=P;var F=La.getContext("2d");F.fillStyle="rgba(0,0,0,0.7)";
F.fillRect(0,0,L,P);F.fillStyle="#fff";F.font="20px courier";F.textAlign="center";F.fillText(k.o.name,L/2,P/2-50);F.fillText("Delivery Boy "+k.X+" - "+k.Y+" Crow",L/2,P/2);F.font="15px courier";F.fillText("Click the crow to start!",L/2,P/2+60);F.fillText("< >: Select level",L/2,P/2+100);F.fillText(a.O?"E: edit   "+(J?"1":"D")+": delete   "+(J?"2":"J")+": insert/copy JSON"+(ba?"   S: share":""):"E: edit",L/2,P/2+120);F.beginPath();F.arc(c[0],c[1],16,0,360);F.lineWidth=1;F.strokeStyle="#fff";F.stroke();
Qa=Xa.slice();window.localStorage&&(window.localStorage.ia=JSON.stringify(v))}function R(){k.X+=1;U.style.cursor="auto";B(C.oa);y(q)}function pa(){k.Y+=1;U.style.cursor="auto";B(C.ea);y(q)}function qa(b){var a=b.clientX-k.M.left;b=b.clientY-k.M.top;a=Math.max(0,Math.min(a,L-1));b=Math.max(0,Math.min(b,P-1));return[a,b]}function H(){return Math.max(1,b.speed+b.Q-(void 0!==b.d?T[b.d].size:0))}function O(b,a,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+a,c):b["on"+
a]=c}function Y(){if(k.state===t.f)if(K<va){var a=Math.floor(s[1]/r);0<a&&a<Ra-1&&(ca[S*a+Math.floor(s[0]/r)]=""+K)}else if(K===na.ja)b.position[0]=s[0],b.position[1]=s[1];else if(K===na.p)c[0]=s[0],c[1]=s[1];else if(K===na.w&&f)f[0]=s[0],f[1]=s[1],x=[f[0]+15,f[1]+23],d=x.slice();else{if(K===na.aa)for(Ia.F[0]=s[0],Ia.F[1]=s[1],a=0;a<T.length;a++){var F=T[a];F.position[0]=s[0]+16*a;F.position[1]=s[1]-F.size}}else k.state===t.i?s[0]>c[0]-16&&(s[0]<c[0]+16&&s[1]>c[1]-16&&s[1]<c[1]+16)&&(ra(t.j),k.time=
$+k.o.k,oa(),U.style.cursor="none"):0<n&&N<$&&(n--,B(C.ca),a=Object.create(ab),a.position=c.slice(),ma.push(a))}function u(b,a){var c=document.getElementById(b);O(c,"touchstart",function(){X.K({keyCode:a})});O(c,"touchend",function(){X.L({keyCode:a})})}function ka(b,a,c){b=document.getElementById(b);O(b,"touchstart",a);O(b,"touchend",c)}function ea(b){b.preventDefault();if(k.state===t.f)Ea=!Ea;else if(k.state===t.j&&N<$)if(b=qa(b),(sa(c[0]-8,c[1]-8,16,16,M.q)||Z(c[0],c[1],0,0,M.q))&&n<bb)B(C.U),n++;
else{var a;for(a=0;a<ua.length;a++)if(wa(b,ua[a].position)){n=Math.max(n,cb);B(C.U);ua.splice(a,1);break}}}function ra(b){k.state=b;if(J)if(b===t.f){b=document.getElementsByClassName("edit");for(var a=0;a<b.length;a++)b[a].setAttribute("class","btn edit")}else for(b=document.getElementsByClassName("edit"),a=0;a<b.length;a++)b[a].setAttribute("class","btn h edit")}function wa(b,a){return Math.round(b[0]/r)===Math.round(a[0]/r)&&Math.round(b[1]/r)===Math.round(a[1]/r)}function xa(){var a=b.N,c=H();
b.a||(a=0);a=Math.min(c,a+c/5);b.N=a;return da(M.n)?c/3:a}function ya(){U.style.cursor="auto";k.state===t.f&&(v[q].map=ca.join("").substring(S,S*Ra-S),v[q].u=b.position.slice(),v[q].t=c.slice(),f instanceof Array&&(v[q].g=f.slice()),v[q].r=Ia.F.slice());y(q)}function Z(b,a,c,d,e){var f=a,k=ca[S*Math.floor(f/r)+Math.floor(b/r)];c=b+c;topRight=ca[S*Math.floor(f/r)+Math.floor(c/r)];bottomRight=ca[S*Math.floor((a+d)/r)+Math.floor(c/r)];bottomLeft=ca[S*Math.floor(a/r)+Math.floor(b/r)];return k===e||topRight===
e||bottomRight===e||bottomLeft===e}function sa(b,a,c,d,e){a+=d;d=ca[S*Math.floor(a/r)+Math.floor(b/r)];bottomLeft=ca[S*Math.floor(a/r)+Math.floor((b+c)/r)];return d===e||bottomLeft===e}function da(a){return Z(b.position[0]-16,b.position[1]-32,16,32,a)||Z(b.position[0]-8,b.position[1]-8,0,0,a)}function fa(b,a){return Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2)}function za(){return void 0!==b.d?T[b.d]:void 0}function ga(b,a){return Math.atan((a[1]-b[1])/(a[0]-b[0]))}function Aa(){var a=za();a&&(B(C.ka),
b.d=void 0,a.position=a.F.slice(),b.e--,0>=b.e&&pa())}function ta(a,b,c){var d=null,e="#00deff";a===M.ma?d=z.qa:a===M.B?d=z.B:a===M.va?e="#000":a===M.fa?e="#0f0":a===M.q?d=z.q:a===M.n?d=z.n:a===M.m&&(d=z.m);p.fillStyle=e;p.fillRect(b,c,r,r);null!==d&&G(d,b,c,r,r)}(function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];
window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);a=c+d;return e});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();var J=!1;if("ontouchstart"in document.documentElement)for(var J=!0,ha=document.getElementsByClassName("btn"),Ba=0;Ba<ha.length;Ba++)-1===ha[Ba].getAttribute("class").indexOf("edit")&&ha[Ba].setAttribute("class","btn");var U=document.getElementById("C"),
p=U.getContext("2d"),$=0,q=0,s=[0,0],aa=!1,Ea=!1,Ca=1,ba=!1,K=0,L=640,P=400,r=16,S=L/r,Ra=P/r,Pa=window.btoa&&window.atob,M={EMPTY:"0",ma:"1",n:"2",B:"3",va:"4",fa:"5",q:"6",m:"7"},va=8,na={ja:va+0,p:va+1,w:va+2,aa:va+3},Sa=va+4,t={i:0,j:1,f:2},C={ha:0,ka:1,ca:2,ua:3,T:4,ba:5,oa:6,ea:7,na:8,U:9,m:10,ga:11},Va=10,Ka=12,Ya=[1,-6],bb=3,cb=5,Wa=10,Xa="023123467".split(""),z={p:0,da:1,m:2,w:3,n:4,A:5,q:6,B:7,la:8,qa:9},D={};D[z.p]={frame:{x:30,y:0,b:30,c:14},h:{x:1,y:1,b:30,c:14},frames:[{x:1,y:1,b:15,
c:13},{x:17,y:1,b:15,c:13}]};D[z.da]={frame:{x:14,y:40,b:14,c:8},h:{x:1,y:7,b:14,c:8}};D[z.m]={frame:{x:32,y:14,b:16,c:16},h:{x:0,y:0,b:16,c:16}};D[z.w]={frame:{x:0,y:24,b:14,c:24},h:{x:1,y:7,b:14,c:24}};D[z.n]={frame:{x:16,y:48,b:16,c:16},h:{x:0,y:0,b:16,c:16}};D[z.A]={frame:{x:0,y:0,b:30,c:24},h:{x:1,y:3,b:30,c:24},frames:[{x:0,y:0,b:15,c:24},{x:15,y:0,b:15,c:24}]};D[z.q]={frame:{x:48,y:14,b:16,c:10},h:{x:0,y:10,b:16,c:10}};D[z.B]={frame:{x:14,y:24,b:16,c:16},h:{x:0,y:0,b:16,c:16}};D[z.la]={frame:{x:31,
y:30,b:6,c:14},h:{x:4,y:1,b:6,c:14}};D[z.qa]={frame:{x:0,y:48,b:16,c:16},h:{x:0,y:0,b:16,c:16}};var la=new Image,Ja=document.createElement("canvas"),Ta=0;la.onload=function(){Ja.width=Ta=la.naturalWidth;Ja.height=la.naturalHeight;var a=Ja.getContext("2d");a.translate(la.naturalWidth,0);a.scale(-1,1);a.drawImage(la,0,0)};la.src="img/imgmap.png";var b={position:null,speed:4,N:0,Q:0,R:0,Ba:2,Aa:-7,D:!1,l:!1,a:!1,s:!1,v:0,Ma:!1,d:void 0,G:0,e:Va,Ha:!0};e=c=null;n=0;E=!1;N=0;A=Wa;var ca=[],Ia={Z:null,
size:1,position:null,F:[0,0]},T=[],db={position:null},ua=[],ab={position:null,speed:6},ma=[],k={state:t.i,M:U.getBoundingClientRect(),time:0,X:0,Y:0,o:null},La=document.createElement("canvas");d=null;f=[80,53];x=[95,78];var eb={name:"Tutorial",u:[33,370],t:[L-24,55],r:[300,365],g:[20,70],map:"00000000000000000000000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000006000000000000000000000000000000000000000110000000000033300000000000006000000000000110000000003330000000000001110000000000000000000000333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003333333333333333333333333333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555500000000000000000000000000000000000055550000000000000000000000000000000000005555000000000007000000000000002000000000111111111111111111111111111111200000000000000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020000000001111111111111111111111111111111111111111",
e:[1],k:3E6,J:[[20,340,["PLAYER 1"]],[100,340,["ARROWS: move/jump"]],[250,340,["SPACEBAR: grab/release crate"]],[500,340,["UP/DOWN: Climb ladder"]],[450,250,["Crates break if you fall from too high"]],[160,250,[(J?"S":"SPACEBAR")+": buy candies when not holding crate","E: Use candy to gain speed"]],[10,230,["Deliver crate to green area"]],[560,30,["PLAYER 2",(J?"DPad":"Mouse")+": move"]],[410,70,["Don't get shot","Hide in the nest"]],[410,130,[(J?"2":"RClick")+": eat from nest or candy crumbs",(J?
"1":"LClick")+": shoot!"]],[140,60,["Don't touch roofs or the boy"]]]},fb={name:"Level 1",u:[25,366],t:[616,24],r:[41,364],g:[513,180],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000003330000000000000000000000000000000000003333300000000000000000000000000000000000055500000000000000000000000000000000000005550000020000000000000200000000000000000555020002000111111111120000333000000000111112000200133333330002000000000000000000000200021130000000000200000000000000000000020002000000000000020000000000000000000002000200020000000002111111100111001101111100111112000000000200000000000000000000000033333200000000020000000000000000000000000000020000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000001111111111111111111111111111111111111111",
e:[1,2],k:6E4},gb={name:"Level 2",u:[28,143],t:[600,296],r:[588,365],g:[51,50],map:"33330000000000000000000000000000000000005550000000000033000000000330000000000000555000000000000000000000000000000000000055500000000000000003030000000000000000001111111000000000000030000000000000110010000000010000000000000000000000000100301000000000000200000200000200000200000000100000000011120111102000201111021113002010111100000002000000020200000002000000211100000000000100000000200000000100000020000000000000000000000000000000000002002000000000000000000000000000000000030211100000001110000000000000000000000030020000000000000000000000003333300000000002000000000000000000000000000000000003020200000000000001100000000000000000000002110000000000000000000000000020700000020200000000000000000000000000112110000002020000060000000000010000000000200000000201000011100000000000000000000020000000020000000000000000000000000000002000000002000000000000000000000000000000200000000200000000001111111111111111111111111111111111111111",
e:[1,2],k:12E4},hb={name:"Level 5",u:[75,370],t:[L-24,24],r:[83,365],g:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000003300000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000303030200000000200000000000000000207000000000020000000000333330003030300011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
e:[1,2,3],k:3E5},v=window.localStorage&&window.localStorage.ia&&JSON.parse(window.localStorage.ia)||[eb,fb,gb,hb],X={$:{},L:function(a){X.$[a.keyCode]=void 0},K:function(a){X.$[a.keyCode]=$}};window.addEventListener("keyup",X.L,!1);window.addEventListener("keydown",X.K,!1);for(var Za=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],Ua={},Ma=0;Ma<Za.length;Ma++)Ua[Ma]=Na.ra(["synth",0,0.4,0,0.208,0,0.12,20,Za[Ma],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var Qa=Xa.slice(),Ha=
{};w(C.ha,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,0,0,0.783,0,0,0,0]);w(C.ka,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);w(C.ba,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);w(C.na,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);w(C.ca,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,
0,0.094,0.066,1,0,0,0.28,0]);w(C.ea,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);w(C.oa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);w(C.T,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);w(C.ua,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);w(C.U,["square",0,0.4,
0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);w(C.m,["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);w(C.ga,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);y(q);O(U,"click",Y);O(U,"mousedown",function(a){1===a.which&&(aa=!0);k.state===t.f&&aa&&Y()});O(U,"mouseup",function(a){1===a.which&&(aa=!1)});O(U,"mousemove",function(a){var b=qa(a);s=[b[0],b[1]];k.state===t.j?e=
qa(a).slice():k.state===t.f&&aa&&Y()});ka("s",function(){k.state===t.i?X.K({keyCode:68}):Y()},function(){X.L({keyCode:68})});O(U,"contextmenu",ea);ka("e",function(a){k.state===t.i?X.K({keyCode:74}):ea(a)},function(){X.L({keyCode:74})});var Ga=document.getElementById("o"),ia=Ga.getBoundingClientRect(),$a=[100,100],Oa=!1,Fa;O(Ga,"touchstart",a);O(Ga,"touchmove",a);O(Ga,"touchend",function(a){a.preventDefault();Oa=!1});ka("p",function(){X.K({keyCode:k.state!==t.i?32:74})},function(){X.L({keyCode:k.state!==
t.i?32:74})});u("a",69);u("l",37);u("u",38);u("r",39);u("d",40);u("g",71);u("c",67);u("t",84);u("n",78);(function F(a){var u=a,l=H(),w=b.Ba,D=b.position[0],O=b.position[1],g=X.$;if(k.state===t.i)if(g[37]&&!b.a)q=(q+v.length-1)%v.length,y(q),b.a=!0;else if(g[39]&&!b.a)q=(q+1)%v.length,y(q),b.a=!0;else if(g[69]&&!b.a)b.a=!0,v[q].O||(l=v[q],l={name:"CustomLevel"+Ca++,u:l.u.slice(),t:l.t.slice(),r:l.r.slice(),g:l.g&&l.g.slice(),map:l.map,e:l.e.slice(),k:l.k,O:!0},v.push(l),q=v.length-1,y(q)),ra(t.f),
g[69]=void 0;else if(g[68]&&!b.a)b.a=!0,v[q].O&&(v.splice(q,1),q--,y(q));else if(g[74]&&v[q].O&&!b.a){if(w=l=prompt("LEVEL JSON",JSON.stringify(v[q])))a:{try{JSON.parse(l);w=!0;break a}catch(aa){alert("Level not valid: "+aa.message)}w=!1}w&&(v[q]=JSON.parse(l),y(q));g[74]=void 0}else g[83]&&!b.a?b.a=!0:g[37]||(g[39]||g[69]||g[74]||g[83])||(b.a=!1);else{if(k.state===t.f)if(g[37]&&!b.a)K=(K+Sa-1)%Sa,b.a=!0;else if(g[39]&&!b.a)K=(K+1)%Sa,b.a=!0;else if(g[71]&&!b.a)f instanceof Array?d=x=f=null:(f=[32,
32],x=[f[0]+15,f[1]+23],d=x.slice()),b.a=!0;else if(g[67]&&!b.a){b.a=!0;try{var Q=JSON.parse(prompt("Set crates",JSON.stringify(v[q].e)));if(Q instanceof Array){for(l=0;l<Q.length;l++)"number"===!typeof l&&alert("Crates not valid"),Q[l]=Math.max(1,Math.min(5,Q[l]));v[q].e=Q;V(v[q])}}catch(ba){alert("Crates not valid: "+ba.message)}g[67]=void 0}else if(g[78]&&!b.a){b.a=!0;if(l=prompt("Set name",v[q].name))v[q].name=l;g[78]=!1}else g[84]&&!b.a?(b.a=!0,u=+prompt("Set time",v[q].k),!isNaN(u)&&0<u&&(v[q].k=
u),g[84]=!1):g[69]&&!b.a?(b.a=!0,ya(),g[69]=void 0):g[37]||(g[39]||g[71]||g[67]||g[78]||g[84]||g[69])||(b.a=!1);else if(k.state===t.j){if(!g[32]||b.D||b.l||b.s)g[69]&&!b.s?(b.s=!0,0<b.G&&(b.G--,b.Q=3,b.R=u+5E3,Q=Object.create(db),Q.position=[b.position[0]+4,b.position[1]-7],ua.push(Q),B(C.na))):g[32]||(g[69]||!b.s)||(b.s=!1);else a:if(b.s=!0,Q=b.d,u=void 0!==Q?T[Q]:void 0,void 0===u){for(Q=0;Q<T.length;Q++)if(wa(b.position,T[Q].position)){b.d=Q;B(C.T);break a}da(M.m)&&(b.G=3,B(C.m))}else b.d=void 0,
B(C.T),da(M.fa)&&void 0!==u&&(T.splice(Q,1),0>=T.length?R():B(C.ba));g[38]?da(M.n)?(b.position[1]=Math.min(P-r,O-w),b.a=!0):b.D||b.l||(b.v=b.Aa,b.N=l,b.D=!0,b.l=!0,B(C.ha)):!g[38]&&b.D&&(b.D=!1);g[37]&&(b.position[0]=Math.max(r,D-xa()),b.a=!0,b.C=!0);g[39]&&(b.position[0]=Math.min(L-2*r,D+xa()),b.a=!0,b.C=!1);g[40]&&da(M.n)&&(b.position[1]=Math.min(P,O+w),b.a=!0);g[37]||(g[38]||g[39]||g[40])||(b.a=!1)}g[27]&&ya()}$=a;if(Oa&&Fa){for(var I,l=0;l<Fa.length;l++)if(g=Fa[l],g.clientX>=ia.left&&g.clientX<
ia.left+ia.width&&g.clientY>=ia.top&&g.clientY<ia.top+ia.height){I=Fa[l];break}if(I){I=[I.clientX-ia.left,I.clientY-ia.top];var g=ga($a,I),l=Math.sqrt(fa($a,I))/12.5,h;k.state===t.j?h=c:k.state===t.f&&(h=s);h&&(h[0]+=(k.state===t.f?Math.round(Math.cos(g)):Math.cos(g))*(100>I[0]?-l:l),h[1]+=(k.state===t.f?Math.round(Math.sin(g)):Math.sin(g))*(100>I[0]?-l:l),h[0]=Math.max(0,Math.min(h[0],L-1)),h[1]=Math.max(0,Math.min(h[1],P-1)));Ea&&Y()}}if(k.state===t.j){k.M=U.getBoundingClientRect();h=0;for(var m;h<=
b.v;){if(sa(b.position[0]-8,b.position[1]+h,16,0,M.ma)){m=b.position[1]+h-(b.position[1]+h)%r;break}h+=r}m?(b.position[1]=m,b.l&&(b.N=0,(m=za())&&b.v>12-m.size&&Aa()),b.l=!1,b.v=0):sa(b.position[0]-16,b.position[1]-32,16,32,M.n)?b.l=!1:(b.v+=1,b.l=!0,b.position[1]+=b.v);void 0!==b.d&&(T[b.d].position[0]=b.position[0]+Ya[0],T[b.d].position[1]=b.position[1]+Ya[1]);b.R<a&&0<b.Q&&(b.Q=0);for(m=0;m<ma.length;m++)if(h=ma[m],h.position[1]+=h.speed,wa(b.position,h.position))Aa(),ma.splice(m,1),m--;else if(h.position[1]>
P||sa(h.position[0],h.position[1],0,0,M.B))ma.splice(m,1),m--;k.time<a&&pa();c&&e&&(g=ga(c,e),l=c[0]>e[0]?-1:1,m=Math.abs(c[0]-e[0]),h=Math.abs(c[1]-e[1]),3<m||3<h)&&(I=16*Math.cos(g)*l,g=16*Math.sin(g)*l,Math.abs(I)>m&&(I=m*I/Math.abs(I)),Math.abs(g)>h&&(g=h*g/Math.abs(g)),c[0]+=I,c[1]+=g);E=Math.pow(7*H()+75,2)>=fa(c,b.position);f&&(m=sa(c[0],c[1],0,0,M.q)?x:c,h=ga(d,m),I=d[0]>m[0]?-1:1,3<Math.abs(m[0]-d[0])||3<Math.abs(m[1]-d[1]))&&(d[0]+=1*Math.cos(h)*I,d[1]+=1*Math.sin(h)*I);(Math.pow(7*H()+
25,2)>=fa(c,b.position)||Z(c[0],c[1],0,0,M.B)||f&&3>Math.sqrt(fa(d,c)))&&N<a&&(N=a+5E3,B(C.ga),n=0,A--,0>=A&&R())}k.M=U.getBoundingClientRect();p.fillStyle="black";p.fillRect(0,0,L,P);for(m=0;m<S;m++)for(h=0;h<Ra;h++)ta(ca[S*h+m],m*r,h*r);for(h=0;h<T.length;h++)h!==b.d&&(m=T[h],p.drawImage(m.Z,m.position[0]-8,m.position[1]-8));for(h=0;h<ua.length;h++)m=ua[h],G(z.da,m.position[0]-8,m.position[1]-8);for(h=0;h<ma.length;h++)m=ma[h],G(z.la,m.position[0]-8,m.position[1]-8);f&&G(z.w,f[0],f[1]);if(k.o.J)for(m=
0;m<k.o.J.length;m++){h=p;D=k.o.J[m][2];I=k.o.J[m][0];w=k.o.J[m][1];g=h.fillColor;l=h.textAlign;h.fillStyle="black";for(D=D.slice();0<D.length;)h.fillText(D.shift(),I,w),w+=10;h.fillStyle=g;h.textAlign=l}k.state===t.j?b.l?W(z.A,b.position[0]-8,b.position[1]-24,0,b.C):b.a?W(z.A,b.position[0]-8,b.position[1]-24,10,b.C,a):W(z.A,b.position[0]-8,b.position[1]-24,1,b.C):W(z.A,b.position[0]-8,b.position[1]-24,1);void 0!==b.d&&(m=T[b.d],p.drawImage(m.Z,b.C?m.position[0]+2:m.position[0]-16-m.size,m.position[1]-
10));E&&(p.beginPath(),p.arc(b.position[0],b.position[1],7*H()+25,0,360),p.lineWidth=2,p.strokeStyle="#f09",p.stroke());k.state===t.j?N>a&&0===Math.floor(a/100)%2||W(z.p,c[0]-8,c[1]-8,2,!1,a):W(z.p,c[0]-8,c[1]-8,0);f&&(p.fillStyle="red",p.fillRect(d[0]-1,d[1]-1,2,2),p.beginPath(),p.arc(d[0],d[1],5,0,360),p.lineWidth=2,p.strokeStyle="red",p.stroke());k.state===t.j?(p.fillStyle="#00deff",p.fillText("BOY",10,396),p.fillStyle="red",p.fillText("CROW",600,12),p.fillStyle="white",p.fillText("SPEED: "+H()+
"   BOOST: "+Math.max(0,Math.ceil((b.R-a)/1E3))+"   TIME: "+Math.max(0,Math.ceil((k.time-a)/1E3))+"   CANDIES: "+b.G+"   CRATES: "+b.e,50,396),p.fillText("SHOTS: "+n+"   STUN: "+Math.max(0,Math.ceil((N-a)/1E3))+"   HEALTH: "+A,410,12)):k.state===t.f&&(p.fillStyle="white",p.fillText("< > CHANGE BLOCK   G: GRANNY   C: CRATES   T: TIME ("+v[q].k+")   N: NAME ("+v[q].name+")"+(J?"   1: PAINT   2: TOGGLE PAINT":""),12,12));k.state===t.i&&p.drawImage(La,0,0);k.state===t.f&&(p.globalAlpha=0.6,K<va?(ta(""+
K,s[0]-s[0]%r,s[1]-s[1]%r),p.strokeStyle="#000",p.strokeRect(s[0]-s[0]%r,s[1]-s[1]%r,r,r)):K===na.ja?W(z.A,s[0]-8,s[1]-24,1):K===na.p?W(z.p,s[0]-8,s[1]-8,0):K===na.w?G(z.w,s[0],s[1]):K===na.aa&&(p.fillStyle="yellow",p.fillRect(s[0]-8,s[1]-8,16,16),p.fillStyle="#000",p.fillText("C",s[0]-4,s[1]+4)),p.globalAlpha=1);window.requestAnimationFrame(F)})()})();

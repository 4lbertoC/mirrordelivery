var X={};
(function(a){function s(a,e){return e?m(a&255)+s(a>>8,e-1):""}var w=this.ba=a||44100,p=2*w,m=String.fromCharCode,g;this.ta=function(a){var e=Audio,m=btoa,k="",y=a.length;for(c=0;c<y;c++)var G=32767*a[c]|0,G=-32768>G?-32768:32767<G?32767:G,G=G+(0>G?65536:0),k=k+String.fromCharCode(G&255,G>>8);a=k;a=["RIFF",36+(g=a.length),"WAVEfmt ",16,1,1,w,p,2,16,"data",g,a];k="";for(c=0;c<a.length;c++)k+="s"=="s4s4224422s4s"[c]?a[c]:s(a[c],"s4s4224422s4s".charCodeAt(c)-48);return new e("data:audio/wav;base64,"+m(k))};
var k,c,J=Math.sin,e=2*Math.PI;this.filter=function(a,e,m,g,y,s,p,w,n,B){m=m?m:1;g=g?g:a.length;k=a.slice(0);for(c=m;c<g;c++)k[c]=e(a,k,m,g,c,y,s,p,w,n,B);return k};this.filters={Da:function(a,e,m,g,c,k){return e[c-1]+k*(a[c]-e[c-1])},Ea:function(a,e,m,g,c,k){return e[c-1]+k*(g-c)/(g-m)*(a[c]-e[c-1])},Ca:function(a,e,c,m,g,k){return k*(e[g-1]+a[g]-a[g-1])}};this.da=function(a,g,m,k,s,p,n,J,Q){g=g*e/w;var B=Array(a|0);for(c=0;c<a;c++)B[c]=m(c*g,k,s,p,n,J,Q);return B};var n=0;this.u={va:function(a){4>
a%e&&(n=2*Math.random()-1);return n},Fa:Math.random,za:Math.sin,Ba:function(a){return J(a)+0.5*J(a/2)+0.3*J(a/4)},ya:function(a){return 2*(a/e-(a/e+0.5|0))},ea:function(a,e){return J(a)>e?1:J(a)<e?-1:e}}}).apply(X);var ia={};
(function(){this.N=[];this.L={square:X.u.ea,saw:X.u.ya,sine:X.u.za,noise:X.u.va,synth:X.u.Ba};this.pa=function(){var a=[],s;for(s in this.L)a.push(s);return a};this.qa=function(){function a(a,g,k,c,p){void 0===p&&(p=(k-g)/1E3);a={name:a,id:a.replace(/ /g,""),min:g,max:k,step:p,oa:c,type:"range",group:w};s.push(a)}var s=[],w=0,p=this.pa();(function(a,g,k){a={name:a,id:a.replace(/ /g,""),options:g,oa:k,type:"option",group:w};s.push(a)})("Generator",p,p[0]);a("SuperSamplingQuality",0,16,0,1);a("MasterVolume",
0,1,0.4);w++;a("AttackTime",0,1,0.1);a("SustainTime",0,2,0.3);a("SustainPunch",0,3,2);a("DecayTime",0,2,1);w++;a("MinFrequency",20,2400,0,1);a("StartFrequency",20,2400,440,1);a("MaxFrequency",20,2400,2E3,1);a("Slide",-1,1,0);a("DeltaSlide",-1,1,0);w++;a("VibratoDepth",0,1,0);a("VibratoFrequency",0.01,48,8);a("VibratoDepth Slide",-0.3,1,0);a("VibratoFrequencySlide",-1,1,0);w++;a("ChangeAmount",-1,1,0);a("ChangeSpeed",0,1,0.1);w++;a("SquareDuty",0,0.5,0);a("SquareDutySweep",-1,1,0);w++;a("RepeatSpeed",
0,0.8,0);w++;a("PhaserOffset",-1,1,0);a("PhaserSweep",-1,1,0);w++;a("LPFilterCutoff",0,1,1);a("LPFilterCutoffSweep",-1,1,0);a("LPFilterResonance",0,1,0);a("HPFilterCutoff",0,1,0);a("HPFilterCutoffSweep",-1,1,0);return s};this.da=function(a){var s=2*Math.PI,w=Math.sin,p=Math.pow,m=Math.abs,g=X.ba,k=a.SuperSamplingQuality|0;1>k&&(k=1);for(var g=g*k,c=[{t:0,G:1,time:a.AttackTime},{t:1+a.SustainPunch,G:1,time:a.SustainTime},{t:1,G:0,time:a.DecayTime}],J=c.length,e=0;e<J;e++)c[e].C=1+(c[e].time*g|0);for(var n=
void 0,aa=0,v=-1,F=0,ea=-1,y=0,e=0;e<J;e++)y+=c[e].C;y<g/2&&(y=g/2);var G=Array(y/k|0),H=0,U=0,Q=ia.L[a.Generator];void 0===Q&&(Q=this.L.ea);var B=0,B=a.SquareDuty,na=a.SquareDutySweep/g,M=0,D=a.StartFrequency*s/g,R=1+64*p(a.Slide,3)/g,V=p(a.DeltaSlide,3)/(1E3*g);void 0!==k&&(V/=k);a.MinFrequency>a.StartFrequency&&(a.MinFrequency=a.StartFrequency);a.MaxFrequency<a.StartFrequency&&(a.MaxFrequency=a.StartFrequency);for(var ja=a.MinFrequency*s/g,ka=a.MaxFrequency*s/g,ba=0,fa=a.VibratoFrequency*s/g,A=
a.VibratoDepth,l=1+3*p(a.VibratoFrequencySlide,3)/g,W=a.VibratoDepthSlide/g,u=0,E=a.ChangeSpeed*g,N=p(a.ChangeAmount,2),N=0<a.ChangeAmount?1+10*N:1-0.9*N,S=Array(1024),e=0;1024>e;e++)S[e]=0;var z=0,x=1020*p(a.PhaserOffset,2),h=4E3*p(a.PhaserSweep,3)/g,O=1E-5<m(h)||1E-5<m(x),ga=0.0010<a.HPFilterCutoff||0.999>a.LPFilterCutoff,q=0,t=0,P=p(a.LPFilterCutoff,3)/10,ha=1+a.HPFilterCutoffSweep/1E4,Y=5/(1+20*p(a.LPFilterResonance,2))*(0.01+a.LPFilterCutoff);0.8<Y&&(Y=0.8);var Y=1-Y,qa=0.999>a.LPFilterCutoff,
ca=0,L=p(a.HPFilterCutoff,2)/10,b=1+a.HPFilterCutoffSweep/1E4,I=0,Z=y;0<a.RepeatSpeed&&(Z=p(1-a.RepeatSpeed,2)*g+32);for(var ra=a.MasterVolume,C=0,e=0;e<y;e++)H=Q(M,B,0),B+=na,0>B?B=0:0.5<B&&(B=0.5),I>Z&&(M=0,D=a.StartFrequency*s/g,R=1+3*p(a.Slide,3)/g,V=p(a.DeltaSlide,3)/(1E3*g),void 0!==k&&(V/=k),u=0,E=a.ChangeSpeed*g,N=1+(a.ChangeAmount|0)/12,I=0),I+=1,M+=D,R+=V,D*=R,u>E&&(D*=N,E=y),u+=1,D>ka?D=ka:D<ja&&(D=ja),ba+=fa,n=D*w(ba)*A,M+=n,fa*=l,W&&(A+=W,0>A?W=A=0:1<A&&(A=1,W=0)),ga&&(0.0010<m(L)&&(L*=
b,1E-5>L?L=1E-5:0.1<L&&(L=0.1)),n=q,P*=ha,0>P?P=0:0.1<P&&(P=0.1),qa?(t+=(H-q)*P,t*=Y):(q=H,t=0),q+=t,ca+=q-n,H=ca*=1-L),O&&(x+=h,0>x&&(x=-x,h=-h),1023<x&&(x=1023,h=0),S[z]=H,H+=S[z-(x|0)+1024&1023],z=z+1&1023),e>ea&&(v+=1,n=v<J?c[v]:{t:0,G:0,C:y},aa=n.t,F=(n.G-n.t)/(n.C+1),ea+=n.C),H*=aa,aa+=F,H*=ra,1<k?(U+=H,0===(e+1)%k&&(G[C]=U/k,C+=1,U=0)):G[e]=H;a=g/100|0;s=Array(a);for(e=0;e<a;e++)s[e]=0;return s.concat(G).concat(s)};this.N=this.qa()}).apply(ia);var sa={};(function(){this.ca=function(a){a=ia.da(this.na(a));return X.ta(a)};this.na=function(a){for(var s={},w=ia.N.length,p=0;p<w;p++)s[ia.N[p].id]=a[p];return s}}).apply(sa);(function(){var a,s,w,p,m,g,k,c,J,e;function n(a,b,e){var d=new Image;d.width=b||16;d.height=e||16;d.src=a;return d}function aa(){0<ta.length&&(ua[ta.shift()].play(),setTimeout(aa,200))}function v(a,b){la[a]=sa.ca(b)}function F(a){la[a]&&(la[a].pause(),la[a].currentTime=0,la[a].play())}function ea(a,b,e,d,g){var c=a.fillColor,k=a.textAlign;a.fillStyle="black";g&&(a.textAlign=g);for(b=b.slice();0<b.length;)a.fillText(b.shift(),e,d),d+=10;a.fillStyle=c;a.textAlign=k}function y(a){a=r.l=K[a]||K[u];var c=
a.k;r.h=!1;b.position=a.q.slice();m=a.p.slice();b.s=0;b.F=0;b.c=void 0;b.d=P;b.j=!1;b.o=!1;b.a=!1;b.n=!1;g=ca;k=0;r.time=0;r.g=!1;a.i?(s=a.i.slice(),w=[a.i[0]+15,a.i[1]+23],e=w.slice()):w=s=null;I="4444444444444444444444444444444444444444"+a.map+"4444444444444444444444444444444444444444";I=I.split("");for(var h,d,l,p,q=C.length=0;q<a.d.length;q++)h=a.d[q],d=Object.create(ra),d.size=h,l=document.createElement("canvas"),l.width=ha+h,l.height=ha+h,p=l.getContext("2d"),p.fillStyle="yellow",p.fillRect(0,
0,ha+h,ha+h),p.fillStyle="black",p.fillText(h,5,10),d.b=l,l=c[0]+16*q,h=c[1]-h,d.position=[l,h],d.fa=[l,h],C.push(d);da.length=0;$.length=0;oa.width=z;oa.height=x;c=oa.getContext("2d");c.fillStyle="rgba(0,0,0,0.7)";c.fillRect(0,0,z,x);c.fillStyle="#fff";c.font="20px courier";c.textAlign="center";c.fillText(r.l.name,z/2,x/2-50);c.fillText("Delivery Boy "+r.P+" - "+r.R+" Crow",z/2,x/2);c.font="15px courier";c.fillText("Select level with arrows",z/2,x/2+80);c.fillText("Click the crow to start!",z/2,
x/2+100);c.fillText("E to edit",z/2,x/2+120);a.B&&(c.fillText("D to delete",z/2,x/2+140),c.fillText("J to insert/copy JSON",z/2,x/2+160));c.beginPath();c.arc(m[0],m[1],16,0,360);c.lineWidth=1;c.strokeStyle="#fff";c.stroke();ta=L.slice()}function G(){r.P+=1;A.style.cursor="auto";F(t.aa);y(u)}function H(){r.R+=1;A.style.cursor="auto";F(t.V);y(u)}function U(a){return[a.clientX-r.Q.left,a.clientY-r.Q.top]}function Q(){return Math.max(1,b.speed+b.D-(void 0!==b.c?C[b.c].size:0))}function B(a,b){return Math.round(a[0]/
h)===Math.round(b[0]/h)&&Math.round(a[1]/h)===Math.round(b[1]/h)}function na(){var a=b.A,c=Q();b.a||(a=0);a=Math.min(c,a+c/5);b.A=a;return R(q.f)?c/3:a}function M(a){return B(b.position,[b.position[0],b.position[1]+h/2])||I[O*Math.round(b.position[1]/h)+Math.round(b.position[0]/h-1)]!==a&&I[O*Math.round(b.position[1]/h)+Math.round(b.position[0]/h)]!==a?!1:!0}function D(a,b){return I[O*Math.round(a[1]/h-1)+Math.round(a[0]/h-0.5)]===b?!0:!1}function R(a){return D(b.position,a)}function V(a,b){return Math.pow(a[0]-
b[0],2)+Math.pow(a[1]-b[1],2)}function ja(){return void 0!==b.c?C[b.c]:void 0}function ka(){var a=ja();a&&(F(t.Z),b.c=void 0,a.position=a.fa.slice(),b.d--,0>=b.d&&H())}function ba(){var a=ja();a&&b.e>qa-a.size&&ka()}function fa(a,b,c){var d=null,e="#00deff";a===q.w?d=Z.ma.b:a===q.O?d=Z.ka.b:a===q.la?e="#000":a===q.W?e="#0f0":a===q.M?d=Z.ja.b:a===q.f?d=Z.ia.b:a===q.r&&(d=Z.ha.b);l.fillStyle=e;l.fillRect(b,c,h,h);null!==d&&l.drawImage(d,b,c,h,h)}window.requestAnimationFrame=window.requestAnimationFrame||
window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var A=document.getElementById("c"),l=A.getContext("2d"),W=0,u=0,E=[0,0],N=!1,S=0,z=640,x=400,h=16,O=z/h,ga=x/h,q={EMPTY:"0",w:"1",f:"2",O:"3",la:"4",W:"5",M:"6",r:"7"},t={Y:0,Z:1,U:2,ga:3,I:4,T:5,aa:6,V:7,$:8,J:9,r:10,X:11},P=10,ha=12,Y=[1,-6],qa=12,ca=10,L="023123467".split(""),b={position:null,speed:4,A:0,D:0,F:0,sa:2,ra:-7,o:!1,n:!1,a:!1,j:!1,e:0,images:{Aa:n("img/man.png",16,32)},Ga:!1,c:void 0,
s:0,d:P};m=null;a=n("img/crow.png");c=3;J=!1;k=0;g=ca;var I=[],Z={ia:{b:n("img/ladder.png")},ja:{b:n("img/nest.png")},ha:{b:n("img/dispenser.png")},ka:{b:n("img/roof.png")},ma:{b:n("img/wall.png")}},ra={b:null,size:1,position:null,fa:null},C=[],xa={b:n("img/crumbs.png"),position:null},da=[],ya={b:n("img/shot.png"),position:null,speed:6},$=[],r={h:!1,Q:A.getBoundingClientRect(),time:0,P:0,R:0,l:null,g:!1},oa=document.createElement("canvas");e=null;s=[80,53];p=n("img/granny.png");w=[95,78];var K=[{name:"Tutorial 1",
q:[33,370],p:[z-24,24],k:[53,365],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555000000000000000000000000000000000000555500000000000000000000000000000000000055551111111111111111111111111111111111111111",
d:[1],m:3E4,v:{H:["PLAYER 1","ARROWS: move/jump","SPACEBAR: grab/release crate","Leave crate into the green zone."],K:["PLAYER 2","MOUSE: move","LClick: shoot","RClick: recharge from nest","Shoot boy to make his crate fall."]}},{name:"Tutorial 2",q:[33,370],p:[z-24,24],k:[53,365],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033333300000000000000000000000000000333330000000000000000000000000000000000005555000000000000000000000000000000000000555500000000007000000000000000000000000055551111111111111111111111111111111111111111",
d:[3],m:3E4,v:{H:["SPACEBAR: buy candies when not holding a crate.","E: use candy","Candies give a speed boost."],K:["Roofs block shots.","Don't touch the roofs or the boy.","RClick: eat candy crumbs to get 5 shots."]}},{name:"Tutorial 3",q:[33,370],p:[z-24,24],k:[53,365],i:[100,227],map:"00000000000000000000000000000000000000600000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000333333300000000000000000000000000000000055555500000000000000000000000000000000005555550000000000000000000000000000000000555555000000000200000000000000033330000011111111111111120000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000700200033333300000000021111111100011111111120000000000000000000000000000000000000002000000000000000000000000000000000000000200000000000000000000000000000000000000020001111111111111111111111111111111111111111",
d:[2,3],m:6E4,v:{H:["ARROWS: climb ladder","Crates will break if you fall from too high."],K:["Don't get shot!","Hide in the nest."]}},{name:"Level 5",q:[75,370],p:[z-24,24],k:[83,365],i:[80,53],map:"33333300000000000000000000000000000000605555530000000000000000000000000000000011555550000000000000000000003333000000000055555000000000000002000000000000000000001111110010011001111201110011110000000000000000000000000000020000000000100000000000000000000000000702000000000001000000000001110000000000111111000000000010020000002000000000000033333330000333330102100000200033333300000000000000000000000200000020000000000000000000000000000000020000002000000000000010010010011000020202000000201111111111111000000033311001111211100020033333333330000000000003300000033333002000000000000000000000000000000000000000200000000000000000200000000000020000000020111100111110011120111001111112011111002000000000000000002000000000000200000000200000000000000000207000000000020000000000333330000000000011110000200002000000000000000000000000000000000021111200000000000000000000000000000000002000000000001111111111111111111111111111111111111111",
d:[1,2,3],m:3E5}],ma={S:{},xa:function(a){ma.S[a.keyCode]=void 0},wa:function(a){ma.S[a.keyCode]=W}};window.addEventListener("keyup",ma.xa,!1);window.addEventListener("keydown",ma.wa,!1);for(var va=[523.25,587.33,659.26,698.46,783.99,880,987.77,1046.5,1108.73],ua={},pa=0;pa<va.length;pa++)ua[pa]=sa.ca(["synth",0,0.4,0,0.208,0,0.12,20,va[pa],2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0.1,0]);var ta=L.slice(),la={};v(t.Y,["square",0,0.4,0,0.174,0,0.28,20,497,2400,0.22,0,0,0.01,3E-4,0,0,0,0.0665,0,0,
0,0,0.783,0,0,0,0]);v(t.Z,["noise",0,0.4,0,0.14,0.405,0.116,20,479,2400,-0.07,0,0,0.01,3E-4,0,0,0,0,0,0,-0.086,-0.122,1,0,0,0,0]);v(t.T,["square",0,0.4,0,0.098,0.504,0.282,20,1582,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);v(t.$,["saw",0,0.4,0,0.324,0,0.284,20,631,2400,0.172,0,0.498,19.35,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);v(t.U,["saw",0,0.4,0,0.212,0,0.028,20,1169,2400,-0.52,0,0,0.01,3E-4,0,0,0,0.5,-0.592,0,0.094,0.066,1,0,0,0.28,0]);v(t.V,["synth",0,0.4,0,0.32,0.348,0.44,20,372,417,0,0,0,0.01,
3E-4,0,0.374,0.264,0,0,0,0,0,1,0,0,0,0]);v(t.aa,["synth",0,0.4,0,0.13,0.345,0.41,253,1168,1407,-0.0060,-0.082,0,0.01,3E-4,0,0.206,0.166,0,0,0,0,0,1,0,0,0,0]);v(t.I,["noise",0,0.4,0,0.0020,0.024,0.09,20,372,2400,0,0,0,0.01,3E-4,0,-0.342,0.809,0,0,0,0,0,1,0,0,0,0]);v(t.ga,["noise",0,0.4,0,0.152,0.393,0.274,20,839,2400,-0.31,0,0,0.01,3E-4,0,-0.34,0.783,0,0,0.6096,0.526,-0.0080,1,0,0,0,0]);v(t.J,["square",0,0.4,0,0.04,0,0.048,20,578,2400,0.104,0,0.683,19.158,3E-4,0,0,0,0.385,0,0,0,0,1,0,0,0,0]);v(t.r,
["square",0,0.4,0,0.046,0.477,0.24,20,1197,2400,0,0,0,0.01,3E-4,0,0.498,0.204,0,0,0,0,0,1,0,0,0,0]);v(t.X,["noise",0,0.4,0,0.108,0.336,0.124,20,462,2400,0,0,0,0.01,3E-4,0,0,0,0,0,0,0,0,1,0,0,0,0]);y(u);A.addEventListener("click",function(){if(!r.h)E[0]>m[0]-16&&(E[0]<m[0]+16&&E[1]>m[1]-16&&E[1]<m[1]+16)&&(r.h=!0,r.time=W+r.l.m,aa(),A.style.cursor="none");else if(0<c&&k<W){c--;F(t.U);var a=Object.create(ya);a.position=m.slice();$.push(a)}});A.addEventListener("mousedown",function(a){1===a.which&&(N=
!0);r.g&&N&&(a=Math.floor(E[1]/h),0<a&&a<ga-1&&(I[O*a+Math.floor(E[0]/h)]=""+S))});A.addEventListener("mouseup",function(a){1===a.which&&(N=!1)});A.addEventListener("mousemove",function(a){var b=U(a);E=[b[0],b[1]];r.h?m=U(a).slice():r.g&&N&&(a=Math.floor(E[1]/h),0<a&&a<ga-1&&(I[O*a+Math.floor(E[0]/h)]=""+S))});A.addEventListener("contextmenu",function(a){a.preventDefault();if(r.h&&k<W)if(a=U(a),I[O*Math.round(m[1]/h-0.5)+Math.round(m[0]/h-0.5)]===q.M&&3>c)F(t.J),c++;else{var b;for(b=0;b<da.length;b++)if(B(a,
da[b].position)){c=Math.max(c,5);F(t.J);da.splice(b,1);break}}});(function wa(n){var d=Q(),v=b.sa,L=b.position[0],N=b.position[1],f=ma.S;if(r.h||r.g){if(r.g)f[37]&&!b.a&&(S=(S+8-1)%8,b.a=!0),f[39]&&!b.a&&(S=(S+1)%8,b.a=!0),f[37]||f[39]||(b.a=!1);else if(r.h){if(!f[32]||b.o||b.n||b.j)f[69]&&!b.j?(b.j=!0,0<b.s&&(b.s--,b.D=3,b.F=n+5E3,T=Object.create(xa),T.position=[b.position[0]+4,b.position[1]-7],da.push(T),F(t.$))):f[32]||(f[69]||!b.j)||(b.j=!1);else{b.j=!0;a:{var T=b.c,P=void 0!==T?C[T]:void 0;if(void 0===
P){for(T=0;T<C.length;T++)if(B(b.position,C[T].position)){b.c=T;F(t.I);break a}R(q.r)&&(b.s=3,F(t.r))}else b.c=void 0,F(t.I),R(q.W)&&void 0!==P&&(C.splice(T,1),0>=C.length?G():F(t.T))}}f[38]?R(q.f)?(b.position[1]=Math.min(x-h,N-v),b.a=!0):b.o||b.n||(b.e=b.ra,b.A=d,b.o=!0,b.n=!0,F(t.Y)):!f[38]&&b.o&&(b.o=!1);f[37]&&(b.position[0]=Math.max(h,L-na()),b.a=!0);f[39]&&(b.position[0]=Math.min(z-2*h,L+na()),b.a=!0);f[40]&&((R(q.f)||M(q.f))&&!M(q.w))&&(b.position[1]=Math.min(x,N+v),b.a=!0);f[37]||(f[38]||
f[39]||f[40])||(b.a=!1)}f[27]&&(A.style.cursor="auto",K[u].map=I.join("").substring(O,O*ga-O),y(u))}else{f[37]&&!b.a&&(u=(u+K.length-1)%K.length,y(u),b.a=!0);f[39]&&!b.a&&(u=(u+1)%K.length,y(u),b.a=!0);f[69]&&(K[u].B||(d=K[u],d={name:"CustomLevel1",q:d.q.slice(),p:d.p.slice(),k:d.k.slice(),i:d.i&&d.i.slice(),map:d.map,d:d.d.slice(),m:d.m,B:!0},K.push(d),u=K.length-1),r.g=!0);f[68]&&!b.a&&(b.a=!0,K[u].B&&(K.splice(u,1),u--,y(u)));if(f[74]&&K[u].B&&!b.a){b.a=!0;if(v=d=prompt("LEVEL JSON",JSON.stringify(K[u])))a:{try{JSON.parse(d);
v=!0;break a}catch(U){alert("Level not valid: "+U.message)}v=!1}v&&(K[u]=JSON.parse(d),y(u))}f[37]||(f[39]||f[69]||f[74])||(b.a=!1)}W=n;if(r.h){r.Q=A.getBoundingClientRect();b.e>h/2&&(b.e+b.position[1]>b.ua&&b.e)&&(b.e=h/2,ba());if(R(q.f)||M(q.f)||M(q.w)||b.position[1]>x-h){if(M(q.f)||0<b.e)ba(),b.e=0,b.A=0,b.n=!1;R(q.f)||M(q.f)||0!==b.e||(b.position[1]=b.position[1]-b.position[1]%h+1)}else ba(),b.e+=1,b.n=!0;b.position[1]+=b.e;f=b.position[0];for(d=b.position[1];d<x-h&&!D([f,d],q.w);)d+=h;d-=d%h;
b.ua=d;void 0!==b.c&&(C[b.c].position[0]=b.position[0]+Y[0],C[b.c].position[1]=b.position[1]+Y[1]);b.F<n&&0<b.D&&(b.D=0);for(f=0;f<$.length;f++)if(d=$[f],d.position[1]+=d.speed,B(b.position,d.position))ka(),$.splice(f,1),f--;else if(d.position[1]>x||D(d.position,q.O))$.splice(f,1),f--;r.time<n&&H();J=Math.pow(7*Q()+75,2)>=V(m,b.position);s&&(f=D(m,q.M)?w:m,d=Math.atan((f[1]-e[1])/(f[0]-e[0])),v=e[0]>f[0]?-1:1,3<Math.abs(f[0]-e[0])||3<Math.abs(f[1]-e[1]))&&(e[0]+=1*Math.cos(d)*v,e[1]+=1*Math.sin(d)*
v);(Math.pow(7*Q()+25,2)>=V(m,b.position)||D(m,q.O)||s&&3>Math.sqrt(V(e,m)))&&k<n&&(k=n+5E3,F(t.X),c=0,g--,0>=g&&G())}l.fillStyle="black";l.fillRect(0,0,z,x);for(f=0;f<O;f++)for(d=0;d<ga;d++)fa(I[O*d+f],f*h,d*h);for(d=0;d<C.length;d++)d!==b.c&&(f=C[d],l.drawImage(f.b,f.position[0]-8,f.position[1]-8));for(d=0;d<da.length;d++)f=da[d],l.drawImage(f.b,f.position[0]-8,f.position[1]-8);for(d=0;d<$.length;d++)f=$[d],l.drawImage(f.b,f.position[0]-8,f.position[1]-8);s&&l.drawImage(p,s[0],s[1]);r.l.v&&(ea(l,
r.l.v.H,120,330),ea(l,r.l.v.K,620,70,"right"));l.drawImage(b.images.Aa,b.position[0]-8,b.position[1]-24);void 0!==b.c&&(f=C[b.c],l.drawImage(f.b,f.position[0]-8,f.position[1]-8));J&&(l.beginPath(),l.arc(b.position[0],b.position[1],7*Q()+25,0,360),l.lineWidth=2,l.strokeStyle="#f09",l.stroke());k>n&&0===Math.floor(n/100)%2||l.drawImage(a,m[0]-8,m[1]-8);l.fillStyle="red";s&&(l.fillStyle="red",l.fillRect(e[0]-1,e[1]-1,2,2),l.beginPath(),l.arc(e[0],e[1],5,0,360),l.lineWidth=2,l.strokeStyle="red",l.stroke());
l.fillStyle="#00deff";l.fillText("BOY",10,396);l.fillStyle="red";l.fillText("CROW",600,12);l.fillStyle="white";l.fillText("SPEED: "+Q()+"   BOOST: "+Math.max(0,Math.ceil((b.F-n)/1E3))+"   TIME: "+Math.max(0,Math.ceil((r.time-n)/1E3))+"   CANDIES: "+b.s+"   CRATES: "+b.d,50,396);l.fillText("SHOTS: "+c+"   STUN TIMEOUT: "+Math.max(0,Math.ceil((k-n)/1E3))+"   HEALTH: "+g,370,12);r.g&&l.fillText("< > CHANGE BLOCK",12,12);r.h||r.g||l.drawImage(oa,0,0);r.g&&fa(""+S,E[0]-E[0]%h,E[1]-E[1]%h);window.requestAnimationFrame(wa)})()})();
